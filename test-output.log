
> rest-express@1.0.0 test
> vitest run --run --reporter=verbose


[1m[46m RUN [49m[22m [36mv4.0.8 [39m[90m/root/autolytiq-desk-studio[39m

[90mstdout[2m | server/__tests__/e2e-user-journeys.test.ts
[22m[39m[DB Service] Database service initialized

[90mstdout[2m | server/__tests__/e2e-user-journeys.test.ts[2m > [22m[2mE2E User Journey Tests
[22m[39m[Test Setup] Initializing test database...

[90mstderr[2m | server/__tests__/e2e-user-journeys.test.ts[2m > [22m[2mE2E User Journey Tests
[22m[39m[DB Service] Uncaught exception: TypeError: Cannot set property message of #<ErrorEvent> which has only a getter
    at An._connectionCallback [90m(file:///root/autolytiq-desk-studio/[39mnode_modules/[4m@neondatabase[24m/serverless/index.mjs:1384:72[90m)[39m
    at An._handleErrorWhileConnecting [90m(file:///root/autolytiq-desk-studio/[39mnode_modules/[4m@neondatabase[24m/serverless/index.mjs:1290:38[90m)[39m
    at An._handleErrorEvent [90m(file:///root/autolytiq-desk-studio/[39mnode_modules/[4m@neondatabase[24m/serverless/index.mjs:1291:33[90m)[39m
    at fn.emit [90m(file:///root/autolytiq-desk-studio/[39mnode_modules/[4m@neondatabase[24m/serverless/index.mjs:397:12[90m)[39m
    at v.reportStreamError [90m(file:///root/autolytiq-desk-studio/[39mnode_modules/[4m@neondatabase[24m/serverless/index.mjs:1201:46[90m)[39m
    at v.emit [90m(file:///root/autolytiq-desk-studio/[39mnode_modules/[4m@neondatabase[24m/serverless/index.mjs:397:12[90m)[39m
    at WebSocket.<anonymous> [90m(file:///root/autolytiq-desk-studio/[39mnode_modules/[4m@neondatabase[24m/serverless/index.mjs:986:42[90m)[39m
    at callListener [90m(/root/autolytiq-desk-studio/[39mnode_modules/[4mws[24m/lib/event-target.js:290:14[90m)[39m
    at WebSocket.onError [90m(/root/autolytiq-desk-studio/[39mnode_modules/[4mws[24m/lib/event-target.js:230:9[90m)[39m
[90m    at WebSocket.emit (node:events:524:28)[39m

[90mstdout[2m | server/__tests__/e2e-user-journeys.test.ts[2m > [22m[2mE2E User Journey Tests
[22m[39m[DB Service] Shutting down database service...
[DB Pool] Starting graceful shutdown...
[DB Pool] Final metrics: {
  "totalConnections": 0,
  "idleConnections": 0,
  "activeConnections": 0,
  "waitingClients": 0,
  "totalQueries": 0,
  "slowQueries": 0,
  "failedQueries": 0,
  "avgQueryTime": 0,
  "uptime": 10263
}

[90mstdout[2m | server/__tests__/e2e-user-journeys.test.ts[2m > [22m[2mE2E User Journey Tests
[22m[39m[DB Pool] Pool closed successfully

[90mstdout[2m | server/__tests__/e2e-user-journeys.test.ts[2m > [22m[2mE2E User Journey Tests
[22m[39m[DB Service] Database service shutdown complete

 [2m[90mâ†“[39m[22m server/__tests__/e2e-user-journeys.test.ts[2m > [22mE2E User Journey Tests[2m > [22mJourney 1: Complete Deal Creation Flow[2m > [22mshould complete full deal creation from customer to sold
 [2m[90mâ†“[39m[22m server/__tests__/e2e-user-journeys.test.ts[2m > [22mE2E User Journey Tests[2m > [22mJourney 1: Complete Deal Creation Flow[2m > [22mshould handle deal with trade-in
 [2m[90mâ†“[39m[22m server/__tests__/e2e-user-journeys.test.ts[2m > [22mE2E User Journey Tests[2m > [22mJourney 1: Complete Deal Creation Flow[2m > [22mshould handle lease deal
 [2m[90mâ†“[39m[22m server/__tests__/e2e-user-journeys.test.ts[2m > [22mE2E User Journey Tests[2m > [22mJourney 2: Email Workflow[2m > [22mshould complete email workflow: draft â†’ send â†’ track
 [2m[90mâ†“[39m[22m server/__tests__/e2e-user-journeys.test.ts[2m > [22mE2E User Journey Tests[2m > [22mJourney 2: Email Workflow[2m > [22mshould track drafts vs sent emails
 [2m[90mâ†“[39m[22m server/__tests__/e2e-user-journeys.test.ts[2m > [22mE2E User Journey Tests[2m > [22mJourney 3: Reporting Dashboard[2m > [22mshould generate complete sales dashboard
 [2m[90mâ†“[39m[22m server/__tests__/e2e-user-journeys.test.ts[2m > [22mE2E User Journey Tests[2m > [22mJourney 3: Reporting Dashboard[2m > [22mshould drill down into specific metrics
[90mstdout[2m | server/__tests__/tax-calculation.test.ts
[22m[39m[DB Service] Database service initialized

[90mstdout[2m | server/__tests__/tax-calculation.test.ts
[22m[39m[DB Service] Database service initialized

[90mstdout[2m | server/__tests__/tax-calculation.test.ts[2m > [22m[2mTax Calculation Integration Tests
[22m[39m[Test Setup] Initializing test database...

[90mstderr[2m | server/__tests__/tax-calculation.test.ts[2m > [22m[2mTax Calculation Integration Tests
[22m[39m[DB Service] Uncaught exception: TypeError: Cannot set property message of #<ErrorEvent> which has only a getter
    at An._connectionCallback [90m(file:///root/autolytiq-desk-studio/[39mnode_modules/[4m@neondatabase[24m/serverless/index.mjs:1384:72[90m)[39m
    at An._handleErrorWhileConnecting [90m(file:///root/autolytiq-desk-studio/[39mnode_modules/[4m@neondatabase[24m/serverless/index.mjs:1290:38[90m)[39m
    at An._handleErrorEvent [90m(file:///root/autolytiq-desk-studio/[39mnode_modules/[4m@neondatabase[24m/serverless/index.mjs:1291:33[90m)[39m
    at fn.emit [90m(file:///root/autolytiq-desk-studio/[39mnode_modules/[4m@neondatabase[24m/serverless/index.mjs:397:12[90m)[39m
    at v.reportStreamError [90m(file:///root/autolytiq-desk-studio/[39mnode_modules/[4m@neondatabase[24m/serverless/index.mjs:1201:46[90m)[39m
    at v.emit [90m(file:///root/autolytiq-desk-studio/[39mnode_modules/[4m@neondatabase[24m/serverless/index.mjs:397:12[90m)[39m
    at WebSocket.<anonymous> [90m(file:///root/autolytiq-desk-studio/[39mnode_modules/[4m@neondatabase[24m/serverless/index.mjs:986:42[90m)[39m
    at callListener [90m(/root/autolytiq-desk-studio/[39mnode_modules/[4mws[24m/lib/event-target.js:290:14[90m)[39m
    at WebSocket.onError [90m(/root/autolytiq-desk-studio/[39mnode_modules/[4mws[24m/lib/event-target.js:230:9[90m)[39m
[90m    at WebSocket.emit (node:events:524:28)[39m
[DB Service] Uncaught exception: TypeError: Cannot set property message of #<ErrorEvent> which has only a getter
    at An._connectionCallback [90m(file:///root/autolytiq-desk-studio/[39mnode_modules/[4m@neondatabase[24m/serverless/index.mjs:1384:72[90m)[39m
    at An._handleErrorWhileConnecting [90m(file:///root/autolytiq-desk-studio/[39mnode_modules/[4m@neondatabase[24m/serverless/index.mjs:1290:38[90m)[39m
    at An._handleErrorEvent [90m(file:///root/autolytiq-desk-studio/[39mnode_modules/[4m@neondatabase[24m/serverless/index.mjs:1291:33[90m)[39m
    at fn.emit [90m(file:///root/autolytiq-desk-studio/[39mnode_modules/[4m@neondatabase[24m/serverless/index.mjs:397:12[90m)[39m
    at v.reportStreamError [90m(file:///root/autolytiq-desk-studio/[39mnode_modules/[4m@neondatabase[24m/serverless/index.mjs:1201:46[90m)[39m
    at v.emit [90m(file:///root/autolytiq-desk-studio/[39mnode_modules/[4m@neondatabase[24m/serverless/index.mjs:397:12[90m)[39m
    at WebSocket.<anonymous> [90m(file:///root/autolytiq-desk-studio/[39mnode_modules/[4m@neondatabase[24m/serverless/index.mjs:986:42[90m)[39m
    at callListener [90m(/root/autolytiq-desk-studio/[39mnode_modules/[4mws[24m/lib/event-target.js:290:14[90m)[39m
    at WebSocket.onError [90m(/root/autolytiq-desk-studio/[39mnode_modules/[4mws[24m/lib/event-target.js:230:9[90m)[39m
[90m    at WebSocket.emit (node:events:524:28)[39m

[90mstdout[2m | server/__tests__/tax-calculation.test.ts[2m > [22m[2mTax Calculation Integration Tests
[22m[39m[DB Service] Shutting down database service...
[DB Pool] Starting graceful shutdown...
[DB Pool] Final metrics: {
  "totalConnections": 0,
  "idleConnections": 0,
  "activeConnections": 0,
  "waitingClients": 0,
  "totalQueries": 0,
  "slowQueries": 0,
  "failedQueries": 0,
  "avgQueryTime": 0,
  "uptime": 10482
}
[DB Service] Shutting down database service...
[DB Pool] Starting graceful shutdown...
[DB Pool] Final metrics: {
  "totalConnections": 0,
  "idleConnections": 0,
  "activeConnections": 0,
  "waitingClients": 0,
  "totalQueries": 0,
  "slowQueries": 0,
  "failedQueries": 0,
  "avgQueryTime": 0,
  "uptime": 10072
}

[90mstdout[2m | server/__tests__/tax-calculation.test.ts[2m > [22m[2mTax Calculation Integration Tests
[22m[39m[DB Pool] Pool closed successfully
[DB Pool] Pool closed successfully

[90mstdout[2m | server/__tests__/tax-calculation.test.ts[2m > [22m[2mTax Calculation Integration Tests
[22m[39m[DB Service] Database service shutdown complete
[DB Service] Database service shutdown complete

[90mstdout[2m | server/__tests__/tax-calculation.test.ts[2m > [22m[2mTax Calculation Integration Tests
[22m[39m[Test Cleanup] Cleaning up test data...

[90mstderr[2m | server/__tests__/tax-calculation.test.ts[2m > [22m[2mTax Calculation Integration Tests
[22m[39m[Test Cleanup] Failed to clean test data: Error: Cannot use a pool after calling end on the pool
    at [90mfile:///root/autolytiq-desk-studio/[39mnode_modules/[4m@neondatabase[24m/serverless/index.mjs:1345:74

 [2m[90mâ†“[39m[22m server/__tests__/tax-calculation.test.ts[2m > [22mTax Calculation Integration Tests[2m > [22mState Tax Rules[2m > [22mshould calculate tax for California (STATE_PLUS_LOCAL)
 [2m[90mâ†“[39m[22m server/__tests__/tax-calculation.test.ts[2m > [22mTax Calculation Integration Tests[2m > [22mState Tax Rules[2m > [22mshould calculate tax for Indiana (FLAT_RATE)
 [2m[90mâ†“[39m[22m server/__tests__/tax-calculation.test.ts[2m > [22mTax Calculation Integration Tests[2m > [22mState Tax Rules[2m > [22mshould handle Texas (NO_TAX)
 [2m[90mâ†“[39m[22m server/__tests__/tax-calculation.test.ts[2m > [22mTax Calculation Integration Tests[2m > [22mLocal Tax Rates[2m > [22mshould fetch local tax rate for ZIP code 90210 (Beverly Hills, CA)
 [2m[90mâ†“[39m[22m server/__tests__/tax-calculation.test.ts[2m > [22mTax Calculation Integration Tests[2m > [22mLocal Tax Rates[2m > [22mshould return breakdown for tax jurisdiction
 [2m[90mâ†“[39m[22m server/__tests__/tax-calculation.test.ts[2m > [22mTax Calculation Integration Tests[2m > [22mLocal Tax Rates[2m > [22mshould reject invalid ZIP code format
 [2m[90mâ†“[39m[22m server/__tests__/tax-calculation.test.ts[2m > [22mTax Calculation Integration Tests[2m > [22mLocal Tax Rates[2m > [22mshould handle ZIP+4 format
 [2m[90mâ†“[39m[22m server/__tests__/tax-calculation.test.ts[2m > [22mTax Calculation Integration Tests[2m > [22mTrade-In Tax Credit[2m > [22mshould apply trade-in credit to reduce taxable amount (CA)
 [2m[90mâ†“[39m[22m server/__tests__/tax-calculation.test.ts[2m > [22mTax Calculation Integration Tests[2m > [22mTrade-In Tax Credit[2m > [22mshould handle trade-in with payoff (net trade value)
 [2m[90mâ†“[39m[22m server/__tests__/tax-calculation.test.ts[2m > [22mTax Calculation Integration Tests[2m > [22mTaxable vs Non-Taxable Fees[2m > [22mshould NOT tax doc fees (non-taxable in most states)
 [2m[90mâ†“[39m[22m server/__tests__/tax-calculation.test.ts[2m > [22mTax Calculation Integration Tests[2m > [22mTaxable vs Non-Taxable Fees[2m > [22mshould tax accessories/add-ons (taxable)
 [2m[90mâ†“[39m[22m server/__tests__/tax-calculation.test.ts[2m > [22mTax Calculation Integration Tests[2m > [22mTaxable vs Non-Taxable Fees[2m > [22mshould handle multiple fee types correctly
 [2m[90mâ†“[39m[22m server/__tests__/tax-calculation.test.ts[2m > [22mTax Calculation Integration Tests[2m > [22mLease Tax Calculations[2m > [22mshould calculate tax on lease payments (payment-based states)
 [2m[90mâ†“[39m[22m server/__tests__/tax-calculation.test.ts[2m > [22mTax Calculation Integration Tests[2m > [22mLease Tax Calculations[2m > [22mshould calculate tax on cap cost (upfront tax states)
 [2m[90mâ†“[39m[22m server/__tests__/tax-calculation.test.ts[2m > [22mTax Calculation Integration Tests[2m > [22mCustomer-Based Tax Calculation[2m > [22mshould calculate tax based on customer address
 [2m[90mâ†“[39m[22m server/__tests__/tax-calculation.test.ts[2m > [22mTax Calculation Integration Tests[2m > [22mCustomer-Based Tax Calculation[2m > [22mshould validate customer address for tax calculation
 [2m[90mâ†“[39m[22m server/__tests__/tax-calculation.test.ts[2m > [22mTax Calculation Integration Tests[2m > [22mCustomer-Based Tax Calculation[2m > [22mshould provide tax preview for customer
 [2m[90mâ†“[39m[22m server/__tests__/tax-calculation.test.ts[2m > [22mTax Calculation Integration Tests[2m > [22mEdge Cases[2m > [22mshould handle zero vehicle price
 [2m[90mâ†“[39m[22m server/__tests__/tax-calculation.test.ts[2m > [22mTax Calculation Integration Tests[2m > [22mEdge Cases[2m > [22mshould handle very large vehicle price
 [2m[90mâ†“[39m[22m server/__tests__/tax-calculation.test.ts[2m > [22mTax Calculation Integration Tests[2m > [22mEdge Cases[2m > [22mshould handle missing required fields
 [2m[90mâ†“[39m[22m server/__tests__/tax-calculation.test.ts[2m > [22mTax Calculation Integration Tests[2m > [22mEdge Cases[2m > [22mshould handle invalid state code
 [2m[90mâ†“[39m[22m server/__tests__/tax-calculation.test.ts[2m > [22mTax Calculation Integration Tests[2m > [22mEdge Cases[2m > [22mshould ensure penny-accurate calculations
 [2m[90mâ†“[39m[22m server/__tests__/tax-calculation.test.ts[2m > [22mTax Calculation Integration Tests[2m > [22mAPI Endpoints[2m > [22mshould list all supported states
 [2m[90mâ†“[39m[22m server/__tests__/tax-calculation.test.ts[2m > [22mTax Calculation Integration Tests[2m > [22mAPI Endpoints[2m > [22mshould get state-specific rules
 [2m[90mâ†“[39m[22m server/__tests__/tax-calculation.test.ts[2m > [22mTax Calculation Integration Tests[2m > [22mAPI Endpoints[2m > [22mshould provide API examples
 [2m[90mâ†“[39m[22m server/__tests__/tax-calculation.test.ts[2m > [22mTax Calculation Integration Tests[2m > [22mAPI Endpoints[2m > [22mshould pass health check
[90mstdout[2m | server/__tests__/reporting-analytics.test.ts
[22m[39m[DB Service] Database service initialized

[90mstdout[2m | server/__tests__/reporting-analytics.test.ts[2m > [22m[2mReporting & Analytics Integration Tests
[22m[39m[Test Setup] Initializing test database...

[90mstderr[2m | server/__tests__/reporting-analytics.test.ts[2m > [22m[2mReporting & Analytics Integration Tests
[22m[39m[Test Setup] Failed to initialize test database: ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

[90mstdout[2m | server/__tests__/reporting-analytics.test.ts[2m > [22m[2mReporting & Analytics Integration Tests
[22m[39m[Test Cleanup] Cleaning up test data...

[90mstderr[2m | server/__tests__/reporting-analytics.test.ts[2m > [22m[2mReporting & Analytics Integration Tests
[22m[39m[Test Cleanup] Failed to clean test data: ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

 [2m[90mâ†“[39m[22m server/__tests__/reporting-analytics.test.ts[2m > [22mReporting & Analytics Integration Tests[2m > [22mSales Performance Metrics[2m > [22mshould calculate total sales volume
 [2m[90mâ†“[39m[22m server/__tests__/reporting-analytics.test.ts[2m > [22mReporting & Analytics Integration Tests[2m > [22mSales Performance Metrics[2m > [22mshould calculate average deal value
 [2m[90mâ†“[39m[22m server/__tests__/reporting-analytics.test.ts[2m > [22mReporting & Analytics Integration Tests[2m > [22mSales Performance Metrics[2m > [22mshould calculate total revenue
 [2m[90mâ†“[39m[22m server/__tests__/reporting-analytics.test.ts[2m > [22mReporting & Analytics Integration Tests[2m > [22mSales Performance Metrics[2m > [22mshould break down sales by deal state
 [2m[90mâ†“[39m[22m server/__tests__/reporting-analytics.test.ts[2m > [22mReporting & Analytics Integration Tests[2m > [22mSales Performance Metrics[2m > [22mshould track sales by salesperson
 [2m[90mâ†“[39m[22m server/__tests__/reporting-analytics.test.ts[2m > [22mReporting & Analytics Integration Tests[2m > [22mInventory Analytics[2m > [22mshould count total inventory
 [2m[90mâ†“[39m[22m server/__tests__/reporting-analytics.test.ts[2m > [22mReporting & Analytics Integration Tests[2m > [22mInventory Analytics[2m > [22mshould count available inventory only
 [2m[90mâ†“[39m[22m server/__tests__/reporting-analytics.test.ts[2m > [22mReporting & Analytics Integration Tests[2m > [22mInventory Analytics[2m > [22mshould calculate average inventory value
 [2m[90mâ†“[39m[22m server/__tests__/reporting-analytics.test.ts[2m > [22mReporting & Analytics Integration Tests[2m > [22mInventory Analytics[2m > [22mshould break down inventory by condition (new/used)
 [2m[90mâ†“[39m[22m server/__tests__/reporting-analytics.test.ts[2m > [22mReporting & Analytics Integration Tests[2m > [22mInventory Analytics[2m > [22mshould identify aging inventory (days in stock)
 [2m[90mâ†“[39m[22m server/__tests__/reporting-analytics.test.ts[2m > [22mReporting & Analytics Integration Tests[2m > [22mCustomer Insights[2m > [22mshould count total customers
 [2m[90mâ†“[39m[22m server/__tests__/reporting-analytics.test.ts[2m > [22mReporting & Analytics Integration Tests[2m > [22mCustomer Insights[2m > [22mshould identify customers with multiple deals
 [2m[90mâ†“[39m[22m server/__tests__/reporting-analytics.test.ts[2m > [22mReporting & Analytics Integration Tests[2m > [22mCustomer Insights[2m > [22mshould break down customers by state
 [2m[90mâ†“[39m[22m server/__tests__/reporting-analytics.test.ts[2m > [22mReporting & Analytics Integration Tests[2m > [22mCustomer Insights[2m > [22mshould calculate customer lifetime value
 [2m[90mâ†“[39m[22m server/__tests__/reporting-analytics.test.ts[2m > [22mReporting & Analytics Integration Tests[2m > [22mTime-Based Analytics[2m > [22mshould calculate deals by month
 [2m[90mâ†“[39m[22m server/__tests__/reporting-analytics.test.ts[2m > [22mReporting & Analytics Integration Tests[2m > [22mTime-Based Analytics[2m > [22mshould filter deals by date range
 [2m[90mâ†“[39m[22m server/__tests__/reporting-analytics.test.ts[2m > [22mReporting & Analytics Integration Tests[2m > [22mTime-Based Analytics[2m > [22mshould calculate sales velocity (deals per day)
 [2m[90mâ†“[39m[22m server/__tests__/reporting-analytics.test.ts[2m > [22mReporting & Analytics Integration Tests[2m > [22mDeal Pipeline Metrics[2m > [22mshould show pipeline stages distribution
 [2m[90mâ†“[39m[22m server/__tests__/reporting-analytics.test.ts[2m > [22mReporting & Analytics Integration Tests[2m > [22mDeal Pipeline Metrics[2m > [22mshould calculate conversion rate (sold / total)
 [2m[90mâ†“[39m[22m server/__tests__/reporting-analytics.test.ts[2m > [22mReporting & Analytics Integration Tests[2m > [22mDeal Pipeline Metrics[2m > [22mshould identify stale deals (pending > 30 days)
[90mstdout[2m | server/__tests__/vehicle-inventory.test.ts
[22m[39m[DB Service] Database service initialized

[90mstdout[2m | server/__tests__/vehicle-inventory.test.ts[2m > [22m[2mVehicle Inventory Integration Tests
[22m[39m[Test Setup] Initializing test database...

[90mstderr[2m | server/__tests__/vehicle-inventory.test.ts[2m > [22m[2mVehicle Inventory Integration Tests
[22m[39m[Test Setup] Failed to initialize test database: ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

[90mstdout[2m | server/__tests__/vehicle-inventory.test.ts[2m > [22m[2mVehicle Inventory Integration Tests
[22m[39m[Test Cleanup] Cleaning up test data...

[90mstderr[2m | server/__tests__/vehicle-inventory.test.ts[2m > [22m[2mVehicle Inventory Integration Tests
[22m[39m[Test Cleanup] Failed to clean test data: ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

 [2m[90mâ†“[39m[22m server/__tests__/vehicle-inventory.test.ts[2m > [22mVehicle Inventory Integration Tests[2m > [22mAdd Vehicle to Inventory[2m > [22mshould add new vehicle with complete information
 [2m[90mâ†“[39m[22m server/__tests__/vehicle-inventory.test.ts[2m > [22mVehicle Inventory Integration Tests[2m > [22mAdd Vehicle to Inventory[2m > [22mshould validate VIN format
 [2m[90mâ†“[39m[22m server/__tests__/vehicle-inventory.test.ts[2m > [22mVehicle Inventory Integration Tests[2m > [22mAdd Vehicle to Inventory[2m > [22mshould auto-generate stock number if not provided
 [2m[90mâ†“[39m[22m server/__tests__/vehicle-inventory.test.ts[2m > [22mVehicle Inventory Integration Tests[2m > [22mAdd Vehicle to Inventory[2m > [22mshould set default status to available for new vehicles
 [2m[90mâ†“[39m[22m server/__tests__/vehicle-inventory.test.ts[2m > [22mVehicle Inventory Integration Tests[2m > [22mAdd Vehicle to Inventory[2m > [22mshould store pricing information with decimal precision
 [2m[90mâ†“[39m[22m server/__tests__/vehicle-inventory.test.ts[2m > [22mVehicle Inventory Integration Tests[2m > [22mVehicle Status Lifecycle[2m > [22mshould transition vehicle from available to in-deal
 [2m[90mâ†“[39m[22m server/__tests__/vehicle-inventory.test.ts[2m > [22mVehicle Inventory Integration Tests[2m > [22mVehicle Status Lifecycle[2m > [22mshould transition vehicle from in-deal to sold
 [2m[90mâ†“[39m[22m server/__tests__/vehicle-inventory.test.ts[2m > [22mVehicle Inventory Integration Tests[2m > [22mVehicle Status Lifecycle[2m > [22mshould return vehicle to available if deal falls through
 [2m[90mâ†“[39m[22m server/__tests__/vehicle-inventory.test.ts[2m > [22mVehicle Inventory Integration Tests[2m > [22mVehicle Status Lifecycle[2m > [22mshould check vehicle availability before creating deal
 [2m[90mâ†“[39m[22m server/__tests__/vehicle-inventory.test.ts[2m > [22mVehicle Inventory Integration Tests[2m > [22mSearch and Filter Vehicles[2m > [22mshould filter vehicles by status (available only)
 [2m[90mâ†“[39m[22m server/__tests__/vehicle-inventory.test.ts[2m > [22mVehicle Inventory Integration Tests[2m > [22mSearch and Filter Vehicles[2m > [22mshould filter vehicles by condition (new/used)
 [2m[90mâ†“[39m[22m server/__tests__/vehicle-inventory.test.ts[2m > [22mVehicle Inventory Integration Tests[2m > [22mSearch and Filter Vehicles[2m > [22mshould search vehicles by make
 [2m[90mâ†“[39m[22m server/__tests__/vehicle-inventory.test.ts[2m > [22mVehicle Inventory Integration Tests[2m > [22mSearch and Filter Vehicles[2m > [22mshould filter vehicles by price range
 [2m[90mâ†“[39m[22m server/__tests__/vehicle-inventory.test.ts[2m > [22mVehicle Inventory Integration Tests[2m > [22mSearch and Filter Vehicles[2m > [22mshould filter vehicles by year range
 [2m[90mâ†“[39m[22m server/__tests__/vehicle-inventory.test.ts[2m > [22mVehicle Inventory Integration Tests[2m > [22mSearch and Filter Vehicles[2m > [22mshould search by partial match (make OR model)
 [2m[90mâ†“[39m[22m server/__tests__/vehicle-inventory.test.ts[2m > [22mVehicle Inventory Integration Tests[2m > [22mSearch and Filter Vehicles[2m > [22mshould sort vehicles by price (low to high)
 [2m[90mâ†“[39m[22m server/__tests__/vehicle-inventory.test.ts[2m > [22mVehicle Inventory Integration Tests[2m > [22mSearch and Filter Vehicles[2m > [22mshould sort vehicles by newest first
 [2m[90mâ†“[39m[22m server/__tests__/vehicle-inventory.test.ts[2m > [22mVehicle Inventory Integration Tests[2m > [22mUpdate Vehicle[2m > [22mshould update vehicle price
 [2m[90mâ†“[39m[22m server/__tests__/vehicle-inventory.test.ts[2m > [22mVehicle Inventory Integration Tests[2m > [22mUpdate Vehicle[2m > [22mshould update vehicle mileage
 [2m[90mâ†“[39m[22m server/__tests__/vehicle-inventory.test.ts[2m > [22mVehicle Inventory Integration Tests[2m > [22mUpdate Vehicle[2m > [22mshould update vehicle description
 [2m[90mâ†“[39m[22m server/__tests__/vehicle-inventory.test.ts[2m > [22mVehicle Inventory Integration Tests[2m > [22mMulti-Tenant Isolation[2m > [22mshould only fetch vehicles for correct dealership
 [2m[90mâ†“[39m[22m server/__tests__/vehicle-inventory.test.ts[2m > [22mVehicle Inventory Integration Tests[2m > [22mMulti-Tenant Isolation[2m > [22mshould enforce dealership boundary on all queries
 [2m[90mâ†“[39m[22m server/__tests__/vehicle-inventory.test.ts[2m > [22mVehicle Inventory Integration Tests[2m > [22mEdge Cases[2m > [22mshould handle zero mileage (new vehicle)
 [2m[90mâ†“[39m[22m server/__tests__/vehicle-inventory.test.ts[2m > [22mVehicle Inventory Integration Tests[2m > [22mEdge Cases[2m > [22mshould handle very high mileage (200k+)
 [2m[90mâ†“[39m[22m server/__tests__/vehicle-inventory.test.ts[2m > [22mVehicle Inventory Integration Tests[2m > [22mEdge Cases[2m > [22mshould handle special characters in description
 [2m[90mâ†“[39m[22m server/__tests__/vehicle-inventory.test.ts[2m > [22mVehicle Inventory Integration Tests[2m > [22mEdge Cases[2m > [22mshould handle concurrent vehicle creation
 [2m[90mâ†“[39m[22m server/__tests__/vehicle-inventory.test.ts[2m > [22mVehicle Inventory Integration Tests[2m > [22mEdge Cases[2m > [22mshould handle null optional fields
[90mstdout[2m | server/__tests__/customer-crud.test.ts
[22m[39m[DB Service] Database service initialized

[90mstdout[2m | server/__tests__/customer-crud.test.ts[2m > [22m[2mCustomer CRUD Integration Tests
[22m[39m[Test Setup] Initializing test database...

[90mstderr[2m | server/__tests__/customer-crud.test.ts[2m > [22m[2mCustomer CRUD Integration Tests
[22m[39m[Test Setup] Failed to initialize test database: ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

[90mstdout[2m | server/__tests__/customer-crud.test.ts[2m > [22m[2mCustomer CRUD Integration Tests
[22m[39m[Test Cleanup] Cleaning up test data...

[90mstderr[2m | server/__tests__/customer-crud.test.ts[2m > [22m[2mCustomer CRUD Integration Tests
[22m[39m[Test Cleanup] Failed to clean test data: ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

 [2m[90mâ†“[39m[22m server/__tests__/customer-crud.test.ts[2m > [22mCustomer CRUD Integration Tests[2m > [22mCreate Customer[2m > [22mshould create customer with full information
 [2m[90mâ†“[39m[22m server/__tests__/customer-crud.test.ts[2m > [22mCustomer CRUD Integration Tests[2m > [22mCreate Customer[2m > [22mshould create customer with minimal required fields
 [2m[90mâ†“[39m[22m server/__tests__/customer-crud.test.ts[2m > [22mCustomer CRUD Integration Tests[2m > [22mCreate Customer[2m > [22mshould auto-generate unique customer number
 [2m[90mâ†“[39m[22m server/__tests__/customer-crud.test.ts[2m > [22mCustomer CRUD Integration Tests[2m > [22mCreate Customer[2m > [22mshould validate email format
 [2m[90mâ†“[39m[22m server/__tests__/customer-crud.test.ts[2m > [22mCustomer CRUD Integration Tests[2m > [22mCreate Customer[2m > [22mshould enforce multi-tenant isolation on creation
 [2m[90mâ†“[39m[22m server/__tests__/customer-crud.test.ts[2m > [22mCustomer CRUD Integration Tests[2m > [22mRead Customer[2m > [22mshould fetch customer by ID
 [2m[90mâ†“[39m[22m server/__tests__/customer-crud.test.ts[2m > [22mCustomer CRUD Integration Tests[2m > [22mRead Customer[2m > [22mshould fetch customer by email
 [2m[90mâ†“[39m[22m server/__tests__/customer-crud.test.ts[2m > [22mCustomer CRUD Integration Tests[2m > [22mRead Customer[2m > [22mshould list all customers for dealership
 [2m[90mâ†“[39m[22m server/__tests__/customer-crud.test.ts[2m > [22mCustomer CRUD Integration Tests[2m > [22mRead Customer[2m > [22mshould search customers by name (partial match)
 [2m[90mâ†“[39m[22m server/__tests__/customer-crud.test.ts[2m > [22mCustomer CRUD Integration Tests[2m > [22mRead Customer[2m > [22mshould filter customers by state
 [2m[90mâ†“[39m[22m server/__tests__/customer-crud.test.ts[2m > [22mCustomer CRUD Integration Tests[2m > [22mUpdate Customer[2m > [22mshould update customer contact information
 [2m[90mâ†“[39m[22m server/__tests__/customer-crud.test.ts[2m > [22mCustomer CRUD Integration Tests[2m > [22mUpdate Customer[2m > [22mshould update customer address
 [2m[90mâ†“[39m[22m server/__tests__/customer-crud.test.ts[2m > [22mCustomer CRUD Integration Tests[2m > [22mUpdate Customer[2m > [22mshould update only specified fields
 [2m[90mâ†“[39m[22m server/__tests__/customer-crud.test.ts[2m > [22mCustomer CRUD Integration Tests[2m > [22mUpdate Customer[2m > [22mshould track update timestamp
 [2m[90mâ†“[39m[22m server/__tests__/customer-crud.test.ts[2m > [22mCustomer CRUD Integration Tests[2m > [22mDelete Customer[2m > [22mshould delete customer by ID
 [2m[90mâ†“[39m[22m server/__tests__/customer-crud.test.ts[2m > [22mCustomer CRUD Integration Tests[2m > [22mDelete Customer[2m > [22mshould soft-delete by setting inactive flag
 [2m[90mâ†“[39m[22m server/__tests__/customer-crud.test.ts[2m > [22mCustomer CRUD Integration Tests[2m > [22mDelete Customer[2m > [22mshould handle cascade delete constraints with deals
 [2m[90mâ†“[39m[22m server/__tests__/customer-crud.test.ts[2m > [22mCustomer CRUD Integration Tests[2m > [22mMulti-Tenant Isolation[2m > [22mshould only fetch customers for correct dealership
 [2m[90mâ†“[39m[22m server/__tests__/customer-crud.test.ts[2m > [22mCustomer CRUD Integration Tests[2m > [22mMulti-Tenant Isolation[2m > [22mshould enforce dealership ID on all operations
 [2m[90mâ†“[39m[22m server/__tests__/customer-crud.test.ts[2m > [22mCustomer CRUD Integration Tests[2m > [22mEdge Cases[2m > [22mshould handle very long names
 [2m[90mâ†“[39m[22m server/__tests__/customer-crud.test.ts[2m > [22mCustomer CRUD Integration Tests[2m > [22mEdge Cases[2m > [22mshould handle special characters in names
 [2m[90mâ†“[39m[22m server/__tests__/customer-crud.test.ts[2m > [22mCustomer CRUD Integration Tests[2m > [22mEdge Cases[2m > [22mshould handle null/empty optional fields
 [2m[90mâ†“[39m[22m server/__tests__/customer-crud.test.ts[2m > [22mCustomer CRUD Integration Tests[2m > [22mEdge Cases[2m > [22mshould handle concurrent customer creation
[90mstdout[2m | server/__tests__/deal-creation.test.ts
[22m[39m[DB Service] Database service initialized

[90mstdout[2m | server/__tests__/deal-creation.test.ts[2m > [22m[2mDeal Creation Integration Tests
[22m[39m[Test Setup] Initializing test database...

[90mstderr[2m | server/__tests__/deal-creation.test.ts[2m > [22m[2mDeal Creation Integration Tests
[22m[39m[Test Setup] Failed to initialize test database: ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

[90mstdout[2m | server/__tests__/deal-creation.test.ts[2m > [22m[2mDeal Creation Integration Tests
[22m[39m[Test Cleanup] Cleaning up test data...

[90mstderr[2m | server/__tests__/deal-creation.test.ts[2m > [22m[2mDeal Creation Integration Tests
[22m[39m[Test Cleanup] Failed to clean test data: ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

 [2m[90mâ†“[39m[22m server/__tests__/deal-creation.test.ts[2m > [22mDeal Creation Integration Tests[2m > [22mHappy Path: Successful Deal Creation[2m > [22mshould create deal with existing customer and vehicle
 [2m[90mâ†“[39m[22m server/__tests__/deal-creation.test.ts[2m > [22mDeal Creation Integration Tests[2m > [22mHappy Path: Successful Deal Creation[2m > [22mshould create deal with minimal data (draft)
 [2m[90mâ†“[39m[22m server/__tests__/deal-creation.test.ts[2m > [22mDeal Creation Integration Tests[2m > [22mHappy Path: Successful Deal Creation[2m > [22mshould generate unique deal numbers sequentially
 [2m[90mâ†“[39m[22m server/__tests__/deal-creation.test.ts[2m > [22mDeal Creation Integration Tests[2m > [22mHappy Path: Successful Deal Creation[2m > [22mshould mark vehicle as "in-deal" when attached to deal
 [2m[90mâ†“[39m[22m server/__tests__/deal-creation.test.ts[2m > [22mDeal Creation Integration Tests[2m > [22mHappy Path: Successful Deal Creation[2m > [22mshould create scenario with default values
 [2m[90mâ†“[39m[22m server/__tests__/deal-creation.test.ts[2m > [22mDeal Creation Integration Tests[2m > [22mValidation: Invalid Inputs[2m > [22mshould reject deal with invalid dealership ID
 [2m[90mâ†“[39m[22m server/__tests__/deal-creation.test.ts[2m > [22mDeal Creation Integration Tests[2m > [22mValidation: Invalid Inputs[2m > [22mshould reject deal with non-existent customer
 [2m[90mâ†“[39m[22m server/__tests__/deal-creation.test.ts[2m > [22mDeal Creation Integration Tests[2m > [22mValidation: Invalid Inputs[2m > [22mshould reject deal with non-existent vehicle
 [2m[90mâ†“[39m[22m server/__tests__/deal-creation.test.ts[2m > [22mDeal Creation Integration Tests[2m > [22mValidation: Invalid Inputs[2m > [22mshould reject deal with unavailable vehicle
 [2m[90mâ†“[39m[22m server/__tests__/deal-creation.test.ts[2m > [22mDeal Creation Integration Tests[2m > [22mValidation: Invalid Inputs[2m > [22mshould reject deal with customer from different dealership
 [2m[90mâ†“[39m[22m server/__tests__/deal-creation.test.ts[2m > [22mDeal Creation Integration Tests[2m > [22mAtomicity: All-or-Nothing Creation[2m > [22mshould rollback entire transaction if scenario creation fails
 [2m[90mâ†“[39m[22m server/__tests__/deal-creation.test.ts[2m > [22mDeal Creation Integration Tests[2m > [22mAtomicity: All-or-Nothing Creation[2m > [22mshould not create deal if vehicle status update fails
 [2m[90mâ†“[39m[22m server/__tests__/deal-creation.test.ts[2m > [22mDeal Creation Integration Tests[2m > [22mAssociations: Deal Relationships[2m > [22mshould correctly link deal to customer, vehicle, and scenario
 [2m[90mâ†“[39m[22m server/__tests__/deal-creation.test.ts[2m > [22mDeal Creation Integration Tests[2m > [22mAssociations: Deal Relationships[2m > [22mshould allow multiple scenarios per deal
 [2m[90mâ†“[39m[22m server/__tests__/deal-creation.test.ts[2m > [22mDeal Creation Integration Tests[2m > [22mConcurrency: Parallel Deal Creation[2m > [22mshould handle concurrent deal creation without conflicts
 [2m[90mâ†“[39m[22m server/__tests__/deal-creation.test.ts[2m > [22mDeal Creation Integration Tests[2m > [22mData Integrity: Referential Constraints[2m > [22mshould cascade delete scenarios when deal is deleted
 [2m[90mâ†“[39m[22m server/__tests__/deal-creation.test.ts[2m > [22mDeal Creation Integration Tests[2m > [22mData Integrity: Referential Constraints[2m > [22mshould preserve customer when deal is deleted
 [2m[90mâ†“[39m[22m server/__tests__/deal-creation.test.ts[2m > [22mDeal Creation Integration Tests[2m > [22mData Integrity: Referential Constraints[2m > [22mshould preserve vehicle when deal is deleted
[90mstdout[2m | server/__tests__/email-operations.test.ts
[22m[39m[DB Service] Database service initialized

[90mstdout[2m | server/__tests__/email-operations.test.ts[2m > [22m[2mEmail Operations Integration Tests
[22m[39m[Test Setup] Initializing test database...

[90mstderr[2m | server/__tests__/email-operations.test.ts[2m > [22m[2mEmail Operations Integration Tests
[22m[39m[Test Setup] Failed to initialize test database: ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

[90mstdout[2m | server/__tests__/email-operations.test.ts[2m > [22m[2mEmail Operations Integration Tests
[22m[39m[Test Cleanup] Cleaning up test data...

[90mstderr[2m | server/__tests__/email-operations.test.ts[2m > [22m[2mEmail Operations Integration Tests
[22m[39m[Test Cleanup] Failed to clean test data: ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

 [2m[90mâ†“[39m[22m server/__tests__/email-operations.test.ts[2m > [22mEmail Operations Integration Tests[2m > [22mDraft Email Operations[2m > [22mshould save draft email to database
 [2m[90mâ†“[39m[22m server/__tests__/email-operations.test.ts[2m > [22mEmail Operations Integration Tests[2m > [22mDraft Email Operations[2m > [22mshould update draft email
 [2m[90mâ†“[39m[22m server/__tests__/email-operations.test.ts[2m > [22mEmail Operations Integration Tests[2m > [22mDraft Email Operations[2m > [22mshould delete draft email
 [2m[90mâ†“[39m[22m server/__tests__/email-operations.test.ts[2m > [22mEmail Operations Integration Tests[2m > [22mDraft Email Operations[2m > [22mshould list all drafts for user
 [2m[90mâ†“[39m[22m server/__tests__/email-operations.test.ts[2m > [22mEmail Operations Integration Tests[2m > [22mSend Email Operations[2m > [22mshould mark email as sent after successful send
 [2m[90mâ†“[39m[22m server/__tests__/email-operations.test.ts[2m > [22mEmail Operations Integration Tests[2m > [22mSend Email Operations[2m > [22mshould handle send failures gracefully
 [2m[90mâ†“[39m[22m server/__tests__/email-operations.test.ts[2m > [22mEmail Operations Integration Tests[2m > [22mSend Email Operations[2m > [22mshould track email send history
 [2m[90mâ†“[39m[22m server/__tests__/email-operations.test.ts[2m > [22mEmail Operations Integration Tests[2m > [22mEmail Thread Operations[2m > [22mshould load email thread in chronological order
 [2m[90mâ†“[39m[22m server/__tests__/email-operations.test.ts[2m > [22mEmail Operations Integration Tests[2m > [22mEmail Thread Operations[2m > [22mshould group emails by customer
 [2m[90mâ†“[39m[22m server/__tests__/email-operations.test.ts[2m > [22mEmail Operations Integration Tests[2m > [22mEmail Validation[2m > [22mshould validate email address format
 [2m[90mâ†“[39m[22m server/__tests__/email-operations.test.ts[2m > [22mEmail Operations Integration Tests[2m > [22mEmail Validation[2m > [22mshould reject invalid email addresses
 [2m[90mâ†“[39m[22m server/__tests__/email-operations.test.ts[2m > [22mEmail Operations Integration Tests[2m > [22mEmail Validation[2m > [22mshould require subject for outbound emails
 [2m[90mâ†“[39m[22m server/__tests__/email-operations.test.ts[2m > [22mEmail Operations Integration Tests[2m > [22mEmail Validation[2m > [22mshould handle HTML vs plain text body
 [2m[90mâ†“[39m[22m server/__tests__/email-operations.test.ts[2m > [22mEmail Operations Integration Tests[2m > [22mMulti-Tenant Isolation[2m > [22mshould only show emails for correct dealership
[90mstdout[2m | server/__tests__/auth-permissions.test.ts
[22m[39m[DB Service] Database service initialized

[90mstdout[2m | server/__tests__/auth-permissions.test.ts[2m > [22m[2mAuth & Permissions Integration Tests
[22m[39m[Test Setup] Initializing test database...

[90mstderr[2m | server/__tests__/auth-permissions.test.ts[2m > [22m[2mAuth & Permissions Integration Tests
[22m[39m[Test Setup] Failed to initialize test database: ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

 [2m[90mâ†“[39m[22m server/__tests__/auth-permissions.test.ts[2m > [22mAuth & Permissions Integration Tests[2m > [22mUser Authentication[2m > [22mshould hash password on user creation
 [2m[90mâ†“[39m[22m server/__tests__/auth-permissions.test.ts[2m > [22mAuth & Permissions Integration Tests[2m > [22mUser Authentication[2m > [22mshould reject incorrect password
 [2m[90mâ†“[39m[22m server/__tests__/auth-permissions.test.ts[2m > [22mAuth & Permissions Integration Tests[2m > [22mUser Authentication[2m > [22mshould find user by username
 [2m[90mâ†“[39m[22m server/__tests__/auth-permissions.test.ts[2m > [22mAuth & Permissions Integration Tests[2m > [22mUser Authentication[2m > [22mshould check if user is active before login
 [2m[90mâ†“[39m[22m server/__tests__/auth-permissions.test.ts[2m > [22mAuth & Permissions Integration Tests[2m > [22mUser Authentication[2m > [22mshould enforce unique username constraint
 [2m[90mâ†“[39m[22m server/__tests__/auth-permissions.test.ts[2m > [22mAuth & Permissions Integration Tests[2m > [22mRole-Based Access Control[2m > [22mshould assign role to user
 [2m[90mâ†“[39m[22m server/__tests__/auth-permissions.test.ts[2m > [22mAuth & Permissions Integration Tests[2m > [22mRole-Based Access Control[2m > [22mshould enforce salesperson can only view own deals
 [2m[90mâ†“[39m[22m server/__tests__/auth-permissions.test.ts[2m > [22mAuth & Permissions Integration Tests[2m > [22mRole-Based Access Control[2m > [22mshould allow manager to view all deals
 [2m[90mâ†“[39m[22m server/__tests__/auth-permissions.test.ts[2m > [22mAuth & Permissions Integration Tests[2m > [22mRole-Based Access Control[2m > [22mshould check role before allowing admin operations
 [2m[90mâ†“[39m[22m server/__tests__/auth-permissions.test.ts[2m > [22mAuth & Permissions Integration Tests[2m > [22mMulti-Tenant Isolation Enforcement[2m > [22mshould enforce users belong to dealership
 [2m[90mâ†“[39m[22m server/__tests__/auth-permissions.test.ts[2m > [22mAuth & Permissions Integration Tests[2m > [22mMulti-Tenant Isolation Enforcement[2m > [22mshould only fetch users from same dealership
 [2m[90mâ†“[39m[22m server/__tests__/auth-permissions.test.ts[2m > [22mAuth & Permissions Integration Tests[2m > [22mMulti-Tenant Isolation Enforcement[2m > [22mshould prevent cross-dealership deal access
 [2m[90mâ†“[39m[22m server/__tests__/auth-permissions.test.ts[2m > [22mAuth & Permissions Integration Tests[2m > [22mMulti-Tenant Isolation Enforcement[2m > [22mshould validate user belongs to dealership before operations
 [2m[90mâ†“[39m[22m server/__tests__/auth-permissions.test.ts[2m > [22mAuth & Permissions Integration Tests[2m > [22mSession Management[2m > [22mshould track last login timestamp
 [2m[90mâ†“[39m[22m server/__tests__/auth-permissions.test.ts[2m > [22mAuth & Permissions Integration Tests[2m > [22mSession Management[2m > [22mshould allow user to update their password
 [2m[90mâ†“[39m[22m server/__tests__/auth-permissions.test.ts[2m > [22mAuth & Permissions Integration Tests[2m > [22mSession Management[2m > [22mshould deactivate user account
 [2m[90mâ†“[39m[22m server/__tests__/auth-permissions.test.ts[2m > [22mAuth & Permissions Integration Tests[2m > [22mPermission Checks[2m > [22mshould check if user can create deal
 [2m[90mâ†“[39m[22m server/__tests__/auth-permissions.test.ts[2m > [22mAuth & Permissions Integration Tests[2m > [22mPermission Checks[2m > [22mshould check if user can delete deal
 [2m[90mâ†“[39m[22m server/__tests__/auth-permissions.test.ts[2m > [22mAuth & Permissions Integration Tests[2m > [22mPermission Checks[2m > [22mshould check if user can access reports
 [2m[90mâ†“[39m[22m server/__tests__/auth-permissions.test.ts[2m > [22mAuth & Permissions Integration Tests[2m > [22mPermission Checks[2m > [22mshould check if user can manage inventory
[90mstdout[2m | server/__tests__/auth.security.test.ts
[22m[39m[DB Service] Database service initialized

[90mstderr[2m | server/__tests__/auth.security.test.ts
[22m[39m[Storage] Redis not available - using memory session store

[90mstdout[2m | server/__tests__/auth.security.test.ts
[22m[39m[Redis] Connected to redis-18908.crce197.us-east-2-1.ec2.cloud.redislabs.com

[90mstdout[2m | server/__tests__/auth.security.test.ts
[22m[39m[Redis] Ready to accept commands

[90mstderr[2m | server/__tests__/auth.security.test.ts
[22m[39m[Redis] FATAL: Failed to connect to Redis: SimpleError: NOAUTH Authentication required
    at Decoder.#decodeSimpleError [90m(/root/autolytiq-desk-studio/[39mnode_modules/[4m@redis[24m/client/dist/lib/RESP/decoder.js:457:13[90m)[39m
    at Decoder.#decodeTypeValue [90m(/root/autolytiq-desk-studio/[39mnode_modules/[4m@redis[24m/client/dist/lib/RESP/decoder.js:104:91[90m)[39m
    at Decoder.write [90m(/root/autolytiq-desk-studio/[39mnode_modules/[4m@redis[24m/client/dist/lib/RESP/decoder.js:74:38[90m)[39m
    at RedisSocket.<anonymous> [90m(/root/autolytiq-desk-studio/[39mnode_modules/[4m@redis[24m/client/dist/lib/client/index.js:437:37[90m)[39m
[90m    at RedisSocket.emit (node:events:524:28)[39m
    at Socket.<anonymous> [90m(/root/autolytiq-desk-studio/[39mnode_modules/[4m@redis[24m/client/dist/lib/client/socket.js:225:38[90m)[39m
[90m    at Socket.emit (node:events:524:28)[39m
[90m    at addChunk (node:internal/streams/readable:561:12)[39m
[90m    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)[39m
[90m    at Socket.Readable.push (node:internal/streams/readable:392:5)[39m
[Redis] Sessions will NOT work. Please check Redis credentials and TLS settings.

[90mstdout[2m | server/__tests__/auth.security.test.ts
[22m[39m[EmailQueue] Starting queue processor

[90mstdout[2m | server/__tests__/auth.security.test.ts[2m > [22m[2mAuthentication Security
[22m[39mðŸ”’ Initializing security middleware...
âœ… Security headers configured (helmet)
âœ… Security middleware initialized

Sun, 23 Nov 2025 17:06:49 GMT express-session deprecated req.secret; provide secret option at server/auth.ts:56:44
 [2m[90mâ†“[39m[22m server/__tests__/auth.security.test.ts[2m > [22mAuthentication Security[2m > [22mPassword Security[2m > [22mshould reject weak passwords (too short)
 [2m[90mâ†“[39m[22m server/__tests__/auth.security.test.ts[2m > [22mAuthentication Security[2m > [22mPassword Security[2m > [22mshould reject passwords without uppercase
 [2m[90mâ†“[39m[22m server/__tests__/auth.security.test.ts[2m > [22mAuthentication Security[2m > [22mPassword Security[2m > [22mshould reject passwords without lowercase
 [2m[90mâ†“[39m[22m server/__tests__/auth.security.test.ts[2m > [22mAuthentication Security[2m > [22mPassword Security[2m > [22mshould reject passwords without numbers
 [2m[90mâ†“[39m[22m server/__tests__/auth.security.test.ts[2m > [22mAuthentication Security[2m > [22mPassword Security[2m > [22mshould accept strong passwords
 [2m[90mâ†“[39m[22m server/__tests__/auth.security.test.ts[2m > [22mAuthentication Security[2m > [22mPassword Security[2m > [22mshould never return passwords in API responses
 [2m[90mâ†“[39m[22m server/__tests__/auth.security.test.ts[2m > [22mAuthentication Security[2m > [22mAccount Lockout[2m > [22mshould lock account after 5 failed login attempts
 [2m[90mâ†“[39m[22m server/__tests__/auth.security.test.ts[2m > [22mAuthentication Security[2m > [22mAccount Lockout[2m > [22mshould reset failed attempts on successful login
 [2m[90mâ†“[39m[22m server/__tests__/auth.security.test.ts[2m > [22mAuthentication Security[2m > [22mAuthentication Endpoints[2m > [22mshould reject login with invalid credentials
 [2m[90mâ†“[39m[22m server/__tests__/auth.security.test.ts[2m > [22mAuthentication Security[2m > [22mAuthentication Endpoints[2m > [22mshould reject requests with missing credentials
 [2m[90mâ†“[39m[22m server/__tests__/auth.security.test.ts[2m > [22mAuthentication Security[2m > [22mAuthentication Endpoints[2m > [22mshould create secure session on successful login
 [2m[90mâ†“[39m[22m server/__tests__/auth.security.test.ts[2m > [22mAuthentication Security[2m > [22mAuthentication Endpoints[2m > [22mshould destroy session on logout
 [2m[90mâ†“[39m[22m server/__tests__/auth.security.test.ts[2m > [22mAuthentication Security[2m > [22mRBAC Enforcement[2m > [22mshould deny access to admin endpoints for non-admin users
 [2m[90mâ†“[39m[22m server/__tests__/auth.security.test.ts[2m > [22mAuthentication Security[2m > [22mRBAC Enforcement[2m > [22mshould allow admin users to access admin endpoints
 [2m[90mâ†“[39m[22m server/__tests__/auth.security.test.ts[2m > [22mAuthentication Security[2m > [22mRBAC Enforcement[2m > [22mshould enforce multi-tenant isolation
 [2m[90mâ†“[39m[22m server/__tests__/auth.security.test.ts[2m > [22mAuthentication Security[2m > [22mPassword Reset Security[2m > [22mshould not reveal if email exists (prevent enumeration)
 [2m[90mâ†“[39m[22m server/__tests__/auth.security.test.ts[2m > [22mAuthentication Security[2m > [22mPassword Reset Security[2m > [22mshould reject expired reset tokens
 [2m[90mâ†“[39m[22m server/__tests__/auth.security.test.ts[2m > [22mAuthentication Security[2m > [22mPassword Reset Security[2m > [22mshould reject invalid reset tokens
 [2m[90mâ†“[39m[22m server/__tests__/auth.security.test.ts[2m > [22mAuthentication Security[2m > [22m2FA Security[2m > [22mshould require authentication for 2FA setup
 [2m[90mâ†“[39m[22m server/__tests__/auth.security.test.ts[2m > [22mAuthentication Security[2m > [22m2FA Security[2m > [22mshould generate valid TOTP secret and QR code
 [2m[90mâ†“[39m[22m server/__tests__/auth.security.test.ts[2m > [22mAuthentication Security[2m > [22m2FA Security[2m > [22mshould require valid TOTP token to enable 2FA
 [2m[90mâ†“[39m[22m server/__tests__/auth.security.test.ts[2m > [22mAuthentication Security[2m > [22mSecurity Headers[2m > [22mshould set secure HTTP headers
 [2m[90mâ†“[39m[22m server/__tests__/auth.security.test.ts[2m > [22mAuthentication Security[2m > [22mSecurity Headers[2m > [22mshould set CSP headers
 [2m[90mâ†“[39m[22m server/__tests__/auth.security.test.ts[2m > [22mAuthentication Security[2m > [22mRate Limiting[2m > [22mshould rate limit authentication attempts
 [2m[90mâ†“[39m[22m server/__tests__/auth.security.test.ts[2m > [22mAuthentication Security[2m > [22mRate Limiting[2m > [22mshould rate limit password reset requests
 [2m[90mâ†“[39m[22m server/__tests__/auth.security.test.ts[2m > [22mAuthentication Security[2m > [22mSession Security[2m > [22mshould set HttpOnly cookie flag
 [2m[90mâ†“[39m[22m server/__tests__/auth.security.test.ts[2m > [22mAuthentication Security[2m > [22mSession Security[2m > [22mshould set Secure cookie flag in production
 [2m[90mâ†“[39m[22m server/__tests__/auth.security.test.ts[2m > [22mAuthentication Security[2m > [22mSession Security[2m > [22mshould set SameSite cookie flag
 [2m[90mâ†“[39m[22m server/__tests__/auth.security.test.ts[2m > [22mAuthentication Security[2m > [22mSecurity Audit Logging[2m > [22mshould log successful login events
 [2m[90mâ†“[39m[22m server/__tests__/auth.security.test.ts[2m > [22mAuthentication Security[2m > [22mSecurity Audit Logging[2m > [22mshould log failed login events
 [2m[90mâ†“[39m[22m server/__tests__/auth.security.test.ts[2m > [22mAuthentication Security[2m > [22mSecurity Audit Logging[2m > [22mshould log password reset requests
[90mstdout[2m | src/modules/vehicle/__tests__/vehicle-integration.test.ts
[22m[39m[DB Service] Database service initialized

[90mstderr[2m | src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22m[2mVehicle Module Integration Tests[2m > [22m[2mVehicle CRUD Operations[2m > [22m[2mshould create a vehicle with auto-generated stock number
[22m[39m[VehicleService] Failed to create vehicle: ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

[90mstderr[2m | src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22m[2mVehicle Module Integration Tests[2m > [22m[2mVehicle CRUD Operations[2m > [22m[2mshould create a vehicle with custom stock number
[22m[39m[VehicleService] Failed to create vehicle: ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

[90mstderr[2m | src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22m[2mVehicle Module Integration Tests[2m > [22m[2mVehicle CRUD Operations[2m > [22m[2mshould reject invalid VIN
[22m[39m[VehicleService] Failed to create vehicle: ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

[90mstderr[2m | src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22m[2mVehicle Module Integration Tests[2m > [22m[2mVehicle CRUD Operations[2m > [22m[2mshould reject duplicate VIN within same dealership
[22m[39m[VehicleService] Failed to create vehicle: ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

[90mstderr[2m | src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22m[2mVehicle Module Integration Tests[2m > [22m[2mVehicle CRUD Operations[2m > [22m[2mshould allow same VIN across different dealerships
[22m[39m[VehicleService] Failed to create vehicle: ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

[90mstderr[2m | src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22m[2mVehicle Module Integration Tests[2m > [22m[2mVehicle CRUD Operations[2m > [22m[2mshould get vehicle by ID
[22m[39m[StorageService] getVehicle error: ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

[90mstderr[2m | src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22m[2mVehicle Module Integration Tests[2m > [22m[2mVehicle CRUD Operations[2m > [22m[2mshould get vehicle by ID
[22m[39m[VehicleService] Failed to get vehicle: ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

[90mstderr[2m | src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22m[2mVehicle Module Integration Tests[2m > [22m[2mVehicle CRUD Operations[2m > [22m[2mshould update vehicle details
[22m[39m[VehicleService] Failed to update vehicle: ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

 [31mÃ—[39m src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22mVehicle Module Integration Tests[2m > [22mVehicle CRUD Operations[2m > [22mshould create a vehicle with auto-generated stock number[32m 126[2mms[22m[39m
[31m   â†’ Failed to create vehicle: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com[39m
 [31mÃ—[39m src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22mVehicle Module Integration Tests[2m > [22mVehicle CRUD Operations[2m > [22mshould create a vehicle with custom stock number[32m 13[2mms[22m[39m
[31m   â†’ Failed to create vehicle: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com[39m
 [31mÃ—[39m src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22mVehicle Module Integration Tests[2m > [22mVehicle CRUD Operations[2m > [22mshould reject invalid VIN[32m 24[2mms[22m[39m
[31m   â†’ expected [Function] to throw error including 'Invalid VIN' but got 'Failed to create vehicle: getaddrinfoâ€¦'[39m
 [31mÃ—[39m src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22mVehicle Module Integration Tests[2m > [22mVehicle CRUD Operations[2m > [22mshould reject duplicate VIN within same dealership[32m 11[2mms[22m[39m
[31m   â†’ Failed to create vehicle: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com[39m
 [31mÃ—[39m src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22mVehicle Module Integration Tests[2m > [22mVehicle CRUD Operations[2m > [22mshould allow same VIN across different dealerships[32m 14[2mms[22m[39m
[31m   â†’ Failed to create vehicle: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com[39m
 [31mÃ—[39m src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22mVehicle Module Integration Tests[2m > [22mVehicle CRUD Operations[2m > [22mshould get vehicle by ID[32m 20[2mms[22m[39m
[31m   â†’ Failed to get vehicle: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com[39m
 [31mÃ—[39m src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22mVehicle Module Integration Tests[2m > [22mVehicle CRUD Operations[2m > [22mshould update vehicle details[32m 11[2mms[22m[39m
[31m   â†’ Failed to update vehicle: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com[39m
[90mstderr[2m | src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22m[2mVehicle Module Integration Tests[2m > [22m[2mVehicle CRUD Operations[2m > [22m[2mshould soft delete vehicle
[22m[39m[VehicleService] Failed to delete vehicle: ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

[90mstderr[2m | src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22m[2mVehicle Module Integration Tests[2m > [22m[2mMulti-Tenant Isolation[2m > [22m[2mshould enforce tenant isolation on get
[22m[39m[VehicleService] Failed to create vehicle: ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

[90mstderr[2m | src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22m[2mVehicle Module Integration Tests[2m > [22m[2mMulti-Tenant Isolation[2m > [22m[2mshould enforce tenant isolation on update
[22m[39m[VehicleService] Failed to create vehicle: ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

[90mstderr[2m | src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22m[2mVehicle Module Integration Tests[2m > [22m[2mMulti-Tenant Isolation[2m > [22m[2mshould enforce tenant isolation on delete
[22m[39m[VehicleService] Failed to create vehicle: ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

[90mstderr[2m | src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22m[2mVehicle Module Integration Tests[2m > [22m[2mStock Number Service[2m > [22m[2mshould generate sequential stock numbers
[22m[39m[StorageService] generateStockNumber error: ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

[90mstderr[2m | src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22m[2mVehicle Module Integration Tests[2m > [22m[2mStock Number Service[2m > [22m[2mshould generate sequential stock numbers
[22m[39m[StockNumberService] Failed to generate stock number: ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

 [31mÃ—[39m src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22mVehicle Module Integration Tests[2m > [22mVehicle CRUD Operations[2m > [22mshould soft delete vehicle[32m 19[2mms[22m[39m
[31m   â†’ Failed to delete vehicle: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com[39m
 [31mÃ—[39m src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22mVehicle Module Integration Tests[2m > [22mMulti-Tenant Isolation[2m > [22mshould enforce tenant isolation on get[32m 21[2mms[22m[39m
[31m   â†’ Failed to create vehicle: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com[39m
 [31mÃ—[39m src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22mVehicle Module Integration Tests[2m > [22mMulti-Tenant Isolation[2m > [22mshould enforce tenant isolation on update[32m 10[2mms[22m[39m
[31m   â†’ Failed to create vehicle: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com[39m
 [31mÃ—[39m src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22mVehicle Module Integration Tests[2m > [22mMulti-Tenant Isolation[2m > [22mshould enforce tenant isolation on delete[32m 11[2mms[22m[39m
[31m   â†’ Failed to create vehicle: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com[39m
 [31mÃ—[39m src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22mVehicle Module Integration Tests[2m > [22mVIN Decoder[2m > [22mshould validate valid VIN[32m 6[2mms[22m[39m
[31m   â†’ expected false to be true // Object.is equality[39m
 [32mâœ“[39m src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22mVehicle Module Integration Tests[2m > [22mVIN Decoder[2m > [22mshould reject VIN with wrong length[32m 1[2mms[22m[39m
 [32mâœ“[39m src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22mVehicle Module Integration Tests[2m > [22mVIN Decoder[2m > [22mshould reject VIN with invalid characters[32m 1[2mms[22m[39m
 [32mâœ“[39m src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22mVehicle Module Integration Tests[2m > [22mVIN Decoder[2m > [22mshould reject VIN with invalid check digit[32m 1[2mms[22m[39m
 [31mÃ—[39m src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22mVehicle Module Integration Tests[2m > [22mVIN Decoder[2m > [22mshould calculate check digit correctly[32m 2[2mms[22m[39m
[31m   â†’ expected '7' to be '3' // Object.is equality[39m
 [31mÃ—[39m src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22mVehicle Module Integration Tests[2m > [22mVIN Decoder[2m > [22mshould decode VIN via NHTSA API[32m 13[2mms[22m[39m
[31m   â†’ Invalid VIN check digit (position 9)[39m
 [31mÃ—[39m src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22mVehicle Module Integration Tests[2m > [22mVIN Decoder[2m > [22mshould extract manufacturer code from VIN[32m 1[2mms[22m[39m
[31m   â†’ Invalid VIN check digit (position 9)[39m
[90mstderr[2m | src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22m[2mVehicle Module Integration Tests[2m > [22m[2mStock Number Service[2m > [22m[2mshould generate stock numbers with prefix
[22m[39m[StockNumberService] Custom prefix not yet supported in StorageService, using legacy implementation

[90mstderr[2m | src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22m[2mVehicle Module Integration Tests[2m > [22m[2mStock Number Service[2m > [22m[2mshould generate stock numbers with prefix
[22m[39m[StockNumberService] Failed to generate stock number: ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

[90mstderr[2m | src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22m[2mVehicle Module Integration Tests[2m > [22m[2mStock Number Service[2m > [22m[2mshould maintain separate sequences per dealership
[22m[39m[StorageService] generateStockNumber error: ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

[90mstderr[2m | src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22m[2mVehicle Module Integration Tests[2m > [22m[2mStock Number Service[2m > [22m[2mshould maintain separate sequences per dealership
[22m[39m[StockNumberService] Failed to generate stock number: ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

[90mstderr[2m | src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22m[2mVehicle Module Integration Tests[2m > [22m[2mInventory Service[2m > [22m[2mshould get inventory with filters
[22m[39m[VehicleService] Failed to create vehicle: ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

[90mstderr[2m | src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22m[2mVehicle Module Integration Tests[2m > [22m[2mInventory Service[2m > [22m[2mshould filter by status
[22m[39m[VehicleService] Failed to create vehicle: ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

[90mstderr[2m | src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22m[2mVehicle Module Integration Tests[2m > [22m[2mInventory Service[2m > [22m[2mshould update vehicle status
[22m[39m[VehicleService] Failed to create vehicle: ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

[90mstderr[2m | src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22m[2mVehicle Module Integration Tests[2m > [22m[2mInventory Service[2m > [22m[2mshould reserve vehicle for deal
[22m[39m[VehicleService] Failed to create vehicle: ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

[90mstderr[2m | src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22m[2mVehicle Module Integration Tests[2m > [22m[2mInventory Service[2m > [22m[2mshould release vehicle reservation
[22m[39m[VehicleService] Failed to create vehicle: ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

 [31mÃ—[39m src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22mVehicle Module Integration Tests[2m > [22mStock Number Service[2m > [22mshould generate sequential stock numbers[32m 31[2mms[22m[39m
[31m   â†’ Failed to generate stock number: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com[39m
 [31mÃ—[39m src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22mVehicle Module Integration Tests[2m > [22mStock Number Service[2m > [22mshould generate stock numbers with prefix[32m 13[2mms[22m[39m
[31m   â†’ Failed to generate stock number: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com[39m
 [31mÃ—[39m src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22mVehicle Module Integration Tests[2m > [22mStock Number Service[2m > [22mshould maintain separate sequences per dealership[32m 12[2mms[22m[39m
[31m   â†’ Failed to generate stock number: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com[39m
 [32mâœ“[39m src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22mVehicle Module Integration Tests[2m > [22mStock Number Service[2m > [22mshould validate custom stock number format[32m 2[2mms[22m[39m
 [31mÃ—[39m src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22mVehicle Module Integration Tests[2m > [22mInventory Service[2m > [22mshould get inventory with filters[32m 10[2mms[22m[39m
[31m   â†’ Failed to create vehicle: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com[39m
 [31mÃ—[39m src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22mVehicle Module Integration Tests[2m > [22mInventory Service[2m > [22mshould filter by status[32m 10[2mms[22m[39m
[31m   â†’ Failed to create vehicle: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com[39m
 [31mÃ—[39m src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22mVehicle Module Integration Tests[2m > [22mInventory Service[2m > [22mshould update vehicle status[32m 11[2mms[22m[39m
[31m   â†’ Failed to create vehicle: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com[39m
 [31mÃ—[39m src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22mVehicle Module Integration Tests[2m > [22mInventory Service[2m > [22mshould reserve vehicle for deal[32m 27[2mms[22m[39m
[31m   â†’ Failed to create vehicle: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com[39m
[90mstderr[2m | src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22m[2mVehicle Module Integration Tests[2m > [22m[2mInventory Service[2m > [22m[2mshould get vehicle history
[22m[39m[VehicleService] Failed to create vehicle: ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

[90mstderr[2m | src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22m[2mVehicle Module Integration Tests[2m > [22m[2mInventory Service[2m > [22m[2mshould get inventory summary
[22m[39m[VehicleService] Failed to create vehicle: ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

[90mstderr[2m | src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22m[2mVehicle Module Integration Tests[2m > [22m[2mInventory Service[2m > [22m[2mshould get vehicle value metrics
[22m[39m[VehicleService] Failed to create vehicle: ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

[90mstderr[2m | src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22m[2mVehicle Module Integration Tests[2m > [22m[2mPerformance & Concurrency[2m > [22m[2mshould handle concurrent stock number generation without duplicates
[22m[39m[StorageService] generateStockNumber error: ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

[90mstderr[2m | src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22m[2mVehicle Module Integration Tests[2m > [22m[2mPerformance & Concurrency[2m > [22m[2mshould handle concurrent stock number generation without duplicates
[22m[39m[StockNumberService] Failed to generate stock number: ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

[90mstderr[2m | src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22m[2mVehicle Module Integration Tests[2m > [22m[2mPerformance & Concurrency[2m > [22m[2mshould handle concurrent vehicle creation
[22m[39m[StorageService] generateStockNumber error: ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

[90mstderr[2m | src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22m[2mVehicle Module Integration Tests[2m > [22m[2mPerformance & Concurrency[2m > [22m[2mshould handle concurrent vehicle creation
[22m[39m[StockNumberService] Failed to generate stock number: ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

[90mstderr[2m | src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22m[2mVehicle Module Integration Tests[2m > [22m[2mPerformance & Concurrency[2m > [22m[2mshould handle concurrent vehicle creation
[22m[39m[StorageService] generateStockNumber error: ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

[90mstderr[2m | src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22m[2mVehicle Module Integration Tests[2m > [22m[2mPerformance & Concurrency[2m > [22m[2mshould handle concurrent vehicle creation
[22m[39m[StockNumberService] Failed to generate stock number: ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

[90mstderr[2m | src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22m[2mVehicle Module Integration Tests[2m > [22m[2mPerformance & Concurrency[2m > [22m[2mshould handle concurrent vehicle creation
[22m[39m[StorageService] generateStockNumber error: ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

[90mstderr[2m | src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22m[2mVehicle Module Integration Tests[2m > [22m[2mPerformance & Concurrency[2m > [22m[2mshould handle concurrent vehicle creation
[22m[39m[StockNumberService] Failed to generate stock number: ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

[90mstderr[2m | src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22m[2mVehicle Module Integration Tests[2m > [22m[2mPerformance & Concurrency[2m > [22m[2mshould handle concurrent vehicle creation
[22m[39m[StorageService] generateStockNumber error: ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

[90mstderr[2m | src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22m[2mVehicle Module Integration Tests[2m > [22m[2mPerformance & Concurrency[2m > [22m[2mshould handle concurrent vehicle creation
[22m[39m[StockNumberService] Failed to generate stock number: ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

[90mstderr[2m | src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22m[2mVehicle Module Integration Tests[2m > [22m[2mPerformance & Concurrency[2m > [22m[2mshould handle concurrent vehicle creation
[22m[39m[StorageService] generateStockNumber error: ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

[90mstderr[2m | src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22m[2mVehicle Module Integration Tests[2m > [22m[2mPerformance & Concurrency[2m > [22m[2mshould handle concurrent vehicle creation
[22m[39m[StockNumberService] Failed to generate stock number: ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

[90mstderr[2m | src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22m[2mVehicle Module Integration Tests[2m > [22m[2mPerformance & Concurrency[2m > [22m[2mshould handle concurrent vehicle creation
[22m[39m[StorageService] generateStockNumber error: ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

[90mstderr[2m | src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22m[2mVehicle Module Integration Tests[2m > [22m[2mPerformance & Concurrency[2m > [22m[2mshould handle concurrent vehicle creation
[22m[39m[StockNumberService] Failed to generate stock number: ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

[90mstderr[2m | src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22m[2mVehicle Module Integration Tests[2m > [22m[2mPerformance & Concurrency[2m > [22m[2mshould handle concurrent vehicle creation
[22m[39m[StorageService] generateStockNumber error: ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

[90mstderr[2m | src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22m[2mVehicle Module Integration Tests[2m > [22m[2mPerformance & Concurrency[2m > [22m[2mshould handle concurrent vehicle creation
[22m[39m[StockNumberService] Failed to generate stock number: ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

[90mstderr[2m | src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22m[2mVehicle Module Integration Tests[2m > [22m[2mPerformance & Concurrency[2m > [22m[2mshould handle concurrent vehicle creation
[22m[39m[StorageService] generateStockNumber error: ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

[90mstderr[2m | src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22m[2mVehicle Module Integration Tests[2m > [22m[2mPerformance & Concurrency[2m > [22m[2mshould handle concurrent vehicle creation
[22m[39m[StockNumberService] Failed to generate stock number: ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

 [31mÃ—[39m src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22mVehicle Module Integration Tests[2m > [22mInventory Service[2m > [22mshould release vehicle reservation[32m 15[2mms[22m[39m
[31m   â†’ Failed to create vehicle: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com[39m
 [31mÃ—[39m src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22mVehicle Module Integration Tests[2m > [22mInventory Service[2m > [22mshould get vehicle history[32m 8[2mms[22m[39m
[31m   â†’ Failed to create vehicle: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com[39m
 [31mÃ—[39m src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22mVehicle Module Integration Tests[2m > [22mInventory Service[2m > [22mshould get inventory summary[32m 10[2mms[22m[39m
[31m   â†’ Failed to create vehicle: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com[39m
 [31mÃ—[39m src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22mVehicle Module Integration Tests[2m > [22mInventory Service[2m > [22mshould get vehicle value metrics[32m 10[2mms[22m[39m
[31m   â†’ Failed to create vehicle: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com[39m
 [31mÃ—[39m src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22mVehicle Module Integration Tests[2m > [22mPerformance & Concurrency[2m > [22mshould handle concurrent stock number generation without duplicates[32m 62[2mms[22m[39m
[31m   â†’ Failed to generate stock number: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com[39m
[90mstderr[2m | src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22m[2mVehicle Module Integration Tests[2m > [22m[2mPerformance & Concurrency[2m > [22m[2mshould handle concurrent vehicle creation
[22m[39m[StorageService] generateStockNumber error: ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

[90mstderr[2m | src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22m[2mVehicle Module Integration Tests[2m > [22m[2mPerformance & Concurrency[2m > [22m[2mshould handle concurrent vehicle creation
[22m[39m[StockNumberService] Failed to generate stock number: ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

[90mstderr[2m | src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22m[2mVehicle Module Integration Tests[2m > [22m[2mPerformance & Concurrency[2m > [22m[2mshould handle concurrent vehicle creation
[22m[39m[VehicleService] Failed to create vehicle: ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

[90mstderr[2m | src/modules/vehicle/__tests__/vehicle-integration.test.ts
[22m[39m[VehicleService] Failed to create vehicle: ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

[90mstderr[2m | src/modules/vehicle/__tests__/vehicle-integration.test.ts
[22m[39m[VehicleService] Failed to create vehicle: ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

[90mstderr[2m | src/modules/vehicle/__tests__/vehicle-integration.test.ts
[22m[39m[VehicleService] Failed to create vehicle: ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

[90mstderr[2m | src/modules/vehicle/__tests__/vehicle-integration.test.ts
[22m[39m[VehicleService] Failed to create vehicle: ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

 [31mÃ—[39m src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22mVehicle Module Integration Tests[2m > [22mPerformance & Concurrency[2m > [22mshould handle concurrent vehicle creation[32m 64[2mms[22m[39m
[31m   â†’ Failed to create vehicle: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com[39m
[90mstdout[2m | server/__tests__/module-boundaries.test.ts
[22m[39m[DB Service] Database service initialized

[90mstdout[2m | server/__tests__/module-boundaries.test.ts[2m > [22m[2mModule Boundary Validation Tests
[22m[39m[Test Setup] Initializing test database...

[90mstderr[2m | server/__tests__/module-boundaries.test.ts[2m > [22m[2mModule Boundary Validation Tests
[22m[39m[Test Setup] Failed to initialize test database: ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

 [2m[90mâ†“[39m[22m server/__tests__/module-boundaries.test.ts[2m > [22mModule Boundary Validation Tests[2m > [22mDatabase Service Layer[2m > [22mshould provide transaction support
 [2m[90mâ†“[39m[22m server/__tests__/module-boundaries.test.ts[2m > [22mModule Boundary Validation Tests[2m > [22mDatabase Service Layer[2m > [22mshould enforce dealership isolation at database level
 [2m[90mâ†“[39m[22m server/__tests__/module-boundaries.test.ts[2m > [22mModule Boundary Validation Tests[2m > [22mDatabase Service Layer[2m > [22mshould handle concurrent operations safely
 [2m[90mâ†“[39m[22m server/__tests__/module-boundaries.test.ts[2m > [22mModule Boundary Validation Tests[2m > [22mDatabase Service Layer[2m > [22mshould provide atomic operations for deal creation
 [2m[90mâ†“[39m[22m server/__tests__/module-boundaries.test.ts[2m > [22mModule Boundary Validation Tests[2m > [22mDeal Module Integration[2m > [22mshould integrate customer data into deal
 [2m[90mâ†“[39m[22m server/__tests__/module-boundaries.test.ts[2m > [22mModule Boundary Validation Tests[2m > [22mDeal Module Integration[2m > [22mshould integrate vehicle data into deal scenario
 [2m[90mâ†“[39m[22m server/__tests__/module-boundaries.test.ts[2m > [22mModule Boundary Validation Tests[2m > [22mDeal Module Integration[2m > [22mshould propagate deal state changes through system
 [2m[90mâ†“[39m[22m server/__tests__/module-boundaries.test.ts[2m > [22mModule Boundary Validation Tests[2m > [22mDeal Module Integration[2m > [22mshould validate cross-module data consistency
 [2m[90mâ†“[39m[22m server/__tests__/module-boundaries.test.ts[2m > [22mModule Boundary Validation Tests[2m > [22mError Handling and Propagation[2m > [22mshould handle missing customer gracefully
 [2m[90mâ†“[39m[22m server/__tests__/module-boundaries.test.ts[2m > [22mModule Boundary Validation Tests[2m > [22mError Handling and Propagation[2m > [22mshould handle missing vehicle gracefully
 [2m[90mâ†“[39m[22m server/__tests__/module-boundaries.test.ts[2m > [22mModule Boundary Validation Tests[2m > [22mError Handling and Propagation[2m > [22mshould rollback transaction on error
 [2m[90mâ†“[39m[22m server/__tests__/module-boundaries.test.ts[2m > [22mModule Boundary Validation Tests[2m > [22mData Flow Between Modules[2m > [22mshould flow customer data to deal to scenario
 [2m[90mâ†“[39m[22m server/__tests__/module-boundaries.test.ts[2m > [22mModule Boundary Validation Tests[2m > [22mData Flow Between Modules[2m > [22mshould maintain referential integrity across modules
 [2m[90mâ†“[39m[22m server/__tests__/module-boundaries.test.ts[2m > [22mModule Boundary Validation Tests[2m > [22mModule Public APIs[2m > [22mshould expose atomic deal creation API
 [2m[90mâ†“[39m[22m server/__tests__/module-boundaries.test.ts[2m > [22mModule Boundary Validation Tests[2m > [22mModule Public APIs[2m > [22mshould validate input parameters
 [2m[90mâ†“[39m[22m server/__tests__/module-boundaries.test.ts[2m > [22mModule Boundary Validation Tests[2m > [22mModule Public APIs[2m > [22mshould return consistent data structures
 [32mâœ“[39m src/modules/tax/__tests__/decimal-calculator.test.ts[2m > [22mDecimalCalculator - Core Operations[2m > [22madd[2m > [22mshould add two values correctly[32m 4[2mms[22m[39m
 [32mâœ“[39m src/modules/tax/__tests__/decimal-calculator.test.ts[2m > [22mDecimalCalculator - Core Operations[2m > [22madd[2m > [22mshould handle floating point precision issues[32m 1[2mms[22m[39m
 [32mâœ“[39m src/modules/tax/__tests__/decimal-calculator.test.ts[2m > [22mDecimalCalculator - Core Operations[2m > [22madd[2m > [22mshould add multiple values[32m 1[2mms[22m[39m
 [32mâœ“[39m src/modules/tax/__tests__/decimal-calculator.test.ts[2m > [22mDecimalCalculator - Core Operations[2m > [22madd[2m > [22mshould handle negative values[32m 1[2mms[22m[39m
 [32mâœ“[39m src/modules/tax/__tests__/decimal-calculator.test.ts[2m > [22mDecimalCalculator - Core Operations[2m > [22madd[2m > [22mshould return 0.00 for empty array[32m 0[2mms[22m[39m
 [32mâœ“[39m src/modules/tax/__tests__/decimal-calculator.test.ts[2m > [22mDecimalCalculator - Core Operations[2m > [22msubtract[2m > [22mshould subtract two values correctly[32m 0[2mms[22m[39m
 [32mâœ“[39m src/modules/tax/__tests__/decimal-calculator.test.ts[2m > [22mDecimalCalculator - Core Operations[2m > [22msubtract[2m > [22mshould handle negative results[32m 0[2mms[22m[39m
 [32mâœ“[39m src/modules/tax/__tests__/decimal-calculator.test.ts[2m > [22mDecimalCalculator - Core Operations[2m > [22msubtract[2m > [22mshould handle floating point precision[32m 0[2mms[22m[39m
 [32mâœ“[39m src/modules/tax/__tests__/decimal-calculator.test.ts[2m > [22mDecimalCalculator - Core Operations[2m > [22mmultiply[2m > [22mshould multiply two values correctly[32m 1[2mms[22m[39m
 [32mâœ“[39m src/modules/tax/__tests__/decimal-calculator.test.ts[2m > [22mDecimalCalculator - Core Operations[2m > [22mmultiply[2m > [22mshould handle floating point precision[32m 1[2mms[22m[39m
 [32mâœ“[39m src/modules/tax/__tests__/decimal-calculator.test.ts[2m > [22mDecimalCalculator - Core Operations[2m > [22mmultiply[2m > [22mshould multiply by zero[32m 0[2mms[22m[39m
 [32mâœ“[39m src/modules/tax/__tests__/decimal-calculator.test.ts[2m > [22mDecimalCalculator - Core Operations[2m > [22mdivide[2m > [22mshould divide two values correctly[32m 1[2mms[22m[39m
 [32mâœ“[39m src/modules/tax/__tests__/decimal-calculator.test.ts[2m > [22mDecimalCalculator - Core Operations[2m > [22mdivide[2m > [22mshould handle decimal division[32m 0[2mms[22m[39m
 [32mâœ“[39m src/modules/tax/__tests__/decimal-calculator.test.ts[2m > [22mDecimalCalculator - Core Operations[2m > [22mdivide[2m > [22mshould throw on division by zero[32m 2[2mms[22m[39m
 [32mâœ“[39m src/modules/tax/__tests__/decimal-calculator.test.ts[2m > [22mDecimalCalculator - Tax Calculations[2m > [22mcalculateTax[2m > [22mshould calculate tax correctly[32m 1[2mms[22m[39m
 [32mâœ“[39m src/modules/tax/__tests__/decimal-calculator.test.ts[2m > [22mDecimalCalculator - Tax Calculations[2m > [22mcalculateTax[2m > [22mshould calculate CA sales tax[32m 1[2mms[22m[39m
 [32mâœ“[39m src/modules/tax/__tests__/decimal-calculator.test.ts[2m > [22mDecimalCalculator - Tax Calculations[2m > [22mcalculateTax[2m > [22mshould handle zero tax rate[32m 0[2mms[22m[39m
 [32mâœ“[39m src/modules/tax/__tests__/decimal-calculator.test.ts[2m > [22mDecimalCalculator - Tax Calculations[2m > [22mcalculateTax[2m > [22mshould throw on negative base[32m 1[2mms[22m[39m
 [32mâœ“[39m src/modules/tax/__tests__/decimal-calculator.test.ts[2m > [22mDecimalCalculator - Tax Calculations[2m > [22mcalculateTax[2m > [22mshould throw on invalid tax rate[32m 1[2mms[22m[39m
 [32mâœ“[39m src/modules/tax/__tests__/decimal-calculator.test.ts[2m > [22mDecimalCalculator - Tax Calculations[2m > [22mapplyTradeInCredit[2m > [22mshould apply trade-in credit[32m 1[2mms[22m[39m
 [32mâœ“[39m src/modules/tax/__tests__/decimal-calculator.test.ts[2m > [22mDecimalCalculator - Tax Calculations[2m > [22mapplyTradeInCredit[2m > [22mshould not go negative[32m 0[2mms[22m[39m
 [32mâœ“[39m src/modules/tax/__tests__/decimal-calculator.test.ts[2m > [22mDecimalCalculator - Tax Calculations[2m > [22mapplyTradeInCredit[2m > [22mshould handle zero trade-in[32m 0[2mms[22m[39m
 [32mâœ“[39m src/modules/tax/__tests__/decimal-calculator.test.ts[2m > [22mDecimalCalculator - Tax Calculations[2m > [22mcalculateTaxWithTradeIn[2m > [22mshould calculate tax with trade-in credit[32m 1[2mms[22m[39m
 [32mâœ“[39m src/modules/tax/__tests__/decimal-calculator.test.ts[2m > [22mDecimalCalculator - Tax Calculations[2m > [22mcalculateTaxWithTradeIn[2m > [22mshould handle trade-in exceeding price[32m 1[2mms[22m[39m
 [32mâœ“[39m src/modules/tax/__tests__/decimal-calculator.test.ts[2m > [22mDecimalCalculator - Tax Calculations[2m > [22mapplyCap[2m > [22mshould apply cap when value exceeds cap[32m 0[2mms[22m[39m
 [32mâœ“[39m src/modules/tax/__tests__/decimal-calculator.test.ts[2m > [22mDecimalCalculator - Tax Calculations[2m > [22mapplyCap[2m > [22mshould not apply cap when value is below cap[32m 0[2mms[22m[39m
 [32mâœ“[39m src/modules/tax/__tests__/decimal-calculator.test.ts[2m > [22mDecimalCalculator - Tax Calculations[2m > [22mapplyCap[2m > [22mshould handle equal values[32m 0[2mms[22m[39m
 [32mâœ“[39m src/modules/tax/__tests__/decimal-calculator.test.ts[2m > [22mDecimalCalculator - Tax Calculations[2m > [22mapplyPercent[2m > [22mshould apply percentage correctly[32m 0[2mms[22m[39m
 [32mâœ“[39m src/modules/tax/__tests__/decimal-calculator.test.ts[2m > [22mDecimalCalculator - Tax Calculations[2m > [22mapplyPercent[2m > [22mshould handle 100%[32m 0[2mms[22m[39m
 [32mâœ“[39m src/modules/tax/__tests__/decimal-calculator.test.ts[2m > [22mDecimalCalculator - Tax Calculations[2m > [22mapplyPercent[2m > [22mshould handle 0%[32m 0[2mms[22m[39m
 [32mâœ“[39m src/modules/tax/__tests__/decimal-calculator.test.ts[2m > [22mDecimalCalculator - Comparison Operations[2m > [22misEqual[2m > [22mshould return true for equal values[32m 0[2mms[22m[39m
 [32mâœ“[39m src/modules/tax/__tests__/decimal-calculator.test.ts[2m > [22mDecimalCalculator - Comparison Operations[2m > [22misEqual[2m > [22mshould return false for different values[32m 0[2mms[22m[39m
 [32mâœ“[39m src/modules/tax/__tests__/decimal-calculator.test.ts[2m > [22mDecimalCalculator - Comparison Operations[2m > [22misEqual[2m > [22mshould handle precision differences[32m 3[2mms[22m[39m
 [32mâœ“[39m src/modules/tax/__tests__/decimal-calculator.test.ts[2m > [22mDecimalCalculator - Comparison Operations[2m > [22misGreaterThan[2m > [22mshould return true when a > b[32m 0[2mms[22m[39m
 [32mâœ“[39m src/modules/tax/__tests__/decimal-calculator.test.ts[2m > [22mDecimalCalculator - Comparison Operations[2m > [22misGreaterThan[2m > [22mshould return false when a <= b[32m 0[2mms[22m[39m
 [32mâœ“[39m src/modules/tax/__tests__/decimal-calculator.test.ts[2m > [22mDecimalCalculator - Comparison Operations[2m > [22misLessThan[2m > [22mshould return true when a < b[32m 0[2mms[22m[39m
 [32mâœ“[39m src/modules/tax/__tests__/decimal-calculator.test.ts[2m > [22mDecimalCalculator - Comparison Operations[2m > [22misLessThan[2m > [22mshould return false when a >= b[32m 1[2mms[22m[39m
 [32mâœ“[39m src/modules/tax/__tests__/decimal-calculator.test.ts[2m > [22mDecimalCalculator - Comparison Operations[2m > [22misZero[2m > [22mshould return true for zero[32m 0[2mms[22m[39m
 [32mâœ“[39m src/modules/tax/__tests__/decimal-calculator.test.ts[2m > [22mDecimalCalculator - Comparison Operations[2m > [22misZero[2m > [22mshould return false for non-zero[32m 0[2mms[22m[39m
 [32mâœ“[39m src/modules/tax/__tests__/decimal-calculator.test.ts[2m > [22mDecimalCalculator - Comparison Operations[2m > [22misPositive[2m > [22mshould return true for positive values[32m 0[2mms[22m[39m
 [32mâœ“[39m src/modules/tax/__tests__/decimal-calculator.test.ts[2m > [22mDecimalCalculator - Comparison Operations[2m > [22misPositive[2m > [22mshould return false for zero or negative[32m 0[2mms[22m[39m
 [32mâœ“[39m src/modules/tax/__tests__/decimal-calculator.test.ts[2m > [22mDecimalCalculator - Comparison Operations[2m > [22misNegative[2m > [22mshould return true for negative values[32m 0[2mms[22m[39m
 [32mâœ“[39m src/modules/tax/__tests__/decimal-calculator.test.ts[2m > [22mDecimalCalculator - Comparison Operations[2m > [22misNegative[2m > [22mshould return false for zero or positive[32m 0[2mms[22m[39m
 [32mâœ“[39m src/modules/tax/__tests__/decimal-calculator.test.ts[2m > [22mDecimalCalculator - Comparison Operations[2m > [22mmin[2m > [22mshould return minimum value[32m 0[2mms[22m[39m
 [32mâœ“[39m src/modules/tax/__tests__/decimal-calculator.test.ts[2m > [22mDecimalCalculator - Comparison Operations[2m > [22mmin[2m > [22mshould handle single value[32m 0[2mms[22m[39m
 [32mâœ“[39m src/modules/tax/__tests__/decimal-calculator.test.ts[2m > [22mDecimalCalculator - Comparison Operations[2m > [22mmin[2m > [22mshould handle negative values[32m 0[2mms[22m[39m
 [32mâœ“[39m src/modules/tax/__tests__/decimal-calculator.test.ts[2m > [22mDecimalCalculator - Comparison Operations[2m > [22mmax[2m > [22mshould return maximum value[32m 0[2mms[22m[39m
 [32mâœ“[39m src/modules/tax/__tests__/decimal-calculator.test.ts[2m > [22mDecimalCalculator - Comparison Operations[2m > [22mmax[2m > [22mshould handle single value[32m 0[2mms[22m[39m
 [32mâœ“[39m src/modules/tax/__tests__/decimal-calculator.test.ts[2m > [22mDecimalCalculator - Comparison Operations[2m > [22mmax[2m > [22mshould handle negative values[32m 0[2mms[22m[39m
 [32mâœ“[39m src/modules/tax/__tests__/decimal-calculator.test.ts[2m > [22mDecimalCalculator - Comparison Operations[2m > [22mabs[2m > [22mshould return absolute value of positive[32m 0[2mms[22m[39m
 [32mâœ“[39m src/modules/tax/__tests__/decimal-calculator.test.ts[2m > [22mDecimalCalculator - Comparison Operations[2m > [22mabs[2m > [22mshould return absolute value of negative[32m 0[2mms[22m[39m
 [32mâœ“[39m src/modules/tax/__tests__/decimal-calculator.test.ts[2m > [22mDecimalCalculator - Comparison Operations[2m > [22mabs[2m > [22mshould return zero for zero[32m 0[2mms[22m[39m
 [32mâœ“[39m src/modules/tax/__tests__/decimal-calculator.test.ts[2m > [22mDecimalCalculator - Aggregate Operations[2m > [22msum[2m > [22mshould sum array of values[32m 0[2mms[22m[39m
 [32mâœ“[39m src/modules/tax/__tests__/decimal-calculator.test.ts[2m > [22mDecimalCalculator - Aggregate Operations[2m > [22msum[2m > [22mshould return 0.00 for empty array[32m 0[2mms[22m[39m
 [32mâœ“[39m src/modules/tax/__tests__/decimal-calculator.test.ts[2m > [22mDecimalCalculator - Aggregate Operations[2m > [22msum[2m > [22mshould handle negative values[32m 0[2mms[22m[39m
 [32mâœ“[39m src/modules/tax/__tests__/decimal-calculator.test.ts[2m > [22mDecimalCalculator - Aggregate Operations[2m > [22mpercentageOf[2m > [22mshould calculate percentage[32m 0[2mms[22m[39m
 [32mâœ“[39m src/modules/tax/__tests__/decimal-calculator.test.ts[2m > [22mDecimalCalculator - Aggregate Operations[2m > [22mpercentageOf[2m > [22mshould handle zero total[32m 0[2mms[22m[39m
 [32mâœ“[39m src/modules/tax/__tests__/decimal-calculator.test.ts[2m > [22mDecimalCalculator - Aggregate Operations[2m > [22mpercentageOf[2m > [22mshould handle 100%[32m 0[2mms[22m[39m
 [32mâœ“[39m src/modules/tax/__tests__/decimal-calculator.test.ts[2m > [22mDecimalCalculator - Validation[2m > [22mvalidateMoney[2m > [22mshould validate valid money[32m 1[2mms[22m[39m
 [32mâœ“[39m src/modules/tax/__tests__/decimal-calculator.test.ts[2m > [22mDecimalCalculator - Validation[2m > [22mvalidateMoney[2m > [22mshould throw on invalid money[32m 2[2mms[22m[39m
 [32mâœ“[39m src/modules/tax/__tests__/decimal-calculator.test.ts[2m > [22mDecimalCalculator - Validation[2m > [22mvalidateNonNegative[2m > [22mshould validate non-negative values[32m 0[2mms[22m[39m
 [32mâœ“[39m src/modules/tax/__tests__/decimal-calculator.test.ts[2m > [22mDecimalCalculator - Validation[2m > [22mvalidateNonNegative[2m > [22mshould throw on negative values[32m 0[2mms[22m[39m
 [32mâœ“[39m src/modules/tax/__tests__/decimal-calculator.test.ts[2m > [22mDecimalCalculator - Validation[2m > [22mvalidateRate[2m > [22mshould validate valid rates[32m 1[2mms[22m[39m
 [32mâœ“[39m src/modules/tax/__tests__/decimal-calculator.test.ts[2m > [22mDecimalCalculator - Validation[2m > [22mvalidateRate[2m > [22mshould throw on invalid rates[32m 1[2mms[22m[39m
 [32mâœ“[39m src/modules/tax/__tests__/decimal-calculator.test.ts[2m > [22mDecimalCalculator - Formatting[2m > [22mformatUSD[2m > [22mshould format as USD currency[32m 85[2mms[22m[39m
 [32mâœ“[39m src/modules/tax/__tests__/decimal-calculator.test.ts[2m > [22mDecimalCalculator - Formatting[2m > [22mformatUSD[2m > [22mshould handle zero[32m 1[2mms[22m[39m
 [32mâœ“[39m src/modules/tax/__tests__/decimal-calculator.test.ts[2m > [22mDecimalCalculator - Formatting[2m > [22mformatUSD[2m > [22mshould handle large numbers[32m 1[2mms[22m[39m
 [32mâœ“[39m src/modules/tax/__tests__/decimal-calculator.test.ts[2m > [22mDecimalCalculator - Formatting[2m > [22mformatUSD[2m > [22mshould handle negative numbers[32m 1[2mms[22m[39m
 [32mâœ“[39m src/modules/tax/__tests__/decimal-calculator.test.ts[2m > [22mDecimalCalculator - Formatting[2m > [22mformatPercent[2m > [22mshould format as percentage[32m 1[2mms[22m[39m
 [32mâœ“[39m src/modules/tax/__tests__/decimal-calculator.test.ts[2m > [22mDecimalCalculator - Formatting[2m > [22mformatPercent[2m > [22mshould handle zero[32m 0[2mms[22m[39m
 [32mâœ“[39m src/modules/tax/__tests__/decimal-calculator.test.ts[2m > [22mDecimalCalculator - Formatting[2m > [22mformatPercent[2m > [22mshould handle 100%[32m 0[2mms[22m[39m
 [32mâœ“[39m src/modules/tax/__tests__/decimal-calculator.test.ts[2m > [22mDecimalCalculator - Formatting[2m > [22mformatPercent[2m > [22mshould handle custom decimals[32m 0[2mms[22m[39m
 [32mâœ“[39m src/modules/tax/__tests__/decimal-calculator.test.ts[2m > [22mDecimalCalculator - Real-World Scenarios[2m > [22mshould calculate CA vehicle sales tax correctly[32m 0[2mms[22m[39m
 [32mâœ“[39m src/modules/tax/__tests__/decimal-calculator.test.ts[2m > [22mDecimalCalculator - Real-World Scenarios[2m > [22mshould handle MI trade-in credit cap[32m 0[2mms[22m[39m
 [32mâœ“[39m src/modules/tax/__tests__/decimal-calculator.test.ts[2m > [22mDecimalCalculator - Real-World Scenarios[2m > [22mshould calculate complete deal with fees[32m 1[2mms[22m[39m
 [32mâœ“[39m src/modules/tax/__tests__/decimal-calculator.test.ts[2m > [22mDecimalCalculator - Real-World Scenarios[2m > [22mshould handle floating point precision in complex calculations[32m 1[2mms[22m[39m
 [32mâœ“[39m src/modules/customer/__tests__/customer-search.integration.test.ts[2m > [22mCustomer Search Integration[2m > [22mSearch by Name[2m > [22mshould find customer by first name[32m 2[2mms[22m[39m
 [32mâœ“[39m src/modules/customer/__tests__/customer-search.integration.test.ts[2m > [22mCustomer Search Integration[2m > [22mSearch by Name[2m > [22mshould find customer by last name[32m 1[2mms[22m[39m
 [32mâœ“[39m src/modules/customer/__tests__/customer-search.integration.test.ts[2m > [22mCustomer Search Integration[2m > [22mSearch by Name[2m > [22mshould find customer by full name[32m 1[2mms[22m[39m
 [32mâœ“[39m src/modules/customer/__tests__/customer-search.integration.test.ts[2m > [22mCustomer Search Integration[2m > [22mSearch by Name[2m > [22mshould perform case-insensitive search[32m 0[2mms[22m[39m
 [32mâœ“[39m src/modules/customer/__tests__/customer-search.integration.test.ts[2m > [22mCustomer Search Integration[2m > [22mSearch by Email and Phone[2m > [22mshould find customer by email address[32m 0[2mms[22m[39m
 [32mâœ“[39m src/modules/customer/__tests__/customer-search.integration.test.ts[2m > [22mCustomer Search Integration[2m > [22mSearch by Email and Phone[2m > [22mshould find customer by partial email[32m 0[2mms[22m[39m
 [32mâœ“[39m src/modules/customer/__tests__/customer-search.integration.test.ts[2m > [22mCustomer Search Integration[2m > [22mSearch by Email and Phone[2m > [22mshould find customer by phone number[32m 0[2mms[22m[39m
 [32mâœ“[39m src/modules/customer/__tests__/customer-search.integration.test.ts[2m > [22mCustomer Search Integration[2m > [22mSearch by Email and Phone[2m > [22mshould find customer by partial phone number[32m 0[2mms[22m[39m
 [32mâœ“[39m src/modules/customer/__tests__/customer-search.integration.test.ts[2m > [22mCustomer Search Integration[2m > [22mFilter by Date Range[2m > [22mshould filter customers created in date range[32m 1[2mms[22m[39m
 [32mâœ“[39m src/modules/customer/__tests__/customer-search.integration.test.ts[2m > [22mCustomer Search Integration[2m > [22mFilter by Date Range[2m > [22mshould filter customers updated in date range[32m 1[2mms[22m[39m
 [31mÃ—[39m src/modules/customer/__tests__/customer-search.integration.test.ts[2m > [22mCustomer Search Integration[2m > [22mFilter by Date Range[2m > [22mshould find recently updated customers[32m 24[2mms[22m[39m
[31m   â†’ expected 0 to be greater than 0[39m
 [32mâœ“[39m src/modules/customer/__tests__/customer-search.integration.test.ts[2m > [22mCustomer Search Integration[2m > [22mPagination[2m > [22mshould paginate search results correctly[32m 0[2mms[22m[39m
 [32mâœ“[39m src/modules/customer/__tests__/customer-search.integration.test.ts[2m > [22mCustomer Search Integration[2m > [22mPagination[2m > [22mshould return correct total count with pagination[32m 1[2mms[22m[39m
 [32mâœ“[39m src/modules/customer/__tests__/customer-search.integration.test.ts[2m > [22mCustomer Search Integration[2m > [22mPagination[2m > [22mshould handle last page correctly[32m 1[2mms[22m[39m
 [32mâœ“[39m src/modules/customer/__tests__/customer-search.integration.test.ts[2m > [22mCustomer Search Integration[2m > [22mSorting[2m > [22mshould sort customers by name ascending[32m 25[2mms[22m[39m
 [32mâœ“[39m src/modules/customer/__tests__/customer-search.integration.test.ts[2m > [22mCustomer Search Integration[2m > [22mSorting[2m > [22mshould sort customers by creation date descending[32m 1[2mms[22m[39m
 [32mâœ“[39m src/modules/customer/__tests__/customer-search.integration.test.ts[2m > [22mCustomer Search Integration[2m > [22mSorting[2m > [22mshould sort customers by last update descending[32m 0[2mms[22m[39m
 [32mâœ“[39m src/modules/customer/__tests__/customer-search.integration.test.ts[2m > [22mCustomer Search Integration[2m > [22mCombined Search and Filter[2m > [22mshould search and filter by date range simultaneously[32m 0[2mms[22m[39m
 [32mâœ“[39m src/modules/customer/__tests__/customer-search.integration.test.ts[2m > [22mCustomer Search Integration[2m > [22mMulti-Tenant Isolation[2m > [22mshould only return customers for current tenant[32m 0[2mms[22m[39m
 [32mâœ“[39m src/modules/customer/__tests__/customer-search.integration.test.ts[2m > [22mCustomer Search Integration[2m > [22mSearch Result Validation[2m > [22mshould return empty results for non-existent search[32m 0[2mms[22m[39m
 [32mâœ“[39m src/modules/customer/__tests__/customer-search.integration.test.ts[2m > [22mCustomer Search Integration[2m > [22mSearch Result Validation[2m > [22mshould return all customers when search is empty[32m 0[2mms[22m[39m
 [31mÃ—[39m src/modules/customer/__tests__/customer-search.integration.test.ts[2m > [22mCustomer Search Integration[2m > [22mSearch Performance[2m > [22mshould handle search with large result set[32m 5[2mms[22m[39m
[31m   â†’ expected 0 to be greater than 0[39m
 [32mâœ“[39m src/modules/deal/__tests__/deal-creation.integration.test.ts[2m > [22mDeal Creation Integration[2m > [22mCreate Deal with Customer and Vehicle[2m > [22mshould create a deal with valid customer and vehicle[32m 3[2mms[22m[39m
 [32mâœ“[39m src/modules/deal/__tests__/deal-creation.integration.test.ts[2m > [22mDeal Creation Integration[2m > [22mCreate Deal with Customer and Vehicle[2m > [22mshould fail to create deal without required fields[32m 2[2mms[22m[39m
 [32mâœ“[39m src/modules/deal/__tests__/deal-creation.integration.test.ts[2m > [22mDeal Creation Integration[2m > [22mCreate Deal with Customer and Vehicle[2m > [22mshould enforce multi-tenant isolation on deal creation[32m 1[2mms[22m[39m
 [32mâœ“[39m src/modules/deal/__tests__/deal-creation.integration.test.ts[2m > [22mDeal Creation Integration[2m > [22mDeal Calculations and Pricing[2m > [22mshould calculate pricing correctly for financed deal[32m 1[2mms[22m[39m
 [32mâœ“[39m src/modules/deal/__tests__/deal-creation.integration.test.ts[2m > [22mDeal Creation Integration[2m > [22mDeal Calculations and Pricing[2m > [22mshould calculate trade-in equity correctly[32m 0[2mms[22m[39m
 [31mÃ—[39m src/modules/deal/__tests__/deal-creation.integration.test.ts[2m > [22mDeal Creation Integration[2m > [22mDeal Calculations and Pricing[2m > [22mshould apply tax calculations to deal correctly[32m 15[2mms[22m[39m
[31m   â†’ expected 1834.1 to be close to 1825.59, received difference is 8.509999999999991, but expected 0.05[39m
 [32mâœ“[39m src/modules/deal/__tests__/deal-creation.integration.test.ts[2m > [22mDeal Creation Integration[2m > [22mDeal Scenarios and Variations[2m > [22mshould create multiple scenarios for same deal[32m 1[2mms[22m[39m
 [32mâœ“[39m src/modules/deal/__tests__/deal-creation.integration.test.ts[2m > [22mDeal Creation Integration[2m > [22mDeal Scenarios and Variations[2m > [22mshould allow marking scenario as active[32m 1[2mms[22m[39m
 [32mâœ“[39m src/modules/deal/__tests__/deal-creation.integration.test.ts[2m > [22mDeal Creation Integration[2m > [22mDeal Status Transitions[2m > [22mshould transition deal through valid statuses[32m 1[2mms[22m[39m
 [32mâœ“[39m src/modules/deal/__tests__/deal-creation.integration.test.ts[2m > [22mDeal Creation Integration[2m > [22mDeal Status Transitions[2m > [22mshould prevent invalid status transitions[32m 1[2mms[22m[39m
 [32mâœ“[39m src/modules/deal/__tests__/deal-creation.integration.test.ts[2m > [22mDeal Creation Integration[2m > [22mDeal PDF Generation[2m > [22mshould generate PDF with deal information[32m 0[2mms[22m[39m
 [32mâœ“[39m src/modules/deal/__tests__/deal-creation.integration.test.ts[2m > [22mDeal Creation Integration[2m > [22mLender Rate Shopping[2m > [22mshould request rates from multiple lenders[32m 0[2mms[22m[39m
[90mstdout[2m | server/__tests__/payment-calculation.test.ts
[22m[39m[DB Service] Database service initialized

[90mstdout[2m | server/__tests__/payment-calculation.test.ts[2m > [22m[2mPayment Calculation Integration Tests
[22m[39m[Test Setup] Initializing test database...

[90mstderr[2m | server/__tests__/payment-calculation.test.ts[2m > [22m[2mPayment Calculation Integration Tests
[22m[39m[Test Setup] Failed to initialize test database: ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

[90mstdout[2m | server/__tests__/payment-calculation.test.ts[2m > [22m[2mPayment Calculation Integration Tests
[22m[39m[Test Cleanup] Cleaning up test data...

[90mstderr[2m | server/__tests__/payment-calculation.test.ts[2m > [22m[2mPayment Calculation Integration Tests
[22m[39m[Test Cleanup] Failed to clean test data: ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

 [2m[90mâ†“[39m[22m server/__tests__/payment-calculation.test.ts[2m > [22mPayment Calculation Integration Tests[2m > [22mFinance Payment Calculations[2m > [22mshould calculate correct monthly payment for standard finance
 [2m[90mâ†“[39m[22m server/__tests__/payment-calculation.test.ts[2m > [22mPayment Calculation Integration Tests[2m > [22mFinance Payment Calculations[2m > [22mshould handle zero down payment
 [2m[90mâ†“[39m[22m server/__tests__/payment-calculation.test.ts[2m > [22mPayment Calculation Integration Tests[2m > [22mFinance Payment Calculations[2m > [22mshould handle negative equity from trade
 [2m[90mâ†“[39m[22m server/__tests__/payment-calculation.test.ts[2m > [22mPayment Calculation Integration Tests[2m > [22mFinance Payment Calculations[2m > [22mshould handle different term lengths correctly
 [2m[90mâ†“[39m[22m server/__tests__/payment-calculation.test.ts[2m > [22mPayment Calculation Integration Tests[2m > [22mLease Payment Calculations[2m > [22mshould calculate lease payment with money factor
 [2m[90mâ†“[39m[22m server/__tests__/payment-calculation.test.ts[2m > [22mPayment Calculation Integration Tests[2m > [22mLease Payment Calculations[2m > [22mshould handle high residual value (lower payment)
 [2m[90mâ†“[39m[22m server/__tests__/payment-calculation.test.ts[2m > [22mPayment Calculation Integration Tests[2m > [22mEdge Cases[2m > [22mshould handle very short term (12 months)
 [2m[90mâ†“[39m[22m server/__tests__/payment-calculation.test.ts[2m > [22mPayment Calculation Integration Tests[2m > [22mEdge Cases[2m > [22mshould handle very long term (84 months)
 [2m[90mâ†“[39m[22m server/__tests__/payment-calculation.test.ts[2m > [22mPayment Calculation Integration Tests[2m > [22mEdge Cases[2m > [22mshould maintain penny precision
 [2m[90mâ†“[39m[22m server/__tests__/payment-calculation.test.ts[2m > [22mPayment Calculation Integration Tests[2m > [22mEdge Cases[2m > [22mshould handle zero APR (promotional financing)
 [2m[90mâ†“[39m[22m server/__tests__/payment-calculation.test.ts[2m > [22mPayment Calculation Integration Tests[2m > [22mEdge Cases[2m > [22mshould handle high APR (subprime)
 [2m[90mâ†“[39m[22m server/__tests__/payment-calculation.test.ts[2m > [22mPayment Calculation Integration Tests[2m > [22mRebates and Incentives[2m > [22mshould apply rebates to reduce amount financed
 [31mÃ—[39m src/modules/tax/__tests__/tax-calculation.integration.test.ts[2m > [22mTax Calculation Integration[2m > [22mMulti-State Tax Calculations[2m > [22mshould calculate Arizona tax correctly[32m 11[2mms[22m[39m
[31m   â†’ expected 1834.18 to be close to 1825.59, received difference is 8.590000000000146, but expected 0.05[39m
 [32mâœ“[39m src/modules/tax/__tests__/tax-calculation.integration.test.ts[2m > [22mTax Calculation Integration[2m > [22mMulti-State Tax Calculations[2m > [22mshould calculate Texas tax correctly[32m 1[2mms[22m[39m
 [31mÃ—[39m src/modules/tax/__tests__/tax-calculation.integration.test.ts[2m > [22mTax Calculation Integration[2m > [22mMulti-State Tax Calculations[2m > [22mshould calculate California tax correctly[32m 2[2mms[22m[39m
[31m   â†’ expected 2125 to be close to 2062.5, received difference is 62.5, but expected 0.05[39m
 [32mâœ“[39m src/modules/tax/__tests__/tax-calculation.integration.test.ts[2m > [22mTax Calculation Integration[2m > [22mMulti-State Tax Calculations[2m > [22mshould calculate Florida tax correctly[32m 0[2mms[22m[39m
 [31mÃ—[39m src/modules/tax/__tests__/tax-calculation.integration.test.ts[2m > [22mTax Calculation Integration[2m > [22mTax Exemptions and Credits[2m > [22mshould apply trade-in tax credit correctly[32m 1[2mms[22m[39m
[31m   â†’ expected 1109.18 to be close to 1108.52, received difference is 0.6600000000000819, but expected 0.05[39m
 [31mÃ—[39m src/modules/tax/__tests__/tax-calculation.integration.test.ts[2m > [22mTax Calculation Integration[2m > [22mTax Exemptions and Credits[2m > [22mshould handle document fee taxation rules[32m 1[2mms[22m[39m
[31m   â†’ expected 1581.19 to be close to 1583.69, received difference is 2.5, but expected 0.05[39m
 [32mâœ“[39m src/modules/tax/__tests__/tax-calculation.integration.test.ts[2m > [22mTax Calculation Integration[2m > [22mTax Exemptions and Credits[2m > [22mshould apply tax exemptions for exempt customers[32m 0[2mms[22m[39m
 [32mâœ“[39m src/modules/tax/__tests__/tax-calculation.integration.test.ts[2m > [22mTax Calculation Integration[2m > [22mLease vs. Finance Taxation[2m > [22mshould calculate tax differently for lease transactions[32m 1[2mms[22m[39m
 [32mâœ“[39m src/modules/tax/__tests__/tax-calculation.integration.test.ts[2m > [22mTax Calculation Integration[2m > [22mLease vs. Finance Taxation[2m > [22mshould calculate tax for financed transactions[32m 1[2mms[22m[39m
 [32mâœ“[39m src/modules/tax/__tests__/tax-calculation.integration.test.ts[2m > [22mTax Calculation Integration[2m > [22mTax Line Item Breakdown[2m > [22mshould create detailed tax breakdown[32m 1[2mms[22m[39m
 [32mâœ“[39m src/modules/tax/__tests__/tax-calculation.integration.test.ts[2m > [22mTax Calculation Integration[2m > [22mTax Jurisdiction Lookup[2m > [22mshould find correct jurisdiction for zip code[32m 0[2mms[22m[39m
 [32mâœ“[39m src/modules/tax/__tests__/tax-calculation.integration.test.ts[2m > [22mTax Calculation Integration[2m > [22mTax Jurisdiction Lookup[2m > [22mshould handle unknown zip codes gracefully[32m 1[2mms[22m[39m
 [32mâœ“[39m src/modules/tax/__tests__/tax-calculation.integration.test.ts[2m > [22mTax Calculation Integration[2m > [22mTax Calculation Validation[2m > [22mshould validate minimum tax calculation[32m 1[2mms[22m[39m
 [32mâœ“[39m src/modules/tax/__tests__/tax-calculation.integration.test.ts[2m > [22mTax Calculation Integration[2m > [22mTax Calculation Validation[2m > [22mshould validate maximum tax calculation[32m 0[2mms[22m[39m
 [32mâœ“[39m src/modules/tax/__tests__/tax-calculation.integration.test.ts[2m > [22mTax Calculation Integration[2m > [22mTax Calculation Validation[2m > [22mshould prevent negative tax amounts[32m 1[2mms[22m[39m
[90mstdout[2m | src/modules/customer/__tests__/customer.integration.test.ts
[22m[39m[DB Service] Database service initialized

[90mstderr[2m | src/modules/customer/__tests__/customer.integration.test.ts[2m > [22m[2mCustomer API Integration[2m > [22m[2mPOST /api/customers[2m > [22m[2mshould create a new customer with valid data
[22m[39m[StorageService] findDuplicateCustomers error: ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

[90mstderr[2m | src/modules/customer/__tests__/customer.integration.test.ts[2m > [22m[2mCustomer API Integration[2m > [22m[2mPOST /api/customers[2m > [22m[2mshould create a new customer with valid data
[22m[39m[Customer API] ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

[90mstderr[2m | src/modules/customer/__tests__/customer.integration.test.ts[2m > [22m[2mCustomer API Integration[2m > [22m[2mPOST /api/customers[2m > [22m[2mshould reject customer without email or phone
[22m[39m[Customer API] ZodError: [
  {
    "code": "custom",
    "message": "Either email or phone is required",
    "path": [
      "email"
    ]
  }
]
    at Object.get error [as error] [90m(file:///root/autolytiq-desk-studio/[39mnode_modules/[4mzod[24m/v3/types.js:39:31[90m)[39m
    at ZodEffects.parse [90m(file:///root/autolytiq-desk-studio/[39mnode_modules/[4mzod[24m/v3/types.js:114:22[90m)[39m
    at [90m/root/autolytiq-desk-studio/[39msrc/modules/customer/api/customer.routes.ts:118:46
    at [90m/root/autolytiq-desk-studio/[39msrc/modules/customer/api/customer.routes.ts:51:13
    at Layer.handle [as handle_request] [90m(/root/autolytiq-desk-studio/[39mnode_modules/[4mexpress[24m/lib/router/layer.js:95:5[90m)[39m
    at next [90m(/root/autolytiq-desk-studio/[39mnode_modules/[4mexpress[24m/lib/router/route.js:149:13[90m)[39m
    at Route.dispatch [90m(/root/autolytiq-desk-studio/[39mnode_modules/[4mexpress[24m/lib/router/route.js:119:3[90m)[39m
    at Layer.handle [as handle_request] [90m(/root/autolytiq-desk-studio/[39mnode_modules/[4mexpress[24m/lib/router/layer.js:95:5[90m)[39m
    at [90m/root/autolytiq-desk-studio/[39mnode_modules/[4mexpress[24m/lib/router/index.js:284:15
    at Function.process_params [90m(/root/autolytiq-desk-studio/[39mnode_modules/[4mexpress[24m/lib/router/index.js:346:12[90m)[39m {
  issues: [
    {
      code: [32m'custom'[39m,
      message: [32m'Either email or phone is required'[39m,
      path: [36m[Array][39m
    }
  ],
  addIssue: [36m[Function (anonymous)][39m,
  addIssues: [36m[Function (anonymous)][39m,
  errors: [
    {
      code: [32m'custom'[39m,
      message: [32m'Either email or phone is required'[39m,
      path: [36m[Array][39m
    }
  ]
}

[90mstderr[2m | src/modules/customer/__tests__/customer.integration.test.ts[2m > [22m[2mCustomer API Integration[2m > [22m[2mPOST /api/customers[2m > [22m[2mshould reject customer with invalid email
[22m[39m[Customer API] ZodError: [
  {
    "validation": "email",
    "code": "invalid_string",
    "message": "Invalid email format",
    "path": [
      "email"
    ]
  }
]
    at Object.get error [as error] [90m(file:///root/autolytiq-desk-studio/[39mnode_modules/[4mzod[24m/v3/types.js:39:31[90m)[39m
    at ZodEffects.parse [90m(file:///root/autolytiq-desk-studio/[39mnode_modules/[4mzod[24m/v3/types.js:114:22[90m)[39m
    at [90m/root/autolytiq-desk-studio/[39msrc/modules/customer/api/customer.routes.ts:118:46
    at [90m/root/autolytiq-desk-studio/[39msrc/modules/customer/api/customer.routes.ts:51:13
    at Layer.handle [as handle_request] [90m(/root/autolytiq-desk-studio/[39mnode_modules/[4mexpress[24m/lib/router/layer.js:95:5[90m)[39m
    at next [90m(/root/autolytiq-desk-studio/[39mnode_modules/[4mexpress[24m/lib/router/route.js:149:13[90m)[39m
    at Route.dispatch [90m(/root/autolytiq-desk-studio/[39mnode_modules/[4mexpress[24m/lib/router/route.js:119:3[90m)[39m
    at Layer.handle [as handle_request] [90m(/root/autolytiq-desk-studio/[39mnode_modules/[4mexpress[24m/lib/router/layer.js:95:5[90m)[39m
    at [90m/root/autolytiq-desk-studio/[39mnode_modules/[4mexpress[24m/lib/router/index.js:284:15
    at Function.process_params [90m(/root/autolytiq-desk-studio/[39mnode_modules/[4mexpress[24m/lib/router/index.js:346:12[90m)[39m {
  issues: [
    {
      validation: [32m'email'[39m,
      code: [32m'invalid_string'[39m,
      message: [32m'Invalid email format'[39m,
      path: [36m[Array][39m
    }
  ],
  addIssue: [36m[Function (anonymous)][39m,
  addIssues: [36m[Function (anonymous)][39m,
  errors: [
    {
      validation: [32m'email'[39m,
      code: [32m'invalid_string'[39m,
      message: [32m'Invalid email format'[39m,
      path: [36m[Array][39m
    }
  ]
}

[90mstderr[2m | src/modules/customer/__tests__/customer.integration.test.ts[2m > [22m[2mCustomer API Integration[2m > [22m[2mGET /api/customers[2m > [22m[2mshould list customers with pagination
[22m[39m[StorageService] listCustomers error: ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

[90mstderr[2m | src/modules/customer/__tests__/customer.integration.test.ts[2m > [22m[2mCustomer API Integration[2m > [22m[2mGET /api/customers[2m > [22m[2mshould list customers with pagination
[22m[39m[Customer API] ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

[90mstderr[2m | src/modules/customer/__tests__/customer.integration.test.ts[2m > [22m[2mCustomer API Integration[2m > [22m[2mGET /api/customers[2m > [22m[2mshould filter customers by status
[22m[39m[StorageService] listCustomers error: ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

[90mstderr[2m | src/modules/customer/__tests__/customer.integration.test.ts[2m > [22m[2mCustomer API Integration[2m > [22m[2mGET /api/customers[2m > [22m[2mshould filter customers by status
[22m[39m[Customer API] ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

[90mstderr[2m | src/modules/customer/__tests__/customer.integration.test.ts[2m > [22m[2mCustomer API Integration[2m > [22m[2mGET /api/customers[2m > [22m[2mshould search customers by name
[22m[39m[StorageService] listCustomers error: ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

[90mstderr[2m | src/modules/customer/__tests__/customer.integration.test.ts[2m > [22m[2mCustomer API Integration[2m > [22m[2mGET /api/customers[2m > [22m[2mshould search customers by name
[22m[39m[Customer API] ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

 [32mâœ“[39m src/modules/customer/__tests__/customer.integration.test.ts[2m > [22mCustomer API Integration[2m > [22mPOST /api/customers[2m > [22mshould create a new customer with valid data[32m 161[2mms[22m[39m
 [32mâœ“[39m src/modules/customer/__tests__/customer.integration.test.ts[2m > [22mCustomer API Integration[2m > [22mPOST /api/customers[2m > [22mshould reject customer without email or phone[32m 20[2mms[22m[39m
 [32mâœ“[39m src/modules/customer/__tests__/customer.integration.test.ts[2m > [22mCustomer API Integration[2m > [22mPOST /api/customers[2m > [22mshould reject customer with invalid email[32m 10[2mms[22m[39m
 [32mâœ“[39m src/modules/customer/__tests__/customer.integration.test.ts[2m > [22mCustomer API Integration[2m > [22mGET /api/customers[2m > [22mshould list customers with pagination[32m 21[2mms[22m[39m
 [32mâœ“[39m src/modules/customer/__tests__/customer.integration.test.ts[2m > [22mCustomer API Integration[2m > [22mGET /api/customers[2m > [22mshould filter customers by status[32m 17[2mms[22m[39m
 [32mâœ“[39m src/modules/customer/__tests__/customer.integration.test.ts[2m > [22mCustomer API Integration[2m > [22mGET /api/customers[2m > [22mshould search customers by name[32m 17[2mms[22m[39m
[90mstderr[2m | src/modules/customer/__tests__/customer.integration.test.ts[2m > [22m[2mCustomer API Integration[2m > [22m[2mGET /api/customers/search[2m > [22m[2mshould return fast search results
[22m[39m[StorageService] searchCustomers error: ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

[90mstderr[2m | src/modules/customer/__tests__/customer.integration.test.ts[2m > [22m[2mCustomer API Integration[2m > [22m[2mGET /api/customers/search[2m > [22m[2mshould return fast search results
[22m[39m[Customer API] ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

[90mstderr[2m | src/modules/customer/__tests__/customer.integration.test.ts[2m > [22m[2mCustomer API Integration[2m > [22m[2mGET /api/customers/:id[2m > [22m[2mshould get customer by ID
[22m[39m[StorageService] getCustomer error: ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

[90mstderr[2m | src/modules/customer/__tests__/customer.integration.test.ts[2m > [22m[2mCustomer API Integration[2m > [22m[2mGET /api/customers/:id[2m > [22m[2mshould get customer by ID
[22m[39m[Customer API] ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

[90mstderr[2m | src/modules/customer/__tests__/customer.integration.test.ts[2m > [22m[2mCustomer API Integration[2m > [22m[2mGET /api/customers/:id[2m > [22m[2mshould return 404 for non-existent customer
[22m[39m[StorageService] getCustomer error: ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

[90mstderr[2m | src/modules/customer/__tests__/customer.integration.test.ts[2m > [22m[2mCustomer API Integration[2m > [22m[2mGET /api/customers/:id[2m > [22m[2mshould return 404 for non-existent customer
[22m[39m[Customer API] ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

[90mstderr[2m | src/modules/customer/__tests__/customer.integration.test.ts[2m > [22m[2mCustomer API Integration[2m > [22m[2mPATCH /api/customers/:id[2m > [22m[2mshould update customer
[22m[39m[StorageService] getCustomer error: ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

[90mstderr[2m | src/modules/customer/__tests__/customer.integration.test.ts[2m > [22m[2mCustomer API Integration[2m > [22m[2mPATCH /api/customers/:id[2m > [22m[2mshould update customer
[22m[39m[Customer API] ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

[90mstderr[2m | src/modules/customer/__tests__/customer.integration.test.ts[2m > [22m[2mCustomer API Integration[2m > [22m[2mDELETE /api/customers/:id[2m > [22m[2mshould soft delete customer
[22m[39m[StorageService] getCustomer error: ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

[90mstderr[2m | src/modules/customer/__tests__/customer.integration.test.ts[2m > [22m[2mCustomer API Integration[2m > [22m[2mDELETE /api/customers/:id[2m > [22m[2mshould soft delete customer
[22m[39m[StorageService] deleteCustomer error: ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

[90mstderr[2m | src/modules/customer/__tests__/customer.integration.test.ts[2m > [22m[2mCustomer API Integration[2m > [22m[2mDELETE /api/customers/:id[2m > [22m[2mshould soft delete customer
[22m[39m[Customer API] ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

 [32mâœ“[39m src/modules/customer/__tests__/customer.integration.test.ts[2m > [22mCustomer API Integration[2m > [22mGET /api/customers/search[2m > [22mshould return fast search results[32m 21[2mms[22m[39m
 [32mâœ“[39m src/modules/customer/__tests__/customer.integration.test.ts[2m > [22mCustomer API Integration[2m > [22mGET /api/customers/search[2m > [22mshould return empty array for empty query[32m 6[2mms[22m[39m
 [32mâœ“[39m src/modules/customer/__tests__/customer.integration.test.ts[2m > [22mCustomer API Integration[2m > [22mGET /api/customers/:id[2m > [22mshould get customer by ID[32m 19[2mms[22m[39m
 [32mâœ“[39m src/modules/customer/__tests__/customer.integration.test.ts[2m > [22mCustomer API Integration[2m > [22mGET /api/customers/:id[2m > [22mshould return 404 for non-existent customer[32m 18[2mms[22m[39m
 [32mâœ“[39m src/modules/customer/__tests__/customer.integration.test.ts[2m > [22mCustomer API Integration[2m > [22mPATCH /api/customers/:id[2m > [22mshould update customer[32m 21[2mms[22m[39m
[90mstderr[2m | src/modules/customer/__tests__/customer.integration.test.ts[2m > [22m[2mCustomer API Integration[2m > [22m[2mPOST /api/customers/find-duplicates[2m > [22m[2mshould find duplicate customers
[22m[39m[StorageService] findDuplicateCustomers error: ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

[90mstderr[2m | src/modules/customer/__tests__/customer.integration.test.ts[2m > [22m[2mCustomer API Integration[2m > [22m[2mPOST /api/customers/find-duplicates[2m > [22m[2mshould find duplicate customers
[22m[39m[Customer API] ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

[90mstderr[2m | src/modules/customer/__tests__/customer.integration.test.ts[2m > [22m[2mCustomer API Integration[2m > [22m[2mGET /api/customers/:id/timeline[2m > [22m[2mshould get customer timeline
[22m[39m[StorageService] getCustomer error: ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

[90mstderr[2m | src/modules/customer/__tests__/customer.integration.test.ts[2m > [22m[2mCustomer API Integration[2m > [22m[2mGET /api/customers/:id/timeline[2m > [22m[2mshould get customer timeline
[22m[39m[Customer API] ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

[90mstderr[2m | src/modules/customer/__tests__/customer.integration.test.ts[2m > [22m[2mCustomer API Integration[2m > [22m[2mGET /api/customers/:id/notes[2m > [22m[2mshould get customer notes
[22m[39m[StorageService] getCustomer error: ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

[90mstderr[2m | src/modules/customer/__tests__/customer.integration.test.ts[2m > [22m[2mCustomer API Integration[2m > [22m[2mGET /api/customers/:id/notes[2m > [22m[2mshould get customer notes
[22m[39m[Customer API] ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

[90mstderr[2m | src/modules/customer/__tests__/customer.integration.test.ts[2m > [22m[2mCustomer API Integration[2m > [22m[2mPOST /api/customers/:id/notes[2m > [22m[2mshould create customer note
[22m[39m[StorageService] getCustomer error: ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

[90mstderr[2m | src/modules/customer/__tests__/customer.integration.test.ts[2m > [22m[2mCustomer API Integration[2m > [22m[2mPOST /api/customers/:id/notes[2m > [22m[2mshould create customer note
[22m[39m[Customer API] ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

[90mstderr[2m | src/modules/customer/__tests__/customer.integration.test.ts[2m > [22m[2mCustomer API Integration[2m > [22m[2mMulti-tenant isolation[2m > [22m[2mshould only return customers for authenticated user dealership
[22m[39m[StorageService] listCustomers error: ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

[90mstderr[2m | src/modules/customer/__tests__/customer.integration.test.ts[2m > [22m[2mCustomer API Integration[2m > [22m[2mMulti-tenant isolation[2m > [22m[2mshould only return customers for authenticated user dealership
[22m[39m[Customer API] ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

 [32mâœ“[39m src/modules/customer/__tests__/customer.integration.test.ts[2m > [22mCustomer API Integration[2m > [22mDELETE /api/customers/:id[2m > [22mshould soft delete customer[32m 24[2mms[22m[39m
 [32mâœ“[39m src/modules/customer/__tests__/customer.integration.test.ts[2m > [22mCustomer API Integration[2m > [22mPOST /api/customers/find-duplicates[2m > [22mshould find duplicate customers[32m 17[2mms[22m[39m
 [32mâœ“[39m src/modules/customer/__tests__/customer.integration.test.ts[2m > [22mCustomer API Integration[2m > [22mGET /api/customers/:id/timeline[2m > [22mshould get customer timeline[32m 20[2mms[22m[39m
 [32mâœ“[39m src/modules/customer/__tests__/customer.integration.test.ts[2m > [22mCustomer API Integration[2m > [22mGET /api/customers/:id/notes[2m > [22mshould get customer notes[32m 17[2mms[22m[39m
 [32mâœ“[39m src/modules/customer/__tests__/customer.integration.test.ts[2m > [22mCustomer API Integration[2m > [22mPOST /api/customers/:id/notes[2m > [22mshould create customer note[32m 19[2mms[22m[39m
 [32mâœ“[39m src/modules/customer/__tests__/customer.integration.test.ts[2m > [22mCustomer API Integration[2m > [22mMulti-tenant isolation[2m > [22mshould only return customers for authenticated user dealership[32m 18[2mms[22m[39m
[90mstderr[2m | src/modules/customer/__tests__/customer.integration.test.ts[2m > [22m[2mCustomer API Integration[2m > [22m[2mMulti-tenant isolation[2m > [22m[2mshould not allow access to customers from other dealerships
[22m[39m[StorageService] getCustomer error: ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

[90mstderr[2m | src/modules/customer/__tests__/customer.integration.test.ts[2m > [22m[2mCustomer API Integration[2m > [22m[2mMulti-tenant isolation[2m > [22m[2mshould not allow access to customers from other dealerships
[22m[39m[Customer API] ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

 [32mâœ“[39m src/modules/customer/__tests__/customer.integration.test.ts[2m > [22mCustomer API Integration[2m > [22mMulti-tenant isolation[2m > [22mshould not allow access to customers from other dealerships[32m 18[2mms[22m[39m
[90mstdout[2m | src/modules/customer/__tests__/customer.service.test.ts
[22m[39m[DB Service] Database service initialized

[90mstderr[2m | src/modules/customer/__tests__/customer.service.test.ts[2m > [22m[2mCustomerService[2m > [22m[2mgetCustomer[2m > [22m[2mshould throw CustomerNotFoundError when customer does not exist
[22m[39m[StorageService] getCustomer error: ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

 [32mâœ“[39m src/modules/customer/__tests__/customer.service.test.ts[2m > [22mCustomerService[2m > [22mcreateCustomer[2m > [22mshould require either email or phone[32m 7[2mms[22m[39m
 [32mâœ“[39m src/modules/customer/__tests__/customer.service.test.ts[2m > [22mCustomerService[2m > [22mcreateCustomer[2m > [22mshould normalize phone numbers to E.164 format[32m 1[2mms[22m[39m
 [32mâœ“[39m src/modules/customer/__tests__/customer.service.test.ts[2m > [22mCustomerService[2m > [22mcreateCustomer[2m > [22mshould validate email format[32m 1[2mms[22m[39m
[90mstderr[2m | src/modules/customer/__tests__/customer.service.test.ts[2m > [22m[2mCustomerService[2m > [22m[2mupdateCustomer[2m > [22m[2mshould validate updated data
[22m[39m[StorageService] getCustomer error: ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

[90mstderr[2m | src/modules/customer/__tests__/customer.service.test.ts[2m > [22m[2mCustomerService[2m > [22m[2mMulti-tenant isolation[2m > [22m[2mshould enforce dealershipId on all operations
[22m[39m[StorageService] getCustomer error: ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

[90mstderr[2m | src/modules/customer/__tests__/customer.service.test.ts[2m > [22m[2mCustomerService[2m > [22m[2mMulti-tenant isolation[2m > [22m[2mshould enforce dealershipId on all operations
[22m[39m[StorageService] searchCustomers error: ErrorEvent {
  [[32mSymbol(kTarget)[39m]: WebSocket {
    _events: [Object: null prototype] {
      error: [36m[Function][39m,
      message: [36m[Function][39m,
      close: [36m[Function][39m,
      open: [36m[Function][39m
    },
    _eventsCount: [33m4[39m,
    _maxListeners: [90mundefined[39m,
    _binaryType: [32m'arraybuffer'[39m,
    _closeCode: [33m1006[39m,
    _closeFrameReceived: [33mfalse[39m,
    _closeFrameSent: [33mfalse[39m,
    _closeMessage: <Buffer >,
    _closeTimer: [1mnull[22m,
    _errorEmitted: [33mtrue[39m,
    _extensions: {},
    _paused: [33mfalse[39m,
    _protocol: [32m''[39m,
    _readyState: [33m3[39m,
    _receiver: [1mnull[22m,
    _sender: [1mnull[22m,
    _socket: [1mnull[22m,
    _bufferedAmount: [33m0[39m,
    _isServer: [33mfalse[39m,
    _redirects: [33m0[39m,
    _autoPong: [33mtrue[39m,
    _url: [32m'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2'[39m,
    _req: [1mnull[22m,
    [[32mSymbol(shapeMode)[39m]: [33mfalse[39m,
    [[32mSymbol(kCapture)[39m]: [33mfalse[39m
  },
  [[32mSymbol(kType)[39m]: [32m'error'[39m,
  [[32mSymbol(kError)[39m]: Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
  },
  [[32mSymbol(kMessage)[39m]: [32m'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com'[39m
}

 [31mÃ—[39m src/modules/customer/__tests__/customer.service.test.ts[2m > [22mCustomerService[2m > [22mgetCustomer[2m > [22mshould throw CustomerNotFoundError when customer does not exist[32m 136[2mms[22m[39m
[31m   â†’ expected error to be instance of CustomerNotFoundError[39m
 [32mâœ“[39m src/modules/customer/__tests__/customer.service.test.ts[2m > [22mCustomerService[2m > [22mupdateCustomer[2m > [22mshould validate updated data[32m 27[2mms[22m[39m
 [32mâœ“[39m src/modules/customer/__tests__/customer.service.test.ts[2m > [22mCustomerService[2m > [22msearchCustomers[2m > [22mshould return empty array for empty search query[32m 2[2mms[22m[39m
 [32mâœ“[39m src/modules/customer/__tests__/customer.service.test.ts[2m > [22mCustomerService[2m > [22msearchCustomers[2m > [22mshould return empty array for whitespace-only search query[32m 1[2mms[22m[39m
 [32mâœ“[39m src/modules/customer/__tests__/customer.service.test.ts[2m > [22mCustomerService[2m > [22mvalidateCustomer[2m > [22mshould validate required fields[32m 1[2mms[22m[39m
 [32mâœ“[39m src/modules/customer/__tests__/customer.service.test.ts[2m > [22mCustomerService[2m > [22mvalidateCustomer[2m > [22mshould detect invalid phone numbers[32m 1[2mms[22m[39m
 [31mÃ—[39m src/modules/customer/__tests__/customer.service.test.ts[2m > [22mCustomerService[2m > [22mvalidateCustomer[2m > [22mshould detect invalid ZIP codes[32m 5[2mms[22m[39m
[31m   â†’ expected false to be true // Object.is equality[39m
 [31mÃ—[39m src/modules/customer/__tests__/customer.service.test.ts[2m > [22mCustomerService[2m > [22mMulti-tenant isolation[2m > [22mshould enforce dealershipId on all operations[32m 27[2mms[22m[39m
[31m   â†’ getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com[39m
[90mstdout[2m | src/modules/email/__tests__/email.module.test.ts
[22m[39m[DB Service] Database service initialized

[90mstdout[2m | src/modules/email/__tests__/email.module.test.ts
[22m[39m[EmailQueue] Starting queue processor

[90mstdout[2m | src/modules/email/__tests__/email.module.test.ts[2m > [22m[2mEmail Module[2m > [22m[2mType Validation[2m > [22m[2mshould validate email send request
[22m[39m[EmailQueue] Email enqueued: {
  queueId: [32m'8IHnueED9FhcHFj0b8UK6'[39m,
  tenantId: [32m'test-tenant-123'[39m,
  priority: [32m'normal'[39m,
  to: [ [32m'test@example.com'[39m ]
}

[90mstdout[2m | src/modules/email/__tests__/email.module.test.ts[2m > [22m[2mEmail Module[2m > [22m[2mType Validation[2m > [22m[2mshould reject invalid email addresses
[22m[39m[EmailQueue] Email enqueued: {
  queueId: [32m'qJ26iN09l-5MY9zvFbhw5'[39m,
  tenantId: [32m'test-tenant-123'[39m,
  priority: [32m'normal'[39m,
  to: [ [32m'invalid-email'[39m ]
}

[90mstdout[2m | src/modules/email/__tests__/email.module.test.ts[2m > [22m[2mEmail Module[2m > [22m[2mType Validation[2m > [22m[2mshould reject empty recipients
[22m[39m[EmailQueue] Email enqueued: {
  queueId: [32m'BwxTKHU1Jo2bmZWlKOd8i'[39m,
  tenantId: [32m'test-tenant-123'[39m,
  priority: [32m'normal'[39m,
  to: []
}

[90mstdout[2m | src/modules/email/__tests__/email.module.test.ts[2m > [22m[2mEmail Module[2m > [22m[2mType Validation[2m > [22m[2mshould reject missing subject
[22m[39m[EmailQueue] Email enqueued: {
  queueId: [32m'laHRvFHz3C_pCGk0P44Wu'[39m,
  tenantId: [32m'test-tenant-123'[39m,
  priority: [32m'normal'[39m,
  to: [ [32m'test@example.com'[39m ]
}

[90mstdout[2m | src/modules/email/__tests__/email.module.test.ts[2m > [22m[2mEmail Module[2m > [22m[2mQueue System[2m > [22m[2mshould enqueue emails
[22m[39m[EmailQueue] Email enqueued: {
  queueId: [32m'7mXMcXrF4vvMumzTyHI0U'[39m,
  tenantId: [32m'test-tenant-123'[39m,
  priority: [32m'normal'[39m,
  to: [ [32m'test@example.com'[39m ]
}

[90mstdout[2m | src/modules/email/__tests__/email.module.test.ts[2m > [22m[2mEmail Module[2m > [22m[2mError Handling[2m > [22m[2mshould throw EmailModuleError for validation errors
[22m[39m[EmailQueue] Email enqueued: {
  queueId: [32m'ltXJTOtH-V3qVaDiZumCt'[39m,
  tenantId: [32m'test-tenant-123'[39m,
  priority: [32m'normal'[39m,
  to: []
}

 [32mâœ“[39m src/modules/email/__tests__/email.module.test.ts[2m > [22mEmail Module[2m > [22mType Validation[2m > [22mshould validate email send request[32m 8[2mms[22m[39m
 [31mÃ—[39m src/modules/email/__tests__/email.module.test.ts[2m > [22mEmail Module[2m > [22mType Validation[2m > [22mshould reject invalid email addresses[32m 18[2mms[22m[39m
[31m   â†’ promise resolved "{ success: true, â€¦(2) }" instead of rejecting[39m
 [31mÃ—[39m src/modules/email/__tests__/email.module.test.ts[2m > [22mEmail Module[2m > [22mType Validation[2m > [22mshould reject empty recipients[32m 5[2mms[22m[39m
[31m   â†’ promise resolved "{ success: true, â€¦(2) }" instead of rejecting[39m
 [31mÃ—[39m src/modules/email/__tests__/email.module.test.ts[2m > [22mEmail Module[2m > [22mType Validation[2m > [22mshould reject missing subject[32m 4[2mms[22m[39m
[31m   â†’ promise resolved "{ success: true, â€¦(2) }" instead of rejecting[39m
 [32mâœ“[39m src/modules/email/__tests__/email.module.test.ts[2m > [22mEmail Module[2m > [22mQueue System[2m > [22mshould return queue stats[32m 2[2mms[22m[39m
 [32mâœ“[39m src/modules/email/__tests__/email.module.test.ts[2m > [22mEmail Module[2m > [22mQueue System[2m > [22mshould enqueue emails[32m 3[2mms[22m[39m
 [32mâœ“[39m src/modules/email/__tests__/email.module.test.ts[2m > [22mEmail Module[2m > [22mError Handling[2m > [22mshould throw EmailModuleError for validation errors[32m 2[2mms[22m[39m
 [32mâœ“[39m src/modules/email/__tests__/email.module.test.ts[2m > [22mEmail Module[2m > [22mModule Integration[2m > [22mshould expose all required functions[32m 1[2mms[22m[39m

[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m[1m[41m Failed Suites 11 [49m[22m[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m

[41m[1m FAIL [22m[49m server/__tests__/auth-permissions.test.ts[2m > [22mAuth & Permissions Integration Tests
[31m[1mUnknown Error[22m: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com[39m
[90m [2mâ¯[22m node_modules/@neondatabase/serverless/index.mjs:[2m1345:74[22m[39m
[90m [2mâ¯[22m NeonPreparedQuery.execute node_modules/drizzle-orm/neon-serverless/session.js:[2m76:20[22m[39m
[36m [2mâ¯[22m setupTestDatabase server/__tests__/setup.ts:[2m59:32[22m[39m
    [90m 57| [39m
    [90m 58| [39m    [90m// Create test dealership if not exists[39m
    [90m 59| [39m    const existingDealership = await db.query.dealershipSettings.findFâ€¦
    [90m   | [39m                               [31m^[39m
    [90m 60| [39m      where[33m:[39m [34meq[39m(dealershipSettings[33m.[39mdealershipId[33m,[39m [33mTEST_DEALERSHIP_ID[39m)[33m,[39m
    [90m 61| [39m    })[33m;[39m
[90m [2mâ¯[22m server/__tests__/auth-permissions.test.ts:[2m32:5[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[22m[39m
[31m[1mSerialized Error:[22m[39m [90m{ error: { stack: 'Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com\n    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)', message: 'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com', errno: -3008, code: 'ENOTFOUND', syscall: 'getaddrinfo', hostname: 'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com', constructor: 'Function<Error>', name: 'Error', toString: 'Function<toString>' }, target: { _events: { error: 'Function<onError>', message: 'Function<onMessage>', close: 'Function<onClose>', open: 'Function<onOpen>' }, _eventsCount: 4, _maxListeners: undefined, _binaryType: 'arraybuffer', _closeCode: 1006, _closeFrameReceived: false, _closeFrameSent: false, _closeMessage: '<Buffer(0) ...>', _closeTimer: null, _errorEmitted: true, _extensions: {}, _paused: false, _protocol: '', _readyState: 3, _receiver: null, _sender: null, _socket: null, _bufferedAmount: +0, _isServer: false, _redirects: +0, _autoPong: true, _url: 'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2', _req: null, constructor: 'Function<WebSocket>', binaryType: 'arraybuffer', bufferedAmount: +0, extensions: '', isPaused: false, onclose: null, onerror: null, onopen: null, onmessage: null, protocol: '', readyState: 3, url: 'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2', setSocket: 'Function<setSocket>', emitClose: 'Function<emitClose>', close: 'Function<close>', pause: 'Function<pause>', ping: 'Function<ping>', pong: 'Function<pong>', resume: 'Function<resume>', send: 'Function<send>', terminate: 'Function<terminate>', CONNECTING: +0, OPEN: 1, CLOSING: 2, CLOSED: 3, addEventListener: 'Function<addEventListener>', removeEventListener: 'Function<removeEventListener>', setMaxListeners: 'Function<setMaxListeners>', getMaxListeners: 'Function<getMaxListeners>', emit: 'Function<emit>', addListener: 'Function<addListener>', on: 'Function<addListener>', prependListener: 'Function<prependListener>', once: 'Function<once>', prependOnceListener: 'Function<prependOnceListener>', removeListener: 'Function<removeListener>', off: 'Function<removeListener>', removeAllListeners: 'Function<removeAllListeners>', listeners: 'Function<listeners>', rawListeners: 'Function<rawListeners>', listenerCount: 'Function<listenerCount>', eventNames: 'Function<eventNames>' } }[39m
[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1/62]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m server/__tests__/auth-permissions.test.ts[2m > [22mAuth & Permissions Integration Tests
[31m[1mReferenceError[22m: cleanupTestDatabase is not defined[39m
[36m [2mâ¯[22m server/__tests__/auth-permissions.test.ts:[2m41:5[22m[39m
    [90m 39| [39m
    [90m 40| [39m  [34mafterAll[39m([35masync[39m () [33m=>[39m {
    [90m 41| [39m    [35mawait[39m [34mcleanupTestDatabase[39m()[33m;[39m
    [90m   | [39m    [31m^[39m
    [90m 42| [39m  })[33m;[39m
    [90m 43| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[2/62]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m server/__tests__/auth.security.test.ts[2m > [22mAuthentication Security
[31m[1mError[22m: Cannot find module '../../../client/src/lib/queryClient' imported from '/root/autolytiq-desk-studio/src/modules/auth/hooks/useAuth.ts'[39m
[36m [2mâ¯[22m src/modules/auth/hooks/useAuth.ts:[2m13:1[22m[39m
    [90m 11| [39m
    [90m 12| [39m[35mimport[39m { useQuery[33m,[39m useMutation } [35mfrom[39m [32m'@tanstack/react-query'[39m[33m;[39m
    [90m 13| [39mimport { queryClient, apiRequest, getQueryFn } from '../../../client/sâ€¦
    [90m   | [39m[31m^[39m
    [90m 14| [39m[35mimport[39m { useToast } [35mfrom[39m [32m'@/hooks/use-toast'[39m[33m;[39m
    [90m 15| [39m
[90m [2mâ¯[22m src/modules/auth/index.ts:[2m46:1[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[22m[39m
[31m[1mSerialized Error:[22m[39m [90m{ code: 'ERR_MODULE_NOT_FOUND' }[39m
[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[3/62]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m server/__tests__/customer-crud.test.ts[2m > [22mCustomer CRUD Integration Tests
[31m[1mUnknown Error[22m: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com[39m
[90m [2mâ¯[22m node_modules/@neondatabase/serverless/index.mjs:[2m1345:74[22m[39m
[90m [2mâ¯[22m NeonPreparedQuery.execute node_modules/drizzle-orm/neon-serverless/session.js:[2m76:20[22m[39m
[36m [2mâ¯[22m setupTestDatabase server/__tests__/setup.ts:[2m59:32[22m[39m
    [90m 57| [39m
    [90m 58| [39m    [90m// Create test dealership if not exists[39m
    [90m 59| [39m    const existingDealership = await db.query.dealershipSettings.findFâ€¦
    [90m   | [39m                               [31m^[39m
    [90m 60| [39m      where[33m:[39m [34meq[39m(dealershipSettings[33m.[39mdealershipId[33m,[39m [33mTEST_DEALERSHIP_ID[39m)[33m,[39m
    [90m 61| [39m    })[33m;[39m
[90m [2mâ¯[22m server/__tests__/customer-crud.test.ts:[2m43:5[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[22m[39m
[31m[1mSerialized Error:[22m[39m [90m{ error: { stack: 'Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com\n    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)', message: 'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com', errno: -3008, code: 'ENOTFOUND', syscall: 'getaddrinfo', hostname: 'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com', constructor: 'Function<Error>', name: 'Error', toString: 'Function<toString>' }, target: { _events: { error: 'Function<onError>', message: 'Function<onMessage>', close: 'Function<onClose>', open: 'Function<onOpen>' }, _eventsCount: 4, _maxListeners: undefined, _binaryType: 'arraybuffer', _closeCode: 1006, _closeFrameReceived: false, _closeFrameSent: false, _closeMessage: '<Buffer(0) ...>', _closeTimer: null, _errorEmitted: true, _extensions: {}, _paused: false, _protocol: '', _readyState: 3, _receiver: null, _sender: null, _socket: null, _bufferedAmount: +0, _isServer: false, _redirects: +0, _autoPong: true, _url: 'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2', _req: null, constructor: 'Function<WebSocket>', binaryType: 'arraybuffer', bufferedAmount: +0, extensions: '', isPaused: false, onclose: null, onerror: null, onopen: null, onmessage: null, protocol: '', readyState: 3, url: 'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2', setSocket: 'Function<setSocket>', emitClose: 'Function<emitClose>', close: 'Function<close>', pause: 'Function<pause>', ping: 'Function<ping>', pong: 'Function<pong>', resume: 'Function<resume>', send: 'Function<send>', terminate: 'Function<terminate>', CONNECTING: +0, OPEN: 1, CLOSING: 2, CLOSED: 3, addEventListener: 'Function<addEventListener>', removeEventListener: 'Function<removeEventListener>', setMaxListeners: 'Function<setMaxListeners>', getMaxListeners: 'Function<getMaxListeners>', emit: 'Function<emit>', addListener: 'Function<addListener>', on: 'Function<addListener>', prependListener: 'Function<prependListener>', once: 'Function<once>', prependOnceListener: 'Function<prependOnceListener>', removeListener: 'Function<removeListener>', off: 'Function<removeListener>', removeAllListeners: 'Function<removeAllListeners>', listeners: 'Function<listeners>', rawListeners: 'Function<rawListeners>', listenerCount: 'Function<listenerCount>', eventNames: 'Function<eventNames>' } }[39m
[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[4/62]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m server/__tests__/customer-crud.test.ts[2m > [22mCustomer CRUD Integration Tests
[31m[1mUnknown Error[22m: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com[39m
[90m [2mâ¯[22m node_modules/@neondatabase/serverless/index.mjs:[2m1345:74[22m[39m
[36m [2mâ¯[22m cleanupTestData server/__tests__/setup.ts:[2m123:5[22m[39m
    [90m121| [39m
    [90m122| [39m    [90m// Delete in order of dependencies (child â†’ parent)[39m
    [90m123| [39m    [35mawait[39m db[33m.[39m[35mdelete[39m(dealScenarios)[33m.[39m[34mexecute[39m()[33m;[39m
    [90m   | [39m    [31m^[39m
    [90m124| [39m    [35mawait[39m db[33m.[39m[35mdelete[39m(deals)[33m.[39m[34mexecute[39m()[33m;[39m
    [90m125| [39m    [35mawait[39m db[33m.[39m[35mdelete[39m(vehicles)[33m.[39m[34mexecute[39m()[33m;[39m
[90m [2mâ¯[22m server/__tests__/customer-crud.test.ts:[2m52:5[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[22m[39m
[31m[1mSerialized Error:[22m[39m [90m{ error: { stack: 'Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com\n    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)', message: 'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com', errno: -3008, code: 'ENOTFOUND', syscall: 'getaddrinfo', hostname: 'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com', constructor: 'Function<Error>', name: 'Error', toString: 'Function<toString>' }, target: { _events: { error: 'Function<onError>', message: 'Function<onMessage>', close: 'Function<onClose>', open: 'Function<onOpen>' }, _eventsCount: 4, _maxListeners: undefined, _binaryType: 'arraybuffer', _closeCode: 1006, _closeFrameReceived: false, _closeFrameSent: false, _closeMessage: '<Buffer(0) ...>', _closeTimer: null, _errorEmitted: true, _extensions: {}, _paused: false, _protocol: '', _readyState: 3, _receiver: null, _sender: null, _socket: null, _bufferedAmount: +0, _isServer: false, _redirects: +0, _autoPong: true, _url: 'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2', _req: null, constructor: 'Function<WebSocket>', binaryType: 'arraybuffer', bufferedAmount: +0, extensions: '', isPaused: false, onclose: null, onerror: null, onopen: null, onmessage: null, protocol: '', readyState: 3, url: 'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2', setSocket: 'Function<setSocket>', emitClose: 'Function<emitClose>', close: 'Function<close>', pause: 'Function<pause>', ping: 'Function<ping>', pong: 'Function<pong>', resume: 'Function<resume>', send: 'Function<send>', terminate: 'Function<terminate>', CONNECTING: +0, OPEN: 1, CLOSING: 2, CLOSED: 3, addEventListener: 'Function<addEventListener>', removeEventListener: 'Function<removeEventListener>', setMaxListeners: 'Function<setMaxListeners>', getMaxListeners: 'Function<getMaxListeners>', emit: 'Function<emit>', addListener: 'Function<addListener>', on: 'Function<addListener>', prependListener: 'Function<prependListener>', once: 'Function<once>', prependOnceListener: 'Function<prependOnceListener>', removeListener: 'Function<removeListener>', off: 'Function<removeListener>', removeAllListeners: 'Function<removeAllListeners>', listeners: 'Function<listeners>', rawListeners: 'Function<rawListeners>', listenerCount: 'Function<listenerCount>', eventNames: 'Function<eventNames>' } }[39m
[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[5/62]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m server/__tests__/deal-creation.test.ts[2m > [22mDeal Creation Integration Tests
[31m[1mUnknown Error[22m: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com[39m
[90m [2mâ¯[22m node_modules/@neondatabase/serverless/index.mjs:[2m1345:74[22m[39m
[90m [2mâ¯[22m NeonPreparedQuery.execute node_modules/drizzle-orm/neon-serverless/session.js:[2m76:20[22m[39m
[36m [2mâ¯[22m setupTestDatabase server/__tests__/setup.ts:[2m59:32[22m[39m
    [90m 57| [39m
    [90m 58| [39m    [90m// Create test dealership if not exists[39m
    [90m 59| [39m    const existingDealership = await db.query.dealershipSettings.findFâ€¦
    [90m   | [39m                               [31m^[39m
    [90m 60| [39m      where[33m:[39m [34meq[39m(dealershipSettings[33m.[39mdealershipId[33m,[39m [33mTEST_DEALERSHIP_ID[39m)[33m,[39m
    [90m 61| [39m    })[33m;[39m
[90m [2mâ¯[22m server/__tests__/deal-creation.test.ts:[2m51:5[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[22m[39m
[31m[1mSerialized Error:[22m[39m [90m{ error: { stack: 'Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com\n    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)', message: 'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com', errno: -3008, code: 'ENOTFOUND', syscall: 'getaddrinfo', hostname: 'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com', constructor: 'Function<Error>', name: 'Error', toString: 'Function<toString>' }, target: { _events: { error: 'Function<onError>', message: 'Function<onMessage>', close: 'Function<onClose>', open: 'Function<onOpen>' }, _eventsCount: 4, _maxListeners: undefined, _binaryType: 'arraybuffer', _closeCode: 1006, _closeFrameReceived: false, _closeFrameSent: false, _closeMessage: '<Buffer(0) ...>', _closeTimer: null, _errorEmitted: true, _extensions: {}, _paused: false, _protocol: '', _readyState: 3, _receiver: null, _sender: null, _socket: null, _bufferedAmount: +0, _isServer: false, _redirects: +0, _autoPong: true, _url: 'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2', _req: null, constructor: 'Function<WebSocket>', binaryType: 'arraybuffer', bufferedAmount: +0, extensions: '', isPaused: false, onclose: null, onerror: null, onopen: null, onmessage: null, protocol: '', readyState: 3, url: 'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2', setSocket: 'Function<setSocket>', emitClose: 'Function<emitClose>', close: 'Function<close>', pause: 'Function<pause>', ping: 'Function<ping>', pong: 'Function<pong>', resume: 'Function<resume>', send: 'Function<send>', terminate: 'Function<terminate>', CONNECTING: +0, OPEN: 1, CLOSING: 2, CLOSED: 3, addEventListener: 'Function<addEventListener>', removeEventListener: 'Function<removeEventListener>', setMaxListeners: 'Function<setMaxListeners>', getMaxListeners: 'Function<getMaxListeners>', emit: 'Function<emit>', addListener: 'Function<addListener>', on: 'Function<addListener>', prependListener: 'Function<prependListener>', once: 'Function<once>', prependOnceListener: 'Function<prependOnceListener>', removeListener: 'Function<removeListener>', off: 'Function<removeListener>', removeAllListeners: 'Function<removeAllListeners>', listeners: 'Function<listeners>', rawListeners: 'Function<rawListeners>', listenerCount: 'Function<listenerCount>', eventNames: 'Function<eventNames>' } }[39m
[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[6/62]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m server/__tests__/deal-creation.test.ts[2m > [22mDeal Creation Integration Tests
[31m[1mUnknown Error[22m: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com[39m
[90m [2mâ¯[22m node_modules/@neondatabase/serverless/index.mjs:[2m1345:74[22m[39m
[36m [2mâ¯[22m cleanupTestData server/__tests__/setup.ts:[2m123:5[22m[39m
    [90m121| [39m
    [90m122| [39m    [90m// Delete in order of dependencies (child â†’ parent)[39m
    [90m123| [39m    [35mawait[39m db[33m.[39m[35mdelete[39m(dealScenarios)[33m.[39m[34mexecute[39m()[33m;[39m
    [90m   | [39m    [31m^[39m
    [90m124| [39m    [35mawait[39m db[33m.[39m[35mdelete[39m(deals)[33m.[39m[34mexecute[39m()[33m;[39m
    [90m125| [39m    [35mawait[39m db[33m.[39m[35mdelete[39m(vehicles)[33m.[39m[34mexecute[39m()[33m;[39m
[90m [2mâ¯[22m server/__tests__/deal-creation.test.ts:[2m60:5[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[22m[39m
[31m[1mSerialized Error:[22m[39m [90m{ error: { stack: 'Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com\n    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)', message: 'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com', errno: -3008, code: 'ENOTFOUND', syscall: 'getaddrinfo', hostname: 'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com', constructor: 'Function<Error>', name: 'Error', toString: 'Function<toString>' }, target: { _events: { error: 'Function<onError>', message: 'Function<onMessage>', close: 'Function<onClose>', open: 'Function<onOpen>' }, _eventsCount: 4, _maxListeners: undefined, _binaryType: 'arraybuffer', _closeCode: 1006, _closeFrameReceived: false, _closeFrameSent: false, _closeMessage: '<Buffer(0) ...>', _closeTimer: null, _errorEmitted: true, _extensions: {}, _paused: false, _protocol: '', _readyState: 3, _receiver: null, _sender: null, _socket: null, _bufferedAmount: +0, _isServer: false, _redirects: +0, _autoPong: true, _url: 'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2', _req: null, constructor: 'Function<WebSocket>', binaryType: 'arraybuffer', bufferedAmount: +0, extensions: '', isPaused: false, onclose: null, onerror: null, onopen: null, onmessage: null, protocol: '', readyState: 3, url: 'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2', setSocket: 'Function<setSocket>', emitClose: 'Function<emitClose>', close: 'Function<close>', pause: 'Function<pause>', ping: 'Function<ping>', pong: 'Function<pong>', resume: 'Function<resume>', send: 'Function<send>', terminate: 'Function<terminate>', CONNECTING: +0, OPEN: 1, CLOSING: 2, CLOSED: 3, addEventListener: 'Function<addEventListener>', removeEventListener: 'Function<removeEventListener>', setMaxListeners: 'Function<setMaxListeners>', getMaxListeners: 'Function<getMaxListeners>', emit: 'Function<emit>', addListener: 'Function<addListener>', on: 'Function<addListener>', prependListener: 'Function<prependListener>', once: 'Function<once>', prependOnceListener: 'Function<prependOnceListener>', removeListener: 'Function<removeListener>', off: 'Function<removeListener>', removeAllListeners: 'Function<removeAllListeners>', listeners: 'Function<listeners>', rawListeners: 'Function<rawListeners>', listenerCount: 'Function<listenerCount>', eventNames: 'Function<eventNames>' } }[39m
[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[7/62]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m server/__tests__/e2e-user-journeys.test.ts[2m > [22mE2E User Journey Tests
[31m[1mError[22m: Hook timed out in 30000ms.
If this is a long-running hook, pass a timeout value as the last argument or configure it globally with "hookTimeout".[39m
[36m [2mâ¯[22m server/__tests__/e2e-user-journeys.test.ts:[2m39:3[22m[39m
    [90m 37| [39m  [35mlet[39m testContext[33m:[39m [33mReturnType[39m[33m<[39m[35mtypeof[39m getTestContext[33m>[39m[33m;[39m
    [90m 38| [39m
    [90m 39| [39m  [34mbeforeAll[39m([35masync[39m () [33m=>[39m {
    [90m   | [39m  [31m^[39m
    [90m 40| [39m    [35mawait[39m [34msetupTestDatabase[39m()[33m;[39m
    [90m 41| [39m    testContext [33m=[39m [34mgetTestContext[39m()[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[8/62]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m server/__tests__/e2e-user-journeys.test.ts[2m > [22mE2E User Journey Tests
[31m[1mReferenceError[22m: cleanupTestDatabase is not defined[39m
[36m [2mâ¯[22m server/__tests__/e2e-user-journeys.test.ts:[2m49:5[22m[39m
    [90m 47| [39m
    [90m 48| [39m  [34mafterAll[39m([35masync[39m () [33m=>[39m {
    [90m 49| [39m    [35mawait[39m [34mcleanupTestDatabase[39m()[33m;[39m
    [90m   | [39m    [31m^[39m
    [90m 50| [39m  })[33m;[39m
    [90m 51| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[9/62]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m server/__tests__/email-operations.test.ts[2m > [22mEmail Operations Integration Tests
[31m[1mUnknown Error[22m: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com[39m
[90m [2mâ¯[22m node_modules/@neondatabase/serverless/index.mjs:[2m1345:74[22m[39m
[90m [2mâ¯[22m NeonPreparedQuery.execute node_modules/drizzle-orm/neon-serverless/session.js:[2m76:20[22m[39m
[36m [2mâ¯[22m Module.setupTestDatabase server/__tests__/setup.ts:[2m59:32[22m[39m
    [90m 57| [39m
    [90m 58| [39m    [90m// Create test dealership if not exists[39m
    [90m 59| [39m    const existingDealership = await db.query.dealershipSettings.findFâ€¦
    [90m   | [39m                               [31m^[39m
    [90m 60| [39m      where[33m:[39m [34meq[39m(dealershipSettings[33m.[39mdealershipId[33m,[39m [33mTEST_DEALERSHIP_ID[39m)[33m,[39m
    [90m 61| [39m    })[33m;[39m
[90m [2mâ¯[22m server/__tests__/email-operations.test.ts:[2m53:5[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[22m[39m
[31m[1mSerialized Error:[22m[39m [90m{ error: { stack: 'Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com\n    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)', message: 'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com', errno: -3008, code: 'ENOTFOUND', syscall: 'getaddrinfo', hostname: 'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com', constructor: 'Function<Error>', name: 'Error', toString: 'Function<toString>' }, target: { _events: { error: 'Function<onError>', message: 'Function<onMessage>', close: 'Function<onClose>', open: 'Function<onOpen>' }, _eventsCount: 4, _maxListeners: undefined, _binaryType: 'arraybuffer', _closeCode: 1006, _closeFrameReceived: false, _closeFrameSent: false, _closeMessage: '<Buffer(0) ...>', _closeTimer: null, _errorEmitted: true, _extensions: {}, _paused: false, _protocol: '', _readyState: 3, _receiver: null, _sender: null, _socket: null, _bufferedAmount: +0, _isServer: false, _redirects: +0, _autoPong: true, _url: 'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2', _req: null, constructor: 'Function<WebSocket>', binaryType: 'arraybuffer', bufferedAmount: +0, extensions: '', isPaused: false, onclose: null, onerror: null, onopen: null, onmessage: null, protocol: '', readyState: 3, url: 'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2', setSocket: 'Function<setSocket>', emitClose: 'Function<emitClose>', close: 'Function<close>', pause: 'Function<pause>', ping: 'Function<ping>', pong: 'Function<pong>', resume: 'Function<resume>', send: 'Function<send>', terminate: 'Function<terminate>', CONNECTING: +0, OPEN: 1, CLOSING: 2, CLOSED: 3, addEventListener: 'Function<addEventListener>', removeEventListener: 'Function<removeEventListener>', setMaxListeners: 'Function<setMaxListeners>', getMaxListeners: 'Function<getMaxListeners>', emit: 'Function<emit>', addListener: 'Function<addListener>', on: 'Function<addListener>', prependListener: 'Function<prependListener>', once: 'Function<once>', prependOnceListener: 'Function<prependOnceListener>', removeListener: 'Function<removeListener>', off: 'Function<removeListener>', removeAllListeners: 'Function<removeAllListeners>', listeners: 'Function<listeners>', rawListeners: 'Function<rawListeners>', listenerCount: 'Function<listenerCount>', eventNames: 'Function<eventNames>' } }[39m
[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[10/62]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m server/__tests__/email-operations.test.ts[2m > [22mEmail Operations Integration Tests
[31m[1mUnknown Error[22m: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com[39m
[90m [2mâ¯[22m node_modules/@neondatabase/serverless/index.mjs:[2m1345:74[22m[39m
[36m [2mâ¯[22m Module.cleanupTestData server/__tests__/setup.ts:[2m123:5[22m[39m
    [90m121| [39m
    [90m122| [39m    [90m// Delete in order of dependencies (child â†’ parent)[39m
    [90m123| [39m    [35mawait[39m db[33m.[39m[35mdelete[39m(dealScenarios)[33m.[39m[34mexecute[39m()[33m;[39m
    [90m   | [39m    [31m^[39m
    [90m124| [39m    [35mawait[39m db[33m.[39m[35mdelete[39m(deals)[33m.[39m[34mexecute[39m()[33m;[39m
    [90m125| [39m    [35mawait[39m db[33m.[39m[35mdelete[39m(vehicles)[33m.[39m[34mexecute[39m()[33m;[39m
[90m [2mâ¯[22m server/__tests__/email-operations.test.ts:[2m80:5[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[22m[39m
[31m[1mSerialized Error:[22m[39m [90m{ error: { stack: 'Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com\n    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)', message: 'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com', errno: -3008, code: 'ENOTFOUND', syscall: 'getaddrinfo', hostname: 'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com', constructor: 'Function<Error>', name: 'Error', toString: 'Function<toString>' }, target: { _events: { error: 'Function<onError>', message: 'Function<onMessage>', close: 'Function<onClose>', open: 'Function<onOpen>' }, _eventsCount: 4, _maxListeners: undefined, _binaryType: 'arraybuffer', _closeCode: 1006, _closeFrameReceived: false, _closeFrameSent: false, _closeMessage: '<Buffer(0) ...>', _closeTimer: null, _errorEmitted: true, _extensions: {}, _paused: false, _protocol: '', _readyState: 3, _receiver: null, _sender: null, _socket: null, _bufferedAmount: +0, _isServer: false, _redirects: +0, _autoPong: true, _url: 'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2', _req: null, constructor: 'Function<WebSocket>', binaryType: 'arraybuffer', bufferedAmount: +0, extensions: '', isPaused: false, onclose: null, onerror: null, onopen: null, onmessage: null, protocol: '', readyState: 3, url: 'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2', setSocket: 'Function<setSocket>', emitClose: 'Function<emitClose>', close: 'Function<close>', pause: 'Function<pause>', ping: 'Function<ping>', pong: 'Function<pong>', resume: 'Function<resume>', send: 'Function<send>', terminate: 'Function<terminate>', CONNECTING: +0, OPEN: 1, CLOSING: 2, CLOSED: 3, addEventListener: 'Function<addEventListener>', removeEventListener: 'Function<removeEventListener>', setMaxListeners: 'Function<setMaxListeners>', getMaxListeners: 'Function<getMaxListeners>', emit: 'Function<emit>', addListener: 'Function<addListener>', on: 'Function<addListener>', prependListener: 'Function<prependListener>', once: 'Function<once>', prependOnceListener: 'Function<prependOnceListener>', removeListener: 'Function<removeListener>', off: 'Function<removeListener>', removeAllListeners: 'Function<removeAllListeners>', listeners: 'Function<listeners>', rawListeners: 'Function<rawListeners>', listenerCount: 'Function<listenerCount>', eventNames: 'Function<eventNames>' } }[39m
[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[11/62]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m server/__tests__/module-boundaries.test.ts[2m > [22mModule Boundary Validation Tests
[31m[1mUnknown Error[22m: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com[39m
[90m [2mâ¯[22m node_modules/@neondatabase/serverless/index.mjs:[2m1345:74[22m[39m
[90m [2mâ¯[22m NeonPreparedQuery.execute node_modules/drizzle-orm/neon-serverless/session.js:[2m76:20[22m[39m
[36m [2mâ¯[22m setupTestDatabase server/__tests__/setup.ts:[2m59:32[22m[39m
    [90m 57| [39m
    [90m 58| [39m    [90m// Create test dealership if not exists[39m
    [90m 59| [39m    const existingDealership = await db.query.dealershipSettings.findFâ€¦
    [90m   | [39m                               [31m^[39m
    [90m 60| [39m      where[33m:[39m [34meq[39m(dealershipSettings[33m.[39mdealershipId[33m,[39m [33mTEST_DEALERSHIP_ID[39m)[33m,[39m
    [90m 61| [39m    })[33m;[39m
[90m [2mâ¯[22m server/__tests__/module-boundaries.test.ts:[2m34:5[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[22m[39m
[31m[1mSerialized Error:[22m[39m [90m{ error: { stack: 'Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com\n    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)', message: 'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com', errno: -3008, code: 'ENOTFOUND', syscall: 'getaddrinfo', hostname: 'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com', constructor: 'Function<Error>', name: 'Error', toString: 'Function<toString>' }, target: { _events: { error: 'Function<onError>', message: 'Function<onMessage>', close: 'Function<onClose>', open: 'Function<onOpen>' }, _eventsCount: 4, _maxListeners: undefined, _binaryType: 'arraybuffer', _closeCode: 1006, _closeFrameReceived: false, _closeFrameSent: false, _closeMessage: '<Buffer(0) ...>', _closeTimer: null, _errorEmitted: true, _extensions: {}, _paused: false, _protocol: '', _readyState: 3, _receiver: null, _sender: null, _socket: null, _bufferedAmount: +0, _isServer: false, _redirects: +0, _autoPong: true, _url: 'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2', _req: null, constructor: 'Function<WebSocket>', binaryType: 'arraybuffer', bufferedAmount: +0, extensions: '', isPaused: false, onclose: null, onerror: null, onopen: null, onmessage: null, protocol: '', readyState: 3, url: 'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2', setSocket: 'Function<setSocket>', emitClose: 'Function<emitClose>', close: 'Function<close>', pause: 'Function<pause>', ping: 'Function<ping>', pong: 'Function<pong>', resume: 'Function<resume>', send: 'Function<send>', terminate: 'Function<terminate>', CONNECTING: +0, OPEN: 1, CLOSING: 2, CLOSED: 3, addEventListener: 'Function<addEventListener>', removeEventListener: 'Function<removeEventListener>', setMaxListeners: 'Function<setMaxListeners>', getMaxListeners: 'Function<getMaxListeners>', emit: 'Function<emit>', addListener: 'Function<addListener>', on: 'Function<addListener>', prependListener: 'Function<prependListener>', once: 'Function<once>', prependOnceListener: 'Function<prependOnceListener>', removeListener: 'Function<removeListener>', off: 'Function<removeListener>', removeAllListeners: 'Function<removeAllListeners>', listeners: 'Function<listeners>', rawListeners: 'Function<rawListeners>', listenerCount: 'Function<listenerCount>', eventNames: 'Function<eventNames>' } }[39m
[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[12/62]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m server/__tests__/module-boundaries.test.ts[2m > [22mModule Boundary Validation Tests
[31m[1mReferenceError[22m: cleanupTestDatabase is not defined[39m
[36m [2mâ¯[22m server/__tests__/module-boundaries.test.ts:[2m43:5[22m[39m
    [90m 41| [39m
    [90m 42| [39m  [34mafterAll[39m([35masync[39m () [33m=>[39m {
    [90m 43| [39m    [35mawait[39m [34mcleanupTestDatabase[39m()[33m;[39m
    [90m   | [39m    [31m^[39m
    [90m 44| [39m  })[33m;[39m
    [90m 45| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[13/62]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m server/__tests__/payment-calculation.test.ts[2m > [22mPayment Calculation Integration Tests
[31m[1mUnknown Error[22m: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com[39m
[90m [2mâ¯[22m node_modules/@neondatabase/serverless/index.mjs:[2m1345:74[22m[39m
[90m [2mâ¯[22m NeonPreparedQuery.execute node_modules/drizzle-orm/neon-serverless/session.js:[2m76:20[22m[39m
[36m [2mâ¯[22m setupTestDatabase server/__tests__/setup.ts:[2m59:32[22m[39m
    [90m 57| [39m
    [90m 58| [39m    [90m// Create test dealership if not exists[39m
    [90m 59| [39m    const existingDealership = await db.query.dealershipSettings.findFâ€¦
    [90m   | [39m                               [31m^[39m
    [90m 60| [39m      where[33m:[39m [34meq[39m(dealershipSettings[33m.[39mdealershipId[33m,[39m [33mTEST_DEALERSHIP_ID[39m)[33m,[39m
    [90m 61| [39m    })[33m;[39m
[90m [2mâ¯[22m server/__tests__/payment-calculation.test.ts:[2m31:5[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[22m[39m
[31m[1mSerialized Error:[22m[39m [90m{ error: { stack: 'Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com\n    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)', message: 'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com', errno: -3008, code: 'ENOTFOUND', syscall: 'getaddrinfo', hostname: 'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com', constructor: 'Function<Error>', name: 'Error', toString: 'Function<toString>' }, target: { _events: { error: 'Function<onError>', message: 'Function<onMessage>', close: 'Function<onClose>', open: 'Function<onOpen>' }, _eventsCount: 4, _maxListeners: undefined, _binaryType: 'arraybuffer', _closeCode: 1006, _closeFrameReceived: false, _closeFrameSent: false, _closeMessage: '<Buffer(0) ...>', _closeTimer: null, _errorEmitted: true, _extensions: {}, _paused: false, _protocol: '', _readyState: 3, _receiver: null, _sender: null, _socket: null, _bufferedAmount: +0, _isServer: false, _redirects: +0, _autoPong: true, _url: 'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2', _req: null, constructor: 'Function<WebSocket>', binaryType: 'arraybuffer', bufferedAmount: +0, extensions: '', isPaused: false, onclose: null, onerror: null, onopen: null, onmessage: null, protocol: '', readyState: 3, url: 'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2', setSocket: 'Function<setSocket>', emitClose: 'Function<emitClose>', close: 'Function<close>', pause: 'Function<pause>', ping: 'Function<ping>', pong: 'Function<pong>', resume: 'Function<resume>', send: 'Function<send>', terminate: 'Function<terminate>', CONNECTING: +0, OPEN: 1, CLOSING: 2, CLOSED: 3, addEventListener: 'Function<addEventListener>', removeEventListener: 'Function<removeEventListener>', setMaxListeners: 'Function<setMaxListeners>', getMaxListeners: 'Function<getMaxListeners>', emit: 'Function<emit>', addListener: 'Function<addListener>', on: 'Function<addListener>', prependListener: 'Function<prependListener>', once: 'Function<once>', prependOnceListener: 'Function<prependOnceListener>', removeListener: 'Function<removeListener>', off: 'Function<removeListener>', removeAllListeners: 'Function<removeAllListeners>', listeners: 'Function<listeners>', rawListeners: 'Function<rawListeners>', listenerCount: 'Function<listenerCount>', eventNames: 'Function<eventNames>' } }[39m
[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[14/62]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m server/__tests__/payment-calculation.test.ts[2m > [22mPayment Calculation Integration Tests
[31m[1mUnknown Error[22m: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com[39m
[90m [2mâ¯[22m node_modules/@neondatabase/serverless/index.mjs:[2m1345:74[22m[39m
[36m [2mâ¯[22m cleanupTestData server/__tests__/setup.ts:[2m123:5[22m[39m
    [90m121| [39m
    [90m122| [39m    [90m// Delete in order of dependencies (child â†’ parent)[39m
    [90m123| [39m    [35mawait[39m db[33m.[39m[35mdelete[39m(dealScenarios)[33m.[39m[34mexecute[39m()[33m;[39m
    [90m   | [39m    [31m^[39m
    [90m124| [39m    [35mawait[39m db[33m.[39m[35mdelete[39m(deals)[33m.[39m[34mexecute[39m()[33m;[39m
    [90m125| [39m    [35mawait[39m db[33m.[39m[35mdelete[39m(vehicles)[33m.[39m[34mexecute[39m()[33m;[39m
[90m [2mâ¯[22m server/__tests__/payment-calculation.test.ts:[2m40:5[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[22m[39m
[31m[1mSerialized Error:[22m[39m [90m{ error: { stack: 'Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com\n    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)', message: 'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com', errno: -3008, code: 'ENOTFOUND', syscall: 'getaddrinfo', hostname: 'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com', constructor: 'Function<Error>', name: 'Error', toString: 'Function<toString>' }, target: { _events: { error: 'Function<onError>', message: 'Function<onMessage>', close: 'Function<onClose>', open: 'Function<onOpen>' }, _eventsCount: 4, _maxListeners: undefined, _binaryType: 'arraybuffer', _closeCode: 1006, _closeFrameReceived: false, _closeFrameSent: false, _closeMessage: '<Buffer(0) ...>', _closeTimer: null, _errorEmitted: true, _extensions: {}, _paused: false, _protocol: '', _readyState: 3, _receiver: null, _sender: null, _socket: null, _bufferedAmount: +0, _isServer: false, _redirects: +0, _autoPong: true, _url: 'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2', _req: null, constructor: 'Function<WebSocket>', binaryType: 'arraybuffer', bufferedAmount: +0, extensions: '', isPaused: false, onclose: null, onerror: null, onopen: null, onmessage: null, protocol: '', readyState: 3, url: 'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2', setSocket: 'Function<setSocket>', emitClose: 'Function<emitClose>', close: 'Function<close>', pause: 'Function<pause>', ping: 'Function<ping>', pong: 'Function<pong>', resume: 'Function<resume>', send: 'Function<send>', terminate: 'Function<terminate>', CONNECTING: +0, OPEN: 1, CLOSING: 2, CLOSED: 3, addEventListener: 'Function<addEventListener>', removeEventListener: 'Function<removeEventListener>', setMaxListeners: 'Function<setMaxListeners>', getMaxListeners: 'Function<getMaxListeners>', emit: 'Function<emit>', addListener: 'Function<addListener>', on: 'Function<addListener>', prependListener: 'Function<prependListener>', once: 'Function<once>', prependOnceListener: 'Function<prependOnceListener>', removeListener: 'Function<removeListener>', off: 'Function<removeListener>', removeAllListeners: 'Function<removeAllListeners>', listeners: 'Function<listeners>', rawListeners: 'Function<rawListeners>', listenerCount: 'Function<listenerCount>', eventNames: 'Function<eventNames>' } }[39m
[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[15/62]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m server/__tests__/reporting-analytics.test.ts[2m > [22mReporting & Analytics Integration Tests
[31m[1mUnknown Error[22m: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com[39m
[90m [2mâ¯[22m node_modules/@neondatabase/serverless/index.mjs:[2m1345:74[22m[39m
[90m [2mâ¯[22m NeonPreparedQuery.execute node_modules/drizzle-orm/neon-serverless/session.js:[2m76:20[22m[39m
[36m [2mâ¯[22m setupTestDatabase server/__tests__/setup.ts:[2m59:32[22m[39m
    [90m 57| [39m
    [90m 58| [39m    [90m// Create test dealership if not exists[39m
    [90m 59| [39m    const existingDealership = await db.query.dealershipSettings.findFâ€¦
    [90m   | [39m                               [31m^[39m
    [90m 60| [39m      where[33m:[39m [34meq[39m(dealershipSettings[33m.[39mdealershipId[33m,[39m [33mTEST_DEALERSHIP_ID[39m)[33m,[39m
    [90m 61| [39m    })[33m;[39m
[90m [2mâ¯[22m server/__tests__/reporting-analytics.test.ts:[2m36:5[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[22m[39m
[31m[1mSerialized Error:[22m[39m [90m{ error: { stack: 'Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com\n    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)', message: 'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com', errno: -3008, code: 'ENOTFOUND', syscall: 'getaddrinfo', hostname: 'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com', constructor: 'Function<Error>', name: 'Error', toString: 'Function<toString>' }, target: { _events: { error: 'Function<onError>', message: 'Function<onMessage>', close: 'Function<onClose>', open: 'Function<onOpen>' }, _eventsCount: 4, _maxListeners: undefined, _binaryType: 'arraybuffer', _closeCode: 1006, _closeFrameReceived: false, _closeFrameSent: false, _closeMessage: '<Buffer(0) ...>', _closeTimer: null, _errorEmitted: true, _extensions: {}, _paused: false, _protocol: '', _readyState: 3, _receiver: null, _sender: null, _socket: null, _bufferedAmount: +0, _isServer: false, _redirects: +0, _autoPong: true, _url: 'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2', _req: null, constructor: 'Function<WebSocket>', binaryType: 'arraybuffer', bufferedAmount: +0, extensions: '', isPaused: false, onclose: null, onerror: null, onopen: null, onmessage: null, protocol: '', readyState: 3, url: 'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2', setSocket: 'Function<setSocket>', emitClose: 'Function<emitClose>', close: 'Function<close>', pause: 'Function<pause>', ping: 'Function<ping>', pong: 'Function<pong>', resume: 'Function<resume>', send: 'Function<send>', terminate: 'Function<terminate>', CONNECTING: +0, OPEN: 1, CLOSING: 2, CLOSED: 3, addEventListener: 'Function<addEventListener>', removeEventListener: 'Function<removeEventListener>', setMaxListeners: 'Function<setMaxListeners>', getMaxListeners: 'Function<getMaxListeners>', emit: 'Function<emit>', addListener: 'Function<addListener>', on: 'Function<addListener>', prependListener: 'Function<prependListener>', once: 'Function<once>', prependOnceListener: 'Function<prependOnceListener>', removeListener: 'Function<removeListener>', off: 'Function<removeListener>', removeAllListeners: 'Function<removeAllListeners>', listeners: 'Function<listeners>', rawListeners: 'Function<rawListeners>', listenerCount: 'Function<listenerCount>', eventNames: 'Function<eventNames>' } }[39m
[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[16/62]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m server/__tests__/reporting-analytics.test.ts[2m > [22mReporting & Analytics Integration Tests
[31m[1mUnknown Error[22m: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com[39m
[90m [2mâ¯[22m node_modules/@neondatabase/serverless/index.mjs:[2m1345:74[22m[39m
[36m [2mâ¯[22m cleanupTestData server/__tests__/setup.ts:[2m123:5[22m[39m
    [90m121| [39m
    [90m122| [39m    [90m// Delete in order of dependencies (child â†’ parent)[39m
    [90m123| [39m    [35mawait[39m db[33m.[39m[35mdelete[39m(dealScenarios)[33m.[39m[34mexecute[39m()[33m;[39m
    [90m   | [39m    [31m^[39m
    [90m124| [39m    [35mawait[39m db[33m.[39m[35mdelete[39m(deals)[33m.[39m[34mexecute[39m()[33m;[39m
    [90m125| [39m    [35mawait[39m db[33m.[39m[35mdelete[39m(vehicles)[33m.[39m[34mexecute[39m()[33m;[39m
[90m [2mâ¯[22m server/__tests__/reporting-analytics.test.ts:[2m45:5[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[22m[39m
[31m[1mSerialized Error:[22m[39m [90m{ error: { stack: 'Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com\n    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)', message: 'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com', errno: -3008, code: 'ENOTFOUND', syscall: 'getaddrinfo', hostname: 'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com', constructor: 'Function<Error>', name: 'Error', toString: 'Function<toString>' }, target: { _events: { error: 'Function<onError>', message: 'Function<onMessage>', close: 'Function<onClose>', open: 'Function<onOpen>' }, _eventsCount: 4, _maxListeners: undefined, _binaryType: 'arraybuffer', _closeCode: 1006, _closeFrameReceived: false, _closeFrameSent: false, _closeMessage: '<Buffer(0) ...>', _closeTimer: null, _errorEmitted: true, _extensions: {}, _paused: false, _protocol: '', _readyState: 3, _receiver: null, _sender: null, _socket: null, _bufferedAmount: +0, _isServer: false, _redirects: +0, _autoPong: true, _url: 'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2', _req: null, constructor: 'Function<WebSocket>', binaryType: 'arraybuffer', bufferedAmount: +0, extensions: '', isPaused: false, onclose: null, onerror: null, onopen: null, onmessage: null, protocol: '', readyState: 3, url: 'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2', setSocket: 'Function<setSocket>', emitClose: 'Function<emitClose>', close: 'Function<close>', pause: 'Function<pause>', ping: 'Function<ping>', pong: 'Function<pong>', resume: 'Function<resume>', send: 'Function<send>', terminate: 'Function<terminate>', CONNECTING: +0, OPEN: 1, CLOSING: 2, CLOSED: 3, addEventListener: 'Function<addEventListener>', removeEventListener: 'Function<removeEventListener>', setMaxListeners: 'Function<setMaxListeners>', getMaxListeners: 'Function<getMaxListeners>', emit: 'Function<emit>', addListener: 'Function<addListener>', on: 'Function<addListener>', prependListener: 'Function<prependListener>', once: 'Function<once>', prependOnceListener: 'Function<prependOnceListener>', removeListener: 'Function<removeListener>', off: 'Function<removeListener>', removeAllListeners: 'Function<removeAllListeners>', listeners: 'Function<listeners>', rawListeners: 'Function<rawListeners>', listenerCount: 'Function<listenerCount>', eventNames: 'Function<eventNames>' } }[39m
[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[17/62]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m server/__tests__/tax-calculation.test.ts[2m > [22mTax Calculation Integration Tests
[31m[1mError[22m: Hook timed out in 30000ms.
If this is a long-running hook, pass a timeout value as the last argument or configure it globally with "hookTimeout".[39m
[36m [2mâ¯[22m server/__tests__/tax-calculation.test.ts:[2m43:3[22m[39m
    [90m 41| [39m  [35mlet[39m testContext[33m:[39m [33mReturnType[39m[33m<[39m[35mtypeof[39m getTestContext[33m>[39m[33m;[39m
    [90m 42| [39m
    [90m 43| [39m  [34mbeforeAll[39m([35masync[39m () [33m=>[39m {
    [90m   | [39m  [31m^[39m
    [90m 44| [39m    [35mawait[39m [34msetupTestDatabase[39m()[33m;[39m
    [90m 45| [39m    testContext [33m=[39m [34mgetTestContext[39m()[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[18/62]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m server/__tests__/tax-calculation.test.ts[2m > [22mTax Calculation Integration Tests
[31m[1mError[22m: Cannot use a pool after calling end on the pool[39m
[90m [2mâ¯[22m node_modules/@neondatabase/serverless/index.mjs:[2m1345:74[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[19/62]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m server/__tests__/vehicle-inventory.test.ts[2m > [22mVehicle Inventory Integration Tests
[31m[1mUnknown Error[22m: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com[39m
[90m [2mâ¯[22m node_modules/@neondatabase/serverless/index.mjs:[2m1345:74[22m[39m
[90m [2mâ¯[22m NeonPreparedQuery.execute node_modules/drizzle-orm/neon-serverless/session.js:[2m76:20[22m[39m
[36m [2mâ¯[22m setupTestDatabase server/__tests__/setup.ts:[2m59:32[22m[39m
    [90m 57| [39m
    [90m 58| [39m    [90m// Create test dealership if not exists[39m
    [90m 59| [39m    const existingDealership = await db.query.dealershipSettings.findFâ€¦
    [90m   | [39m                               [31m^[39m
    [90m 60| [39m      where[33m:[39m [34meq[39m(dealershipSettings[33m.[39mdealershipId[33m,[39m [33mTEST_DEALERSHIP_ID[39m)[33m,[39m
    [90m 61| [39m    })[33m;[39m
[90m [2mâ¯[22m server/__tests__/vehicle-inventory.test.ts:[2m40:5[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[22m[39m
[31m[1mSerialized Error:[22m[39m [90m{ error: { stack: 'Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com\n    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)', message: 'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com', errno: -3008, code: 'ENOTFOUND', syscall: 'getaddrinfo', hostname: 'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com', constructor: 'Function<Error>', name: 'Error', toString: 'Function<toString>' }, target: { _events: { error: 'Function<onError>', message: 'Function<onMessage>', close: 'Function<onClose>', open: 'Function<onOpen>' }, _eventsCount: 4, _maxListeners: undefined, _binaryType: 'arraybuffer', _closeCode: 1006, _closeFrameReceived: false, _closeFrameSent: false, _closeMessage: '<Buffer(0) ...>', _closeTimer: null, _errorEmitted: true, _extensions: {}, _paused: false, _protocol: '', _readyState: 3, _receiver: null, _sender: null, _socket: null, _bufferedAmount: +0, _isServer: false, _redirects: +0, _autoPong: true, _url: 'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2', _req: null, constructor: 'Function<WebSocket>', binaryType: 'arraybuffer', bufferedAmount: +0, extensions: '', isPaused: false, onclose: null, onerror: null, onopen: null, onmessage: null, protocol: '', readyState: 3, url: 'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2', setSocket: 'Function<setSocket>', emitClose: 'Function<emitClose>', close: 'Function<close>', pause: 'Function<pause>', ping: 'Function<ping>', pong: 'Function<pong>', resume: 'Function<resume>', send: 'Function<send>', terminate: 'Function<terminate>', CONNECTING: +0, OPEN: 1, CLOSING: 2, CLOSED: 3, addEventListener: 'Function<addEventListener>', removeEventListener: 'Function<removeEventListener>', setMaxListeners: 'Function<setMaxListeners>', getMaxListeners: 'Function<getMaxListeners>', emit: 'Function<emit>', addListener: 'Function<addListener>', on: 'Function<addListener>', prependListener: 'Function<prependListener>', once: 'Function<once>', prependOnceListener: 'Function<prependOnceListener>', removeListener: 'Function<removeListener>', off: 'Function<removeListener>', removeAllListeners: 'Function<removeAllListeners>', listeners: 'Function<listeners>', rawListeners: 'Function<rawListeners>', listenerCount: 'Function<listenerCount>', eventNames: 'Function<eventNames>' } }[39m
[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[20/62]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m server/__tests__/vehicle-inventory.test.ts[2m > [22mVehicle Inventory Integration Tests
[31m[1mUnknown Error[22m: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com[39m
[90m [2mâ¯[22m node_modules/@neondatabase/serverless/index.mjs:[2m1345:74[22m[39m
[36m [2mâ¯[22m cleanupTestData server/__tests__/setup.ts:[2m123:5[22m[39m
    [90m121| [39m
    [90m122| [39m    [90m// Delete in order of dependencies (child â†’ parent)[39m
    [90m123| [39m    [35mawait[39m db[33m.[39m[35mdelete[39m(dealScenarios)[33m.[39m[34mexecute[39m()[33m;[39m
    [90m   | [39m    [31m^[39m
    [90m124| [39m    [35mawait[39m db[33m.[39m[35mdelete[39m(deals)[33m.[39m[34mexecute[39m()[33m;[39m
    [90m125| [39m    [35mawait[39m db[33m.[39m[35mdelete[39m(vehicles)[33m.[39m[34mexecute[39m()[33m;[39m
[90m [2mâ¯[22m server/__tests__/vehicle-inventory.test.ts:[2m49:5[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[22m[39m
[31m[1mSerialized Error:[22m[39m [90m{ error: { stack: 'Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com\n    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)', message: 'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com', errno: -3008, code: 'ENOTFOUND', syscall: 'getaddrinfo', hostname: 'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com', constructor: 'Function<Error>', name: 'Error', toString: 'Function<toString>' }, target: { _events: { error: 'Function<onError>', message: 'Function<onMessage>', close: 'Function<onClose>', open: 'Function<onOpen>' }, _eventsCount: 4, _maxListeners: undefined, _binaryType: 'arraybuffer', _closeCode: 1006, _closeFrameReceived: false, _closeFrameSent: false, _closeMessage: '<Buffer(0) ...>', _closeTimer: null, _errorEmitted: true, _extensions: {}, _paused: false, _protocol: '', _readyState: 3, _receiver: null, _sender: null, _socket: null, _bufferedAmount: +0, _isServer: false, _redirects: +0, _autoPong: true, _url: 'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2', _req: null, constructor: 'Function<WebSocket>', binaryType: 'arraybuffer', bufferedAmount: +0, extensions: '', isPaused: false, onclose: null, onerror: null, onopen: null, onmessage: null, protocol: '', readyState: 3, url: 'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2', setSocket: 'Function<setSocket>', emitClose: 'Function<emitClose>', close: 'Function<close>', pause: 'Function<pause>', ping: 'Function<ping>', pong: 'Function<pong>', resume: 'Function<resume>', send: 'Function<send>', terminate: 'Function<terminate>', CONNECTING: +0, OPEN: 1, CLOSING: 2, CLOSED: 3, addEventListener: 'Function<addEventListener>', removeEventListener: 'Function<removeEventListener>', setMaxListeners: 'Function<setMaxListeners>', getMaxListeners: 'Function<getMaxListeners>', emit: 'Function<emit>', addListener: 'Function<addListener>', on: 'Function<addListener>', prependListener: 'Function<prependListener>', once: 'Function<once>', prependOnceListener: 'Function<prependOnceListener>', removeListener: 'Function<removeListener>', off: 'Function<removeListener>', removeAllListeners: 'Function<removeAllListeners>', listeners: 'Function<listeners>', rawListeners: 'Function<rawListeners>', listenerCount: 'Function<listenerCount>', eventNames: 'Function<eventNames>' } }[39m
[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[21/62]âŽ¯[22m[39m


[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m[1m[41m Failed Tests 41 [49m[22m[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m

[41m[1m FAIL [22m[49m src/modules/customer/__tests__/customer-search.integration.test.ts[2m > [22mCustomer Search Integration[2m > [22mFilter by Date Range[2m > [22mshould find recently updated customers
[31m[1mAssertionError[22m: expected 0 to be greater than 0[39m
[36m [2mâ¯[22m src/modules/customer/__tests__/customer-search.integration.test.ts:[2m284:30[22m[39m
    [90m282| [39m
    [90m283| [39m      [90m// Assert[39m
    [90m284| [39m      [34mexpect[39m(results[33m.[39mlength)[33m.[39m[34mtoBeGreaterThan[39m([34m0[39m)[33m;[39m
    [90m   | [39m                             [31m^[39m
    [90m285| [39m    })[33m;[39m
    [90m286| [39m  })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[22/62]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/modules/customer/__tests__/customer-search.integration.test.ts[2m > [22mCustomer Search Integration[2m > [22mSearch Performance[2m > [22mshould handle search with large result set
[31m[1mAssertionError[22m: expected 0 to be greater than 0[39m
[36m [2mâ¯[22m src/modules/customer/__tests__/customer-search.integration.test.ts:[2m470:30[22m[39m
    [90m468| [39m      [90m// Assert - Should complete quickly (< 100ms for 1000 records)[39m
    [90m469| [39m      [34mexpect[39m(duration)[33m.[39m[34mtoBeLessThan[39m([34m100[39m)[33m;[39m
    [90m470| [39m      [34mexpect[39m(results[33m.[39mlength)[33m.[39m[34mtoBeGreaterThan[39m([34m0[39m)[33m;[39m
    [90m   | [39m                             [31m^[39m
    [90m471| [39m    })[33m;[39m
    [90m472| [39m  })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[23/62]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/modules/customer/__tests__/customer.service.test.ts[2m > [22mCustomerService[2m > [22mgetCustomer[2m > [22mshould throw CustomerNotFoundError when customer does not exist
[31m[1mAssertionError[22m: expected error to be instance of CustomerNotFoundError[39m

[32m- Expected:[39m 
[Function CustomerNotFoundError]

[31m+ Received:[39m 
ErrorEvent {
  Symbol(kTarget): WebSocket {
    "_autoPong": true,
    "_binaryType": "arraybuffer",
    "_bufferedAmount": 0,
    "_closeCode": 1006,
    "_closeFrameReceived": false,
    "_closeFrameSent": false,
    "_closeMessage": Buffer [],
    "_closeTimer": null,
    "_errorEmitted": true,
    "_events": {
      "close": [Function onClose],
      "error": [Function onError],
      "message": [Function onMessage],
      "open": [Function onOpen],
    },
    "_eventsCount": 4,
    "_extensions": {},
    "_isServer": false,
    "_maxListeners": undefined,
    "_paused": false,
    "_protocol": "",
    "_readyState": 3,
    "_receiver": null,
    "_redirects": 0,
    "_req": null,
    "_sender": null,
    "_socket": null,
    "_url": "wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2",
    Symbol(shapeMode): false,
    Symbol(kCapture): false,
  },
  Symbol(kType): "error",
  Symbol(kError): Error {
    "message": "getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com",
    "errno": -3008,
    "code": "ENOTFOUND",
    "syscall": "getaddrinfo",
    "hostname": "dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com",
  },
  Symbol(kMessage): "getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com",
}

[36m [2mâ¯[22m src/modules/customer/__tests__/customer.service.test.ts:[2m65:7[22m[39m
    [90m 63| [39m      [35mconst[39m nonExistentId [33m=[39m [32m'999e4567-e89b-12d3-a456-426614174999'[39m[33m;[39m
    [90m 64| [39m
    [90m 65| [39m      [35mawait[39m [34mexpect[39m(
    [90m   | [39m      [31m^[39m
    [90m 66| [39m        service[33m.[39m[34mgetCustomer[39m(nonExistentId[33m,[39m mockDealershipId)
    [90m 67| [39m      )[33m.[39mrejects[33m.[39m[34mtoThrow[39m([33mCustomerNotFoundError[39m)[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[24/62]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/modules/customer/__tests__/customer.service.test.ts[2m > [22mCustomerService[2m > [22mvalidateCustomer[2m > [22mshould detect invalid ZIP codes
[31m[1mAssertionError[22m: expected false to be true // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- true[39m
[31m+ false[39m

[36m [2mâ¯[22m src/modules/customer/__tests__/customer.service.test.ts:[2m134:66[22m[39m
    [90m132| [39m
    [90m133| [39m      [34mexpect[39m(validation[33m.[39mvalid)[33m.[39m[34mtoBe[39m([35mfalse[39m)[33m;[39m
    [90m134| [39m      expect(validation.errors.some(e => e.field === 'zipCode')).toBe(â€¦
    [90m   | [39m                                                                 [31m^[39m
    [90m135| [39m    })[33m;[39m
    [90m136| [39m  })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[25/62]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/modules/customer/__tests__/customer.service.test.ts[2m > [22mCustomerService[2m > [22mMulti-tenant isolation[2m > [22mshould enforce dealershipId on all operations
[31m[1mUnknown Error[22m: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com[39m
[90m [2mâ¯[22m node_modules/@neondatabase/serverless/index.mjs:[2m1345:74[22m[39m
[90m [2mâ¯[22m NeonPreparedQuery.execute node_modules/drizzle-orm/neon-serverless/session.js:[2m76:20[22m[39m
[36m [2mâ¯[22m StorageService.searchCustomers src/core/database/storage.service.ts:[2m332:22[22m[39m
    [90m330| [39m      );
    [90m331| [39m
    [90m332| [39m      const result = await this.dbService.db
    [90m   | [39m                     [31m^[39m
    [90m333| [39m        .select()
    [90m334| [39m        .from(customers)
[90m [2mâ¯[22m CustomerService.searchCustomers src/modules/customer/services/customer.service.ts:[2m383:21[22m[39m
[90m [2mâ¯[22m src/modules/customer/__tests__/customer.service.test.ts:[2m149:29[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[22m[39m
[31m[1mSerialized Error:[22m[39m [90m{ error: { stack: 'Error: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com\n    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:122:26)', message: 'getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com', errno: -3008, code: 'ENOTFOUND', syscall: 'getaddrinfo', hostname: 'dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com', constructor: 'Function<Error>', name: 'Error', toString: 'Function<toString>' }, target: { _events: { error: 'Function<onError>', message: 'Function<onMessage>', close: 'Function<onClose>', open: 'Function<onOpen>' }, _eventsCount: 4, _maxListeners: undefined, _binaryType: 'arraybuffer', _closeCode: 1006, _closeFrameReceived: false, _closeFrameSent: false, _closeMessage: '<Buffer(0) ...>', _closeTimer: null, _errorEmitted: true, _extensions: {}, _paused: false, _protocol: '', _readyState: 3, _receiver: null, _sender: null, _socket: null, _bufferedAmount: +0, _isServer: false, _redirects: +0, _autoPong: true, _url: 'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2', _req: null, constructor: 'Function<WebSocket>', binaryType: 'arraybuffer', bufferedAmount: +0, extensions: '', isPaused: false, onclose: null, onerror: null, onopen: null, onmessage: null, protocol: '', readyState: 3, url: 'wss://dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com/v2', setSocket: 'Function<setSocket>', emitClose: 'Function<emitClose>', close: 'Function<close>', pause: 'Function<pause>', ping: 'Function<ping>', pong: 'Function<pong>', resume: 'Function<resume>', send: 'Function<send>', terminate: 'Function<terminate>', CONNECTING: +0, OPEN: 1, CLOSING: 2, CLOSED: 3, addEventListener: 'Function<addEventListener>', removeEventListener: 'Function<removeEventListener>', setMaxListeners: 'Function<setMaxListeners>', getMaxListeners: 'Function<getMaxListeners>', emit: 'Function<emit>', addListener: 'Function<addListener>', on: 'Function<addListener>', prependListener: 'Function<prependListener>', once: 'Function<once>', prependOnceListener: 'Function<prependOnceListener>', removeListener: 'Function<removeListener>', off: 'Function<removeListener>', removeAllListeners: 'Function<removeAllListeners>', listeners: 'Function<listeners>', rawListeners: 'Function<rawListeners>', listenerCount: 'Function<listenerCount>', eventNames: 'Function<eventNames>' } }[39m
[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[26/62]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/modules/deal/__tests__/deal-creation.integration.test.ts[2m > [22mDeal Creation Integration[2m > [22mDeal Calculations and Pricing[2m > [22mshould apply tax calculations to deal correctly
[31m[1mAssertionError[22m: expected 1834.1 to be close to 1825.59, received difference is 8.509999999999991, but expected 0.05[39m
[36m [2mâ¯[22m src/modules/deal/__tests__/deal-creation.integration.test.ts:[2m223:25[22m[39m
    [90m221| [39m
    [90m222| [39m      [90m// Assert[39m
    [90m223| [39m      [34mexpect[39m(taxAmount)[33m.[39m[34mtoBeCloseTo[39m([34m1825.59[39m[33m,[39m [34m1[39m)[33m;[39m
    [90m   | [39m                        [31m^[39m
    [90m224| [39m      [34mexpect[39m(taxAmount)[33m.[39m[34mtoBeGreaterThan[39m([34m0[39m)[33m;[39m
    [90m225| [39m    })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[27/62]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/modules/email/__tests__/email.module.test.ts[2m > [22mEmail Module[2m > [22mType Validation[2m > [22mshould reject invalid email addresses
[31m[1mAssertionError[22m: promise resolved "{ success: true, â€¦(2) }" instead of rejecting[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- Error {[39m
[32m-   "message": "rejected promise",[39m
[31m+ {[39m
[31m+   "message": "Email queued for delivery",[39m
[31m+   "queueId": "qJ26iN09l-5MY9zvFbhw5",[39m
[31m+   "success": true,[39m
[2m  }[22m

[36m [2mâ¯[22m src/modules/email/__tests__/email.module.test.ts:[2m45:7[22m[39m
    [90m 43| [39m      [35mawait[39m [34mexpect[39m(
    [90m 44| [39m        emailModule.sendEmail(TEST_TENANT_ID, TEST_USER_ID, invalidReqâ€¦
    [90m 45| [39m      )[33m.[39mrejects[33m.[39m[34mtoThrow[39m()[33m;[39m
    [90m   | [39m      [31m^[39m
    [90m 46| [39m    })[33m;[39m
    [90m 47| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[28/62]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/modules/email/__tests__/email.module.test.ts[2m > [22mEmail Module[2m > [22mType Validation[2m > [22mshould reject empty recipients
[31m[1mAssertionError[22m: promise resolved "{ success: true, â€¦(2) }" instead of rejecting[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- Error {[39m
[32m-   "message": "rejected promise",[39m
[31m+ {[39m
[31m+   "message": "Email queued for delivery",[39m
[31m+   "queueId": "BwxTKHU1Jo2bmZWlKOd8i",[39m
[31m+   "success": true,[39m
[2m  }[22m

[36m [2mâ¯[22m src/modules/email/__tests__/email.module.test.ts:[2m58:7[22m[39m
    [90m 56| [39m      [35mawait[39m [34mexpect[39m(
    [90m 57| [39m        emailModule.sendEmail(TEST_TENANT_ID, TEST_USER_ID, invalidReqâ€¦
    [90m 58| [39m      )[33m.[39mrejects[33m.[39m[34mtoThrow[39m()[33m;[39m
    [90m   | [39m      [31m^[39m
    [90m 59| [39m    })[33m;[39m
    [90m 60| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[29/62]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/modules/email/__tests__/email.module.test.ts[2m > [22mEmail Module[2m > [22mType Validation[2m > [22mshould reject missing subject
[31m[1mAssertionError[22m: promise resolved "{ success: true, â€¦(2) }" instead of rejecting[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- Error {[39m
[32m-   "message": "rejected promise",[39m
[31m+ {[39m
[31m+   "message": "Email queued for delivery",[39m
[31m+   "queueId": "laHRvFHz3C_pCGk0P44Wu",[39m
[31m+   "success": true,[39m
[2m  }[22m

[36m [2mâ¯[22m src/modules/email/__tests__/email.module.test.ts:[2m70:7[22m[39m
    [90m 68| [39m      [35mawait[39m [34mexpect[39m(
    [90m 69| [39m        emailModule.sendEmail(TEST_TENANT_ID, TEST_USER_ID, invalidReqâ€¦
    [90m 70| [39m      )[33m.[39mrejects[33m.[39m[34mtoThrow[39m()[33m;[39m
    [90m   | [39m      [31m^[39m
    [90m 71| [39m    })[33m;[39m
    [90m 72| [39m  })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[30/62]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/modules/tax/__tests__/tax-calculation.integration.test.ts[2m > [22mTax Calculation Integration[2m > [22mMulti-State Tax Calculations[2m > [22mshould calculate Arizona tax correctly
[31m[1mAssertionError[22m: expected 1834.18 to be close to 1825.59, received difference is 8.590000000000146, but expected 0.05[39m
[36m [2mâ¯[22m src/modules/tax/__tests__/tax-calculation.integration.test.ts:[2m38:24[22m[39m
    [90m 36| [39m
    [90m 37| [39m      [90m// Assert[39m
    [90m 38| [39m      [34mexpect[39m(stateTax)[33m.[39m[34mtoBeCloseTo[39m([34m1825.59[39m[33m,[39m [34m1[39m)[33m;[39m
    [90m   | [39m                       [31m^[39m
    [90m 39| [39m      [34mexpect[39m(stateTax)[33m.[39m[34mtoBeGreaterThan[39m([34m0[39m)[33m;[39m
    [90m 40| [39m    })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[31/62]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/modules/tax/__tests__/tax-calculation.integration.test.ts[2m > [22mTax Calculation Integration[2m > [22mMulti-State Tax Calculations[2m > [22mshould calculate California tax correctly
[31m[1mAssertionError[22m: expected 2125 to be close to 2062.5, received difference is 62.5, but expected 0.05[39m
[36m [2mâ¯[22m src/modules/tax/__tests__/tax-calculation.integration.test.ts:[2m86:24[22m[39m
    [90m 84| [39m
    [90m 85| [39m      [90m// Assert[39m
    [90m 86| [39m      [34mexpect[39m(totalTax)[33m.[39m[34mtoBeCloseTo[39m([34m2062.5[39m[33m,[39m [34m1[39m)[33m;[39m
    [90m   | [39m                       [31m^[39m
    [90m 87| [39m    })[33m;[39m
    [90m 88| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[32/62]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/modules/tax/__tests__/tax-calculation.integration.test.ts[2m > [22mTax Calculation Integration[2m > [22mTax Exemptions and Credits[2m > [22mshould apply trade-in tax credit correctly
[31m[1mAssertionError[22m: expected 1109.18 to be close to 1108.52, received difference is 0.6600000000000819, but expected 0.05[39m
[36m [2mâ¯[22m src/modules/tax/__tests__/tax-calculation.integration.test.ts:[2m139:19[22m[39m
    [90m137| [39m      [90m// Without trade-in: (25000 + 299) * 0.0725 = 1825.59[39m
    [90m138| [39m      [90m// With trade-in: (25000 - 10000 + 299) * 0.0725 = 1108.52[39m
    [90m139| [39m      [34mexpect[39m(tax)[33m.[39m[34mtoBeCloseTo[39m([34m1108.52[39m[33m,[39m [34m1[39m)[33m;[39m
    [90m   | [39m                  [31m^[39m
    [90m140| [39m    })[33m;[39m
    [90m141| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[33/62]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/modules/tax/__tests__/tax-calculation.integration.test.ts[2m > [22mTax Calculation Integration[2m > [22mTax Exemptions and Credits[2m > [22mshould handle document fee taxation rules
[31m[1mAssertionError[22m: expected 1581.19 to be close to 1583.69, received difference is 2.5, but expected 0.05[39m
[36m [2mâ¯[22m src/modules/tax/__tests__/tax-calculation.integration.test.ts:[2m156:21[22m[39m
    [90m154| [39m
    [90m155| [39m      [90m// Assert[39m
    [90m156| [39m      [34mexpect[39m(txTax)[33m.[39m[34mtoBeCloseTo[39m([34m1583.69[39m[33m,[39m [34m1[39m)[33m;[39m
    [90m   | [39m                    [31m^[39m
    [90m157| [39m      [34mexpect[39m(azTax)[33m.[39m[34mtoBeCloseTo[39m([34m1825.59[39m[33m,[39m [34m1[39m)[33m;[39m
    [90m158| [39m    })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[34/62]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22mVehicle Module Integration Tests[2m > [22mVehicle CRUD Operations[2m > [22mshould create a vehicle with auto-generated stock number
[31m[1mError[22m: Failed to create vehicle: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com[39m
[36m [2mâ¯[22m VehicleService.createVehicle src/modules/vehicle/services/vehicle.service.ts:[2m197:13[22m[39m
    [90m195| [39m      }
    [90m196| [39m      console.error('[VehicleService] Failed to create vehicle:', erroâ€¦
    [90m197| [39m      [35mthrow[39m [35mnew[39m [33mError[39m([32m`Failed to create vehicle: [39m[36m${[39merror[33m.[39mmessage[36m}[39m[32m`[39m)[33m;[39m
    [90m   | [39m            [31m^[39m
    [90m198| [39m    }
    [90m199| [39m  }
[90m [2mâ¯[22m src/modules/vehicle/__tests__/vehicle-integration.test.ts:[2m66:23[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[35/62]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22mVehicle Module Integration Tests[2m > [22mVehicle CRUD Operations[2m > [22mshould create a vehicle with custom stock number
[31m[1mError[22m: Failed to create vehicle: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com[39m
[36m [2mâ¯[22m VehicleService.createVehicle src/modules/vehicle/services/vehicle.service.ts:[2m197:13[22m[39m
    [90m195| [39m      }
    [90m196| [39m      console.error('[VehicleService] Failed to create vehicle:', erroâ€¦
    [90m197| [39m      [35mthrow[39m [35mnew[39m [33mError[39m([32m`Failed to create vehicle: [39m[36m${[39merror[33m.[39mmessage[36m}[39m[32m`[39m)[33m;[39m
    [90m   | [39m            [31m^[39m
    [90m198| [39m    }
    [90m199| [39m  }
[90m [2mâ¯[22m src/modules/vehicle/__tests__/vehicle-integration.test.ts:[2m87:23[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[36/62]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22mVehicle Module Integration Tests[2m > [22mVehicle CRUD Operations[2m > [22mshould reject invalid VIN
[31m[1mAssertionError[22m: expected [Function] to throw error including 'Invalid VIN' but got 'Failed to create vehicle: getaddrinfoâ€¦'[39m

Expected: [32m"Invalid VIN"[39m
Received: [31m"Failed to create vehicle: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com"[39m

[36m [2mâ¯[22m src/modules/vehicle/__tests__/vehicle-integration.test.ts:[2m101:7[22m[39m
    [90m 99| [39m      })[33m;[39m
    [90m100| [39m
    [90m101| [39m      [35mawait[39m [34mexpect[39m(
    [90m   | [39m      [31m^[39m
    [90m102| [39m        vehicleService.createVehicle(TEST_DEALERSHIP_1, vehicleData, Tâ€¦
    [90m103| [39m      )[33m.[39mrejects[33m.[39m[34mtoThrow[39m([32m'Invalid VIN'[39m)[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[37/62]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22mVehicle Module Integration Tests[2m > [22mVehicle CRUD Operations[2m > [22mshould reject duplicate VIN within same dealership
[31m[1mError[22m: Failed to create vehicle: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com[39m
[36m [2mâ¯[22m VehicleService.createVehicle src/modules/vehicle/services/vehicle.service.ts:[2m197:13[22m[39m
    [90m195| [39m      }
    [90m196| [39m      console.error('[VehicleService] Failed to create vehicle:', erroâ€¦
    [90m197| [39m      [35mthrow[39m [35mnew[39m [33mError[39m([32m`Failed to create vehicle: [39m[36m${[39merror[33m.[39mmessage[36m}[39m[32m`[39m)[33m;[39m
    [90m   | [39m            [31m^[39m
    [90m198| [39m    }
    [90m199| [39m  }
[90m [2mâ¯[22m src/modules/vehicle/__tests__/vehicle-integration.test.ts:[2m110:7[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[38/62]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22mVehicle Module Integration Tests[2m > [22mVehicle CRUD Operations[2m > [22mshould allow same VIN across different dealerships
[31m[1mError[22m: Failed to create vehicle: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com[39m
[36m [2mâ¯[22m VehicleService.createVehicle src/modules/vehicle/services/vehicle.service.ts:[2m197:13[22m[39m
    [90m195| [39m      }
    [90m196| [39m      console.error('[VehicleService] Failed to create vehicle:', erroâ€¦
    [90m197| [39m      [35mthrow[39m [35mnew[39m [33mError[39m([32m`Failed to create vehicle: [39m[36m${[39merror[33m.[39mmessage[36m}[39m[32m`[39m)[33m;[39m
    [90m   | [39m            [31m^[39m
    [90m198| [39m    }
    [90m199| [39m  }
[90m [2mâ¯[22m src/modules/vehicle/__tests__/vehicle-integration.test.ts:[2m121:24[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39/62]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22mVehicle Module Integration Tests[2m > [22mVehicle CRUD Operations[2m > [22mshould get vehicle by ID
[31m[1mError[22m: Failed to get vehicle: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com[39m
[36m [2mâ¯[22m VehicleService.getVehicle src/modules/vehicle/services/vehicle.service.ts:[2m218:13[22m[39m
    [90m216| [39m      }
    [90m217| [39m      console[33m.[39m[34merror[39m([32m'[VehicleService] Failed to get vehicle:'[39m[33m,[39m error)[33m;[39m
    [90m218| [39m      [35mthrow[39m [35mnew[39m [33mError[39m([32m`Failed to get vehicle: [39m[36m${[39merror[33m.[39mmessage[36m}[39m[32m`[39m)[33m;[39m
    [90m   | [39m            [31m^[39m
    [90m219| [39m    }
    [90m220| [39m  }
[90m [2mâ¯[22m src/modules/vehicle/__tests__/vehicle-integration.test.ts:[2m137:23[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[40/62]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22mVehicle Module Integration Tests[2m > [22mVehicle CRUD Operations[2m > [22mshould update vehicle details
[31m[1mError[22m: Failed to update vehicle: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com[39m
[36m [2mâ¯[22m VehicleService.updateVehicle src/modules/vehicle/services/vehicle.service.ts:[2m513:13[22m[39m
    [90m511| [39m      }
    [90m512| [39m      console.error('[VehicleService] Failed to update vehicle:', erroâ€¦
    [90m513| [39m      [35mthrow[39m [35mnew[39m [33mError[39m([32m`Failed to update vehicle: [39m[36m${[39merror[33m.[39mmessage[36m}[39m[32m`[39m)[33m;[39m
    [90m   | [39m            [31m^[39m
    [90m514| [39m    }
    [90m515| [39m  }
[90m [2mâ¯[22m src/modules/vehicle/__tests__/vehicle-integration.test.ts:[2m144:23[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[41/62]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22mVehicle Module Integration Tests[2m > [22mVehicle CRUD Operations[2m > [22mshould soft delete vehicle
[31m[1mError[22m: Failed to delete vehicle: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com[39m
[36m [2mâ¯[22m VehicleService.deleteVehicle src/modules/vehicle/services/vehicle.service.ts:[2m566:13[22m[39m
    [90m564| [39m      }
    [90m565| [39m      console.error('[VehicleService] Failed to delete vehicle:', erroâ€¦
    [90m566| [39m      [35mthrow[39m [35mnew[39m [33mError[39m([32m`Failed to delete vehicle: [39m[36m${[39merror[33m.[39mmessage[36m}[39m[32m`[39m)[33m;[39m
    [90m   | [39m            [31m^[39m
    [90m567| [39m    }
    [90m568| [39m  }
[90m [2mâ¯[22m src/modules/vehicle/__tests__/vehicle-integration.test.ts:[2m159:7[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[42/62]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22mVehicle Module Integration Tests[2m > [22mMulti-Tenant Isolation[2m > [22mshould enforce tenant isolation on get
[41m[1m FAIL [22m[49m src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22mVehicle Module Integration Tests[2m > [22mMulti-Tenant Isolation[2m > [22mshould enforce tenant isolation on update
[41m[1m FAIL [22m[49m src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22mVehicle Module Integration Tests[2m > [22mMulti-Tenant Isolation[2m > [22mshould enforce tenant isolation on delete
[31m[1mError[22m: Failed to create vehicle: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com[39m
[36m [2mâ¯[22m VehicleService.createVehicle src/modules/vehicle/services/vehicle.service.ts:[2m197:13[22m[39m
    [90m195| [39m      }
    [90m196| [39m      console.error('[VehicleService] Failed to create vehicle:', erroâ€¦
    [90m197| [39m      [35mthrow[39m [35mnew[39m [33mError[39m([32m`Failed to create vehicle: [39m[36m${[39merror[33m.[39mmessage[36m}[39m[32m`[39m)[33m;[39m
    [90m   | [39m            [31m^[39m
    [90m198| [39m    }
    [90m199| [39m  }
[90m [2mâ¯[22m src/modules/vehicle/__tests__/vehicle-integration.test.ts:[2m173:24[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[43/62]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22mVehicle Module Integration Tests[2m > [22mVIN Decoder[2m > [22mshould validate valid VIN
[31m[1mAssertionError[22m: expected false to be true // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- true[39m
[31m+ false[39m

[36m [2mâ¯[22m src/modules/vehicle/__tests__/vehicle-integration.test.ts:[2m223:28[22m[39m
    [90m221| [39m      [35mconst[39m result [33m=[39m vinDecoder[33m.[39m[34mvalidateVIN[39m([33mVALID_VIN_HONDA[39m)[33m;[39m
    [90m222| [39m
    [90m223| [39m      [34mexpect[39m(result[33m.[39mvalid)[33m.[39m[34mtoBe[39m([35mtrue[39m)[33m;[39m
    [90m   | [39m                           [31m^[39m
    [90m224| [39m      [34mexpect[39m(result[33m.[39mcheckDigitValid)[33m.[39m[34mtoBe[39m([35mtrue[39m)[33m;[39m
    [90m225| [39m    })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[44/62]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22mVehicle Module Integration Tests[2m > [22mVIN Decoder[2m > [22mshould calculate check digit correctly
[31m[1mAssertionError[22m: expected '7' to be '3' // Object.is equality[39m

Expected: [32m"3"[39m
Received: [31m"7"[39m

[36m [2mâ¯[22m src/modules/vehicle/__tests__/vehicle-integration.test.ts:[2m251:26[22m[39m
    [90m249| [39m      const checkDigit = vinDecoder.calculateCheckDigit('1HGCM826_3A12â€¦
    [90m250| [39m
    [90m251| [39m      [34mexpect[39m(checkDigit)[33m.[39m[34mtoBe[39m([32m'3'[39m)[33m;[39m
    [90m   | [39m                         [31m^[39m
    [90m252| [39m    })[33m;[39m
    [90m253| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[45/62]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22mVehicle Module Integration Tests[2m > [22mVIN Decoder[2m > [22mshould decode VIN via NHTSA API
[31m[1mVehicleError[22m: Invalid VIN check digit (position 9)[39m
[36m [2mâ¯[22m VINDecoderService.decodeVIN src/modules/vehicle/services/vin-decoder.service.ts:[2m175:13[22m[39m
    [90m173| [39m    [35mconst[39m validation [33m=[39m [35mthis[39m[33m.[39m[34mvalidateVIN[39m(vin)[33m;[39m
    [90m174| [39m    [35mif[39m ([33m![39mvalidation[33m.[39mvalid) {
    [90m175| [39m      [35mthrow[39m [35mnew[39m [33mInvalidVINError[39m(validation[33m.[39merror [33m||[39m [32m'Invalid VIN'[39m)[33m;[39m
    [90m   | [39m            [31m^[39m
    [90m176| [39m    }
    [90m177| [39m
[90m [2mâ¯[22m src/modules/vehicle/__tests__/vehicle-integration.test.ts:[2m255:39[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[22m[39m
[31m[1mSerialized Error:[22m[39m [90m{ code: 'INVALID_VIN', statusCode: 400 }[39m
[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[46/62]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22mVehicle Module Integration Tests[2m > [22mVIN Decoder[2m > [22mshould extract manufacturer code from VIN
[31m[1mVehicleError[22m: Invalid VIN check digit (position 9)[39m
[36m [2mâ¯[22m VINDecoderService.getManufacturerCode src/modules/vehicle/services/vin-decoder.service.ts:[2m453:13[22m[39m
    [90m451| [39m    [35mconst[39m validation [33m=[39m [35mthis[39m[33m.[39m[34mvalidateVIN[39m(vin)[33m;[39m
    [90m452| [39m    [35mif[39m ([33m![39mvalidation[33m.[39mvalid) {
    [90m453| [39m      [35mthrow[39m [35mnew[39m [33mInvalidVINError[39m(validation[33m.[39merror [33m||[39m [32m'Invalid VIN'[39m)[33m;[39m
    [90m   | [39m            [31m^[39m
    [90m454| [39m    }
    [90m455| [39m    [35mreturn[39m vin[33m.[39m[34mtoUpperCase[39m()[33m.[39m[34msubstring[39m([34m0[39m[33m,[39m [34m3[39m)[33m;[39m
[90m [2mâ¯[22m src/modules/vehicle/__tests__/vehicle-integration.test.ts:[2m265:30[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[22m[39m
[31m[1mSerialized Error:[22m[39m [90m{ code: 'INVALID_VIN', statusCode: 400 }[39m
[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[47/62]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22mVehicle Module Integration Tests[2m > [22mStock Number Service[2m > [22mshould generate sequential stock numbers
[31m[1mError[22m: Failed to generate stock number: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com[39m
[36m [2mâ¯[22m StockNumberService.generateStockNumber src/modules/vehicle/services/stock-number.service.ts:[2m73:13[22m[39m
    [90m 71| [39m    } [35mcatch[39m (error) {
    [90m 72| [39m      console.error('[StockNumberService] Failed to generate stock numâ€¦
    [90m 73| [39m      throw new Error(`Failed to generate stock number: ${error.messagâ€¦
    [90m   | [39m            [31m^[39m
    [90m 74| [39m    }
    [90m 75| [39m  }
[90m [2mâ¯[22m src/modules/vehicle/__tests__/vehicle-integration.test.ts:[2m273:22[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[48/62]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22mVehicle Module Integration Tests[2m > [22mStock Number Service[2m > [22mshould generate stock numbers with prefix
[31m[1mError[22m: Failed to generate stock number: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com[39m
[36m [2mâ¯[22m StockNumberService.generateStockNumber src/modules/vehicle/services/stock-number.service.ts:[2m73:13[22m[39m
    [90m 71| [39m    } [35mcatch[39m (error) {
    [90m 72| [39m      console.error('[StockNumberService] Failed to generate stock numâ€¦
    [90m 73| [39m      throw new Error(`Failed to generate stock number: ${error.messagâ€¦
    [90m   | [39m            [31m^[39m
    [90m 74| [39m    }
    [90m 75| [39m  }
[90m [2mâ¯[22m src/modules/vehicle/__tests__/vehicle-integration.test.ts:[2m287:21[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[49/62]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22mVehicle Module Integration Tests[2m > [22mStock Number Service[2m > [22mshould maintain separate sequences per dealership
[31m[1mError[22m: Failed to generate stock number: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com[39m
[36m [2mâ¯[22m StockNumberService.generateStockNumber src/modules/vehicle/services/stock-number.service.ts:[2m73:13[22m[39m
    [90m 71| [39m    } [35mcatch[39m (error) {
    [90m 72| [39m      console.error('[StockNumberService] Failed to generate stock numâ€¦
    [90m 73| [39m      throw new Error(`Failed to generate stock number: ${error.messagâ€¦
    [90m   | [39m            [31m^[39m
    [90m 74| [39m    }
    [90m 75| [39m  }
[90m [2mâ¯[22m src/modules/vehicle/__tests__/vehicle-integration.test.ts:[2m293:22[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[50/62]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22mVehicle Module Integration Tests[2m > [22mInventory Service[2m > [22mshould get inventory with filters
[41m[1m FAIL [22m[49m src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22mVehicle Module Integration Tests[2m > [22mInventory Service[2m > [22mshould filter by status
[41m[1m FAIL [22m[49m src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22mVehicle Module Integration Tests[2m > [22mInventory Service[2m > [22mshould update vehicle status
[41m[1m FAIL [22m[49m src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22mVehicle Module Integration Tests[2m > [22mInventory Service[2m > [22mshould reserve vehicle for deal
[41m[1m FAIL [22m[49m src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22mVehicle Module Integration Tests[2m > [22mInventory Service[2m > [22mshould release vehicle reservation
[41m[1m FAIL [22m[49m src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22mVehicle Module Integration Tests[2m > [22mInventory Service[2m > [22mshould get vehicle history
[41m[1m FAIL [22m[49m src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22mVehicle Module Integration Tests[2m > [22mInventory Service[2m > [22mshould get inventory summary
[41m[1m FAIL [22m[49m src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22mVehicle Module Integration Tests[2m > [22mInventory Service[2m > [22mshould get vehicle value metrics
[31m[1mError[22m: Failed to create vehicle: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com[39m
[36m [2mâ¯[22m VehicleService.createVehicle src/modules/vehicle/services/vehicle.service.ts:[2m197:13[22m[39m
    [90m195| [39m      }
    [90m196| [39m      console.error('[VehicleService] Failed to create vehicle:', erroâ€¦
    [90m197| [39m      [35mthrow[39m [35mnew[39m [33mError[39m([32m`Failed to create vehicle: [39m[36m${[39merror[33m.[39mmessage[36m}[39m[32m`[39m)[33m;[39m
    [90m   | [39m            [31m^[39m
    [90m198| [39m    }
    [90m199| [39m  }
[90m [2mâ¯[22m src/modules/vehicle/__tests__/vehicle-integration.test.ts:[2m314:23[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[51/62]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22mVehicle Module Integration Tests[2m > [22mPerformance & Concurrency[2m > [22mshould handle concurrent stock number generation without duplicates
[31m[1mError[22m: Failed to generate stock number: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com[39m
[36m [2mâ¯[22m StockNumberService.generateStockNumber src/modules/vehicle/services/stock-number.service.ts:[2m73:13[22m[39m
    [90m 71| [39m    } [35mcatch[39m (error) {
    [90m 72| [39m      console.error('[StockNumberService] Failed to generate stock numâ€¦
    [90m 73| [39m      throw new Error(`Failed to generate stock number: ${error.messagâ€¦
    [90m   | [39m            [31m^[39m
    [90m 74| [39m    }
    [90m 75| [39m  }
[90m [2mâ¯[22m src/modules/vehicle/__tests__/vehicle-integration.test.ts:[2m448:28[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[52/62]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/modules/vehicle/__tests__/vehicle-integration.test.ts[2m > [22mVehicle Module Integration Tests[2m > [22mPerformance & Concurrency[2m > [22mshould handle concurrent vehicle creation
[31m[1mError[22m: Failed to create vehicle: getaddrinfo ENOTFOUND dbaas-db-7003671-do-user-17045839-0.m.db.ondigitalocean.com[39m
[36m [2mâ¯[22m VehicleService.createVehicle src/modules/vehicle/services/vehicle.service.ts:[2m197:13[22m[39m
    [90m195| [39m      }
    [90m196| [39m      console.error('[VehicleService] Failed to create vehicle:', erroâ€¦
    [90m197| [39m      [35mthrow[39m [35mnew[39m [33mError[39m([32m`Failed to create vehicle: [39m[36m${[39merror[33m.[39mmessage[36m}[39m[32m`[39m)[33m;[39m
    [90m   | [39m            [31m^[39m
    [90m198| [39m    }
    [90m199| [39m  }
[90m [2mâ¯[22m src/modules/vehicle/__tests__/vehicle-integration.test.ts:[2m466:24[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[53/62]âŽ¯[22m[39m

[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m[1m[41m Unhandled Errors [49m[22m[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m
[31m[1m
Vitest caught 3 unhandled errors during the test run.
This might cause false positive tests. Resolve unhandled errors to make sure your tests are not affected.[22m[39m

[31mâŽ¯âŽ¯âŽ¯âŽ¯[39m[1m[41m Unhandled Rejection [49m[22m[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m
[31m[1mError[22m: process.exit unexpectedly called with "1"[39m
[90m [2mâ¯[22m process.exit node_modules/vitest/dist/chunks/startModuleRunner.BOmUtLIO.js:[2m722:9[22m[39m
[36m [2mâ¯[22m process.<anonymous> server/database/db-service.ts:[2m248:13[22m[39m
    [90m246| [39m      console.error('[DB Service] Error during emergency shutdown:', sâ€¦
    [90m247| [39m    }
    [90m248| [39m    process[33m.[39m[34mexit[39m([34m1[39m)[33m;[39m
    [90m   | [39m            [31m^[39m
    [90m249| [39m  })[33m;[39m
    [90m250| [39m}
[90m [2mâ¯[22m processTicksAndRejections node:internal/process/task_queues:[2m95:5[22m[39m

[31mThis error originated in "[1mserver/__tests__/e2e-user-journeys.test.ts[22m" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.[39m

[31mâŽ¯âŽ¯âŽ¯âŽ¯[39m[1m[41m Unhandled Rejection [49m[22m[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m
[31m[1mError[22m: process.exit unexpectedly called with "1"[39m
[90m [2mâ¯[22m process.exit node_modules/vitest/dist/chunks/startModuleRunner.BOmUtLIO.js:[2m722:9[22m[39m
[36m [2mâ¯[22m process.<anonymous> src/core/database/db-service.ts:[2m249:13[22m[39m
    [90m247| [39m      console.error('[DB Service] Error during emergency shutdown:', sâ€¦
    [90m248| [39m    }
    [90m249| [39m    process[33m.[39m[34mexit[39m([34m1[39m)[33m;[39m
    [90m   | [39m            [31m^[39m
    [90m250| [39m  })[33m;[39m
    [90m251| [39m}
[90m [2mâ¯[22m processTicksAndRejections node:internal/process/task_queues:[2m95:5[22m[39m

[31mThis error originated in "[1mserver/__tests__/tax-calculation.test.ts[22m" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.[39m

[31mâŽ¯âŽ¯âŽ¯âŽ¯[39m[1m[41m Unhandled Rejection [49m[22m[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m
[31m[1mError[22m: process.exit unexpectedly called with "1"[39m
[90m [2mâ¯[22m process.exit node_modules/vitest/dist/chunks/startModuleRunner.BOmUtLIO.js:[2m722:9[22m[39m
[36m [2mâ¯[22m process.<anonymous> server/database/db-service.ts:[2m248:13[22m[39m
    [90m246| [39m      console.error('[DB Service] Error during emergency shutdown:', sâ€¦
    [90m247| [39m    }
    [90m248| [39m    process[33m.[39m[34mexit[39m([34m1[39m)[33m;[39m
    [90m   | [39m            [31m^[39m
    [90m249| [39m  })[33m;[39m
    [90m250| [39m}
[90m [2mâ¯[22m processTicksAndRejections node:internal/process/task_queues:[2m95:5[22m[39m

[31mThis error originated in "[1mserver/__tests__/tax-calculation.test.ts[22m" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.[39m
[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m


[2m Test Files [22m [1m[31m17 failed[39m[22m[2m | [22m[1m[32m2 passed[39m[22m[90m (19)[39m
[2m      Tests [22m [1m[31m41 failed[39m[22m[2m | [22m[1m[32m153 passed[39m[22m[2m | [22m[33m214 skipped[39m[90m (408)[39m
[2m     Errors [22m [1m[31m3 errors[39m[22m
[2m   Start at [22m 12:05:29
[2m   Duration [22m 90.65s[2m (transform 5.38s, setup 0ms, collect 18.97s, tests 63.81s, environment 7ms, prepare 576ms)[22m

