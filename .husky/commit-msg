#!/bin/sh

echo "Validating commit message format..."
npx --no -- commitlint --edit "$1"

if [ $? -ne 0 ]; then
  echo ""
  echo "Commit message format invalid!"
  echo "Format: <type>(<scope>): <subject>"
  echo ""
  echo "Examples:"
  echo "  feat(auth): add multi-factor authentication"
  echo "  fix(deals): resolve tax calculation error"
  echo "  stabilize(arch): enforce module boundaries"
  echo ""
  echo "Types: feat, fix, docs, style, refactor, perf, test, build, ci, chore, revert, stabilize"
  echo "Scopes: auth, deals, customers, vehicles, tax, email, ui, api, db, config, deps, arch"
  exit 1
fi

echo "Commit message format valid!"