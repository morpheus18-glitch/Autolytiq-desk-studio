---
# =============================================================================
# Service Accounts with IRSA for Secrets Access
# =============================================================================
# These service accounts allow pods to access AWS Secrets Manager
# through IAM Roles for Service Accounts (IRSA)
# =============================================================================

# API Gateway Service Account
apiVersion: v1
kind: ServiceAccount
metadata:
  name: api-gateway
  namespace: autolytiq
  annotations:
    # Set by Terraform: terraform output secrets_access_role_arn
    eks.amazonaws.com/role-arn: '${SECRETS_ACCESS_ROLE_ARN}'
  labels:
    app.kubernetes.io/name: api-gateway
    app.kubernetes.io/component: service-account
---
# Auth Service Service Account
apiVersion: v1
kind: ServiceAccount
metadata:
  name: auth-service
  namespace: autolytiq
  annotations:
    eks.amazonaws.com/role-arn: '${SECRETS_ACCESS_ROLE_ARN}'
  labels:
    app.kubernetes.io/name: auth-service
    app.kubernetes.io/component: service-account
---
# Deal Service Service Account
apiVersion: v1
kind: ServiceAccount
metadata:
  name: deal-service
  namespace: autolytiq
  annotations:
    eks.amazonaws.com/role-arn: '${SECRETS_ACCESS_ROLE_ARN}'
  labels:
    app.kubernetes.io/name: deal-service
    app.kubernetes.io/component: service-account
---
# Customer Service Service Account
apiVersion: v1
kind: ServiceAccount
metadata:
  name: customer-service
  namespace: autolytiq
  annotations:
    eks.amazonaws.com/role-arn: '${SECRETS_ACCESS_ROLE_ARN}'
  labels:
    app.kubernetes.io/name: customer-service
    app.kubernetes.io/component: service-account
---
# Inventory Service Service Account
apiVersion: v1
kind: ServiceAccount
metadata:
  name: inventory-service
  namespace: autolytiq
  annotations:
    eks.amazonaws.com/role-arn: '${SECRETS_ACCESS_ROLE_ARN}'
  labels:
    app.kubernetes.io/name: inventory-service
    app.kubernetes.io/component: service-account
---
# Email Service Service Account
apiVersion: v1
kind: ServiceAccount
metadata:
  name: email-service
  namespace: autolytiq
  annotations:
    eks.amazonaws.com/role-arn: '${SECRETS_ACCESS_ROLE_ARN}'
  labels:
    app.kubernetes.io/name: email-service
    app.kubernetes.io/component: service-account
---
# User Service Service Account
apiVersion: v1
kind: ServiceAccount
metadata:
  name: user-service
  namespace: autolytiq
  annotations:
    eks.amazonaws.com/role-arn: '${SECRETS_ACCESS_ROLE_ARN}'
  labels:
    app.kubernetes.io/name: user-service
    app.kubernetes.io/component: service-account
---
# Config Service Service Account
apiVersion: v1
kind: ServiceAccount
metadata:
  name: config-service
  namespace: autolytiq
  annotations:
    eks.amazonaws.com/role-arn: '${SECRETS_ACCESS_ROLE_ARN}'
  labels:
    app.kubernetes.io/name: config-service
    app.kubernetes.io/component: service-account
---
# Messaging Service Service Account
apiVersion: v1
kind: ServiceAccount
metadata:
  name: messaging-service
  namespace: autolytiq
  annotations:
    eks.amazonaws.com/role-arn: '${SECRETS_ACCESS_ROLE_ARN}'
  labels:
    app.kubernetes.io/name: messaging-service
    app.kubernetes.io/component: service-account
---
# Showroom Service Service Account
apiVersion: v1
kind: ServiceAccount
metadata:
  name: showroom-service
  namespace: autolytiq
  annotations:
    eks.amazonaws.com/role-arn: '${SECRETS_ACCESS_ROLE_ARN}'
  labels:
    app.kubernetes.io/name: showroom-service
    app.kubernetes.io/component: service-account
---
# Settings Service Service Account
apiVersion: v1
kind: ServiceAccount
metadata:
  name: settings-service
  namespace: autolytiq
  annotations:
    eks.amazonaws.com/role-arn: '${SECRETS_ACCESS_ROLE_ARN}'
  labels:
    app.kubernetes.io/name: settings-service
    app.kubernetes.io/component: service-account
