# =============================================================================
# Autolytiq Secrets Configuration
# =============================================================================
# IMPORTANT: This file provides TWO options for secrets management:
#
# 1. LOCAL DEVELOPMENT (Default): Uses placeholder K8s Secrets
#    - Set actual values manually for local clusters
#    - NEVER use in production
#
# 2. PRODUCTION: Uses External Secrets Operator (ESO)
#    - Secrets are fetched from AWS Secrets Manager
#    - See infrastructure/k8s/external-secrets/ for ESO configuration
#    - Apply ESO manifests: kubectl apply -k infrastructure/k8s/external-secrets/overlays/prod
#
# NEVER commit real secrets to git!
# =============================================================================

---
# Local Development Secret (placeholder values)
# In production, this is created by External Secrets Operator
apiVersion: v1
kind: Secret
metadata:
  name: autolytiq-secrets
  namespace: autolytiq
  labels:
    app.kubernetes.io/name: autolytiq-secrets
    app.kubernetes.io/component: secrets
  annotations:
    description: 'Placeholder for local development. In production, managed by External Secrets Operator.'
type: Opaque
stringData:
  # Database - REPLACE for local development
  DATABASE_URL: 'postgresql://postgres:postgres@postgres:5432/autolytiq?sslmode=disable'

  # Redis - REPLACE for local development
  REDIS_URL: 'redis://redis:6379'

  # JWT Authentication - REPLACE with secure value
  # Generate with: openssl rand -base64 64
  JWT_SECRET: 'development-jwt-secret-change-in-production-min-32-chars'

  # Session encryption - REPLACE with secure value
  SESSION_SECRET: 'development-session-secret-change-in-production'

  # PII Encryption Key (AES-256-GCM) - MUST be 64 hex characters (32 bytes)
  # Generate with: openssl rand -hex 32
  PII_ENCRYPTION_KEY: '0000000000000000000000000000000000000000000000000000000000000000'

---
# Database credentials (separate for services that need only DB)
apiVersion: v1
kind: Secret
metadata:
  name: database-credentials
  namespace: autolytiq
  labels:
    app.kubernetes.io/name: database-credentials
    app.kubernetes.io/component: secrets
type: Opaque
stringData:
  DATABASE_URL: 'postgresql://postgres:postgres@postgres:5432/autolytiq?sslmode=disable'
  POSTGRES_USER: 'postgres'
  POSTGRES_PASSWORD: 'postgres'
  POSTGRES_HOST: 'postgres'
  POSTGRES_PORT: '5432'
  POSTGRES_DB: 'autolytiq'

---
# Redis credentials
apiVersion: v1
kind: Secret
metadata:
  name: redis-credentials
  namespace: autolytiq
  labels:
    app.kubernetes.io/name: redis-credentials
    app.kubernetes.io/component: secrets
type: Opaque
stringData:
  REDIS_URL: 'redis://redis:6379'
  REDIS_HOST: 'redis'
  REDIS_PORT: '6379'

---
# JWT secrets
apiVersion: v1
kind: Secret
metadata:
  name: jwt-secrets
  namespace: autolytiq
  labels:
    app.kubernetes.io/name: jwt-secrets
    app.kubernetes.io/component: secrets
type: Opaque
stringData:
  JWT_SECRET: 'development-jwt-secret-change-in-production-min-32-chars'
  JWT_ISSUER: 'autolytiq'

---
# PII Encryption secrets
apiVersion: v1
kind: Secret
metadata:
  name: pii-encryption-secrets
  namespace: autolytiq
  labels:
    app.kubernetes.io/name: pii-encryption-secrets
    app.kubernetes.io/component: secrets
type: Opaque
stringData:
  PII_ENCRYPTION_KEY: '0000000000000000000000000000000000000000000000000000000000000000'
  PII_ENCRYPTION_VERSION: 'v1'

---
# Session secrets
apiVersion: v1
kind: Secret
metadata:
  name: session-secrets
  namespace: autolytiq
  labels:
    app.kubernetes.io/name: session-secrets
    app.kubernetes.io/component: secrets
type: Opaque
stringData:
  SESSION_SECRET: 'development-session-secret-change-in-production'

---
# SMTP credentials (for email service)
apiVersion: v1
kind: Secret
metadata:
  name: smtp-credentials
  namespace: autolytiq
  labels:
    app.kubernetes.io/name: smtp-credentials
    app.kubernetes.io/component: secrets
type: Opaque
stringData:
  SMTP_HOST: 'smtp.mailtrap.io'
  SMTP_PORT: '587'
  SMTP_USERNAME: ''
  SMTP_PASSWORD: ''
  SMTP_FROM_EMAIL: 'noreply@autolytiq.com'
  SMTP_FROM_NAME: 'Autolytiq'

---
# Resend API credentials (alternative email provider)
apiVersion: v1
kind: Secret
metadata:
  name: resend-credentials
  namespace: autolytiq
  labels:
    app.kubernetes.io/name: resend-credentials
    app.kubernetes.io/component: secrets
type: Opaque
stringData:
  RESEND_API_KEY: ''

---
# External API credentials
apiVersion: v1
kind: Secret
metadata:
  name: external-api-credentials
  namespace: autolytiq
  labels:
    app.kubernetes.io/name: external-api-credentials
    app.kubernetes.io/component: secrets
type: Opaque
stringData:
  SENTRY_DSN: ''
  DD_API_KEY: ''
  STRIPE_SECRET_KEY: ''
  STRIPE_WEBHOOK_SECRET: ''
