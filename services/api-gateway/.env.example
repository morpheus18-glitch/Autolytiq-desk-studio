# API Gateway Configuration
# Copy this file to .env and update with your values

# Server Configuration
PORT=8080

# JWT Configuration
# REQUIRED: Must be at least 32 characters
# Generate with: openssl rand -base64 32
JWT_SECRET=development-secret-change-in-production-minimum-32-characters
JWT_ISSUER=autolytiq-api-gateway

# CORS Configuration
# Comma-separated list of allowed origins
# Production: https://app.autolytiq.com
# Development: http://localhost:5173
ALLOWED_ORIGINS=http://localhost:5173

# Backend Service URLs
# Development: localhost with different ports
# Production: service names in Docker/K8s network
AUTH_SERVICE_URL=http://localhost:8087
DEAL_SERVICE_URL=http://localhost:8081
CUSTOMER_SERVICE_URL=http://localhost:8082
INVENTORY_SERVICE_URL=http://localhost:8083
EMAIL_SERVICE_URL=http://localhost:8084
USER_SERVICE_URL=http://localhost:8085
CONFIG_SERVICE_URL=http://localhost:8086
SHOWROOM_SERVICE_URL=http://localhost:8088
MESSAGING_SERVICE_URL=http://localhost:8089
SETTINGS_SERVICE_URL=http://localhost:8090

# ============================================
# Rate Limiting Configuration
# ============================================

# Redis connection for distributed rate limiting
# Format: redis://[password@]host:port[/db]
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=
REDIS_DB=0

# Rate Limits (requests per window)
# IP Rate Limit: For unauthenticated requests
RATE_LIMIT_IP=100

# User Rate Limit: For authenticated users
RATE_LIMIT_USER=1000

# Dealership Rate Limit: Total limit per dealership
RATE_LIMIT_DEALERSHIP=5000

# Window duration in seconds (default: 60 = 1 minute)
RATE_LIMIT_WINDOW_SECONDS=60

# Enable/disable rate limiting (true/false)
RATE_LIMIT_ENABLED=true

# Additional bypass paths (comma-separated)
# Default bypass paths: /health, /api/v1/version, /metrics, /ready, /live
# RATE_LIMIT_BYPASS_PATHS=/custom/path,/another/path

# ============================================
# Logging Configuration
# ============================================
LOG_LEVEL=INFO

# ============================================
# Production Example
# ============================================
# AUTH_SERVICE_URL=http://auth-service:8087
# DEAL_SERVICE_URL=http://deal-service:8081
# CUSTOMER_SERVICE_URL=http://customer-service:8082
# INVENTORY_SERVICE_URL=http://inventory-service:8083
# EMAIL_SERVICE_URL=http://email-service:8084
# USER_SERVICE_URL=http://user-service:8085
# CONFIG_SERVICE_URL=http://config-service:8086
# SHOWROOM_SERVICE_URL=http://showroom-service:8088
# MESSAGING_SERVICE_URL=http://messaging-service:8089
# SETTINGS_SERVICE_URL=http://settings-service:8090
# REDIS_URL=redis://redis:6379

# ============================================
# Kubernetes Example
# ============================================
# AUTH_SERVICE_URL=http://auth-service.autolytiq.svc.cluster.local:8087
# DEAL_SERVICE_URL=http://deal-service.autolytiq.svc.cluster.local:8081
# CUSTOMER_SERVICE_URL=http://customer-service.autolytiq.svc.cluster.local:8082
# INVENTORY_SERVICE_URL=http://inventory-service.autolytiq.svc.cluster.local:8083
# EMAIL_SERVICE_URL=http://email-service.autolytiq.svc.cluster.local:8084
# USER_SERVICE_URL=http://user-service.autolytiq.svc.cluster.local:8085
# CONFIG_SERVICE_URL=http://config-service.autolytiq.svc.cluster.local:8086
# SHOWROOM_SERVICE_URL=http://showroom-service.autolytiq.svc.cluster.local:8088
# MESSAGING_SERVICE_URL=http://messaging-service.autolytiq.svc.cluster.local:8089
# SETTINGS_SERVICE_URL=http://settings-service.autolytiq.svc.cluster.local:8090
# REDIS_URL=redis://redis.autolytiq.svc.cluster.local:6379
